var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={546:(t,n,e)=>{e.r(n),e.d(n,{init:()=>E,playPause:()=>j,reconfigure:()=>q,step:()=>V});var i,o=function(){function t(t,n){this._renderer=t,this._agents=n}return t.prototype.init=function(t){this._agents.init(t)},t.prototype.update=function(t){var n=this;this._agents.forEach((function(e){e.update(t,n._agents.getNeighboursInRangeEuclidean(e,400))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){this._renderer.clear(),this._renderer.drawAgents(this._agents)},t}(),r=function(){function t(t){var n=this;this.cameraDist=800,this.mouseDown=function(t){n.drag=!0,n.oldX=t.pageX,n.oldY=t.pageY},this.mouseUp=function(t){n.drag=!1,t.preventDefault()},this.mouseMove=function(t){if(!n.drag)return!1;n.xPan+=t.pageX-n.oldX,n.yPan+=t.pageY-n.oldY,n.oldX=t.pageX,n.oldY=t.pageY},this.mouseScroll=function(t){n.cameraDist+=t.deltaY,n.cameraDist<0&&(n.cameraDist=0),t.preventDefault(),console.log("Scroll")},this.canvas=t,this.context=this.canvas.getContext("2d"),this.xPan=this.canvas.width/2,this.yPan=this.canvas.height/2,this.canvas.addEventListener("mousedown",this.mouseDown,!1),this.canvas.addEventListener("mouseup",this.mouseUp,!1),this.canvas.addEventListener("mouseout",this.mouseUp,!1),this.canvas.addEventListener("mousemove",this.mouseMove,!1),this.canvas.addEventListener("wheel",this.mouseScroll,!1)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.fillStyle="rgb(135, 194, 250)",this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height)},t.prototype.drawAgents=function(t){var n=this,e=800/this.cameraDist;this.context.setTransform(1,0,0,1,0,0),this.context.translate(this.xPan,this.yPan),this.context.scale(e,e),this.context.fillStyle="rgb(51, 51, 51)",this.context.fillRect(.55*-this.context.canvas.width,.55*-this.context.canvas.height,1.1*this.context.canvas.width,1.1*this.context.canvas.height),t.forEach((function(t){n.drawAgent(t)}))},t.prototype.drawAgent=function(t){var n=t.getPosition(),e=t.getDirection(),i=t.getColour();this.context.beginPath(),this.context.strokeStyle="rgb("+i.r+", "+i.g+", "+i.b+")",this.context.lineWidth=2,this.context.arc(n.x,n.y,t.Radius,0,2*Math.PI);var o=e.magnitude();if(0!==o){this.context.moveTo(n.x,n.y);var r=n.add(e.divide(o).multiply(t.Radius));this.context.lineTo(r.x,r.y)}this.context.stroke()},t}(),s=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,n){var e=t.getPosition().x-n,i=t.getPosition().y-n,o=t.getPosition().x+n,r=t.getPosition().y+n;return this.rangeSearch(this._root,e,i,o,r,!0).filter((function(n){return n.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,n){return this.getNeighboursInRangeRectilinear(t,n).filter((function(e){return t.getPosition().subtract(e.getPosition()).magnitudeSqrd()<=Math.pow(n,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,n){if(0===t.length)return null;var e=Math.floor(t.length/2),i=n?t.sort((function(t,n){return t.getPosition().x-n.getPosition().x})):t.sort((function(t,n){return t.getPosition().y-n.getPosition().y})),o=this.constructTree(i.slice(0,e),!n),r=this.constructTree(i.slice(e+1,t.length),!n);return{agent:t[e],left:o,right:r}},t.prototype.rangeSearch=function(t,n,e,i,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=i&&(s=s.concat(this.rangeSearch(t.right,n,e,i,o,!r))),t.agent.getPosition().x>=n&&(s=s.concat(this.rangeSearch(t.left,n,e,i,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,n,e,i,o,!r))),t.agent.getPosition().y>=e&&(s=s.concat(this.rangeSearch(t.left,n,e,i,o,!r)))),t.agent.getPosition().x>=n&&t.agent.getPosition().y>=e&&t.agent.getPosition().x<=i&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),a=function(){function t(t,n){this.x=t,this.y=n}return t.prototype.copy=function(n){return new t(n.x,n.y)},t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.subtract=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.multiply=function(n){return new t(this.x*n,this.y*n)},t.prototype.divide=function(n){return new t(this.x/n,this.y/n)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var n=this.magnitude();return 0==n?new t(0,0):this.divide(n)},t.prototype.sample=function(n){var e=Math.sqrt(Math.random())*n,i=2*Math.PI*Math.random();return new t(this.x+e*Math.cos(i),this.y+e*Math.sin(i))},t}(),u=function(){function t(t,n,e){this.Id=t,this.Radius=20,this._position=n,this._direction=new a(0,0),this._getPreferredVelocity=e,this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.isDone=function(){return this._isDone},t}(),c=function(){function t(){}return t.FromHsv=function(t,n,e){var i=(t*=6)-Math.floor(t),o=e*(1-n),r=e*(1-n*i),s=e*(1-n*(1-i));return 0<=t&&t<1?{r:255*e,g:255*s,b:255*o}:1<=t&&t<2?{r:255*r,g:255*e,b:255*o}:2<=t&&t<3?{r:255*o,g:255*e,b:255*s}:3<=t&&t<4?{r:255*o,g:255*r,b:255*e}:4<=t&&t<5?{r:255*s,g:255*o,b:255*e}:5<=t&&t<6?{r:255*e,g:255*o,b:255*r}:{r:0,g:0,b:0}},t.White={r:255,g:255,b:255},t.Red={r:255,g:0,b:0},t.Green={r:0,g:255,b:0},t}(),h=(i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return h(n,t),n.prototype.getColour=function(){return this._isDone?c.White:c.Green},n.prototype.update=function(t,n){if(!this._isDone){var e=this._getPreferredVelocity(this._position),i=60*t/4e3;e.magnitudeSqrd()<.1?this._isDone=!0:(this._direction=e,this._position=this._position.add(e.multiply(i)))}},n}(u),l=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),d=function(t){function n(n,e,i){var o=t.call(this,n,e,i)||this;return o._isStuck=!1,o}return l(n,t),n.prototype.getColour=function(){return this._isDone?c.White:this._isStuck?c.Red:c.Green},n.prototype.update=function(t,n){if(!this._isDone){var e=this._getPreferredVelocity(this._position),i=60*t/4e3;if(e.magnitudeSqrd()<.1)this._isDone=!0;else{this._direction=e.normalise();var o=this._position.add(this._direction.multiply(25));this._isStuck=!1;for(var r=0;r<n.length;r++)if(this.collides(n[r],o))return void(this._isStuck=!0);this._direction=e,this._position=this._position.add(this._direction.multiply(i))}}},n.prototype.collides=function(t,n){return t.getPosition().subtract(n).magnitudeSqrd()<(t.Radius+this.Radius)*(t.Radius+this.Radius)},n}(u),f=function(){function t(){}return t.getClosestPointOnLine=function(t,n,e){var i=n.normalise(),o=e.subtract(t).dot(i);return t.add(i.multiply(o))},t.getFirstRayCircleIntersection=function(t,n,e,i){var o=e.subtract(t),r=i.dot(i),s=2*i.dot(o),a=o.dot(o)-Math.pow(n,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var c=(-s-Math.sqrt(u))/2*r;return c<0?1/0:c},t.getLineLineIntersection=function(t,n,e,i){var o=e.subtract(t),r=i.x*n.y-i.y*n.x,s=(o.y*i.x-o.y*i.y)/r;return t.add(n.multiply(s))},t}(),g=function(){function t(t,n,e){this.vertex=t,this.tangent1=n,this.tangent2=e}return t.prototype.contains=function(t){var n=(this.tangent1.x-this.vertex.x)*(t.y-this.vertex.y)-(this.tangent1.y-this.vertex.y)*(t.x-this.vertex.x),e=(this.tangent2.x-this.vertex.x)*(t.y-this.vertex.y)-(this.tangent2.y-this.vertex.y)*(t.x-this.vertex.x);return n>0&&e<0},t}(),y=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),v=function(t){function n(n,e,i){var o=t.call(this,n,e,i)||this;return o._colour=c.Green,o}return y(n,t),n.prototype.getColour=function(){return this._colour},n.prototype.update=function(t,n){if(!this._isDone){var e=this._getPreferredVelocity(this._position),i=60*t/4e3;if(e.magnitudeSqrd()<.1)return this._isDone=!0,this._direction=new a(0,0),void(this._colour=c.White);for(var o,r,s=!0,u=0;u<n.length;u++)if(null!=(x=this.getVelocityObstacle(n[u]))&&x.contains(e)){s=!1,o=x,r=u;break}if(s)return this._direction=e,this._position=this._position.add(this._direction.multiply(i)),void(this._colour=c.Green);if(null!=o){var h=f.getClosestPointOnLine(o.vertex,o.tangent1,e),p=f.getClosestPointOnLine(o.vertex,o.tangent2,e),l=!0,d=!0;for(u=0;u<n.length;u++)u!=r&&(null!=(x=this.getVelocityObstacle(n[u]))&&x.contains(h)&&(l=!1),null!=x&&x.contains(h)&&(d=!1));if(l&&d?h.subtract(e).magnitudeSqrd()<p.subtract(e).magnitudeSqrd()?this._direction=h:this._direction=p:l?this._direction=h:d&&(this._direction=p),l||d)return this._position=this._position.add(this._direction.multiply(i)),void this.setColour(e)}var g=1/0,y=new a(0,0);for(u=0;u<100;u++){for(var v=new a(0,0).sample(1),_=1/0,m=0;m<n.length;m++){var x,w=n[m];if(null==(x=this.getVelocityObstacle(w))||x.contains(v)){var b=f.getFirstRayCircleIntersection(w.getPosition().add(w.getDirection()),this.Radius+w.Radius,this._position,v.subtract(w.getDirection()));b<_&&(_=b)}}var P=100/_+e.subtract(v).magnitude();P<g&&(g=P,y=v)}this._direction=y,this._position=this._position.add(this._direction.multiply(i)),this.setColour(e)}},n.prototype.getVelocityObstacle=function(t){var n=t.getDirection(),e=t.getPosition().subtract(this._position).add(n),i=t.Radius+this.Radius,o=n.subtract(e),r=o.magnitude();if(r<i)return null;var s=Math.acos(i/r),u=Math.atan2(o.y,o.x),c=u+s,h=new a(e.x+i*Math.cos(c),e.y+i*Math.sin(c)),p=u-s,l=new a(e.x+i*Math.cos(p),e.y+i*Math.sin(p));return new g(n,h,l)},n.prototype.setColour=function(t){var n=t.subtract(this._direction).magnitude(),e=n>1?0:(1-n)/3;this._colour=c.FromHsv(e,1,1)},n}(u),_=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),m=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return _(n,t),n.prototype.getVelocityObstacle=function(t){var n=this.getDirection(),e=t.getDirection(),i=n.add(e).divide(2),o=t.getPosition().subtract(this._position).add(e),r=t.Radius+this.Radius,s=e.subtract(o),u=s.magnitude();if(u<r)return null;var c=Math.acos(r/u),h=Math.atan2(s.y,s.x),p=h+c,l=new a(o.x+r*Math.cos(p),o.y+r*Math.sin(p)),d=h-c,f=new a(o.x+r*Math.cos(d),o.y+r*Math.sin(d));return new g(i,l,f)},n}(v),x=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),w=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return x(n,t),n.prototype.getVelocityObstacle=function(t){var n=this.getDirection(),e=t.getDirection(),i=e,o=n.add(e).divide(2),r=t.getPosition().subtract(this._position),s=r.add(e),u=t.Radius+this.Radius,c=e.subtract(s),h=c.magnitude();if(h<u)return null;var p,l=Math.acos(u/h),d=Math.atan2(c.y,c.x),y=d+l,v=new a(s.x+u*Math.cos(y),s.y+u*Math.sin(y)),_=d-l,m=new a(s.x+u*Math.cos(_),s.y+u*Math.sin(_));return p=(r.x-e.x)*(n.y-e.y)-(r.y-e.y)*(n.x-e.x)>0?f.getLineLineIntersection(i,v,o,m):f.getLineLineIntersection(i,m,o,v),new g(p,v,m)},n}(v),b=function(){function t(){}return t.getAgent=function(t,n,e,i){switch(t){case"BasicAgent":return new p(n,e,i);case"StopAgent":return new d(n,e,i);case"VOAgent":return new v(n,e,i);case"RVOAgent":return new m(n,e,i);case"HRVOAgent":return new w(n,e,i);default:throw new Error('Unknown agent type "'+t+'"')}},t}(),P=function(){function t(){}return t.getConfiguration=function(t,n,e,i,o){switch(t){case"RandomToRandom":return this.RandomToRandom(n,e,i,o);case"RandomToLine":return this.RandomToLine(n,e,i,o);case"CircleToCircle":return this.CircleToCircle(n,e,i,o);case"GridToGrid":return this.GridToGrid(n,e,i,o);default:throw new Error('Unknown configuration type "'+t+'"')}},t.RandomToRandom=function(t,n,e,i){for(var o=[],r=this.poissonDiskSample(n,e,i,50).map((function(t){return t.subtract(new a(n/2,e/2))})),s=this.poissonDiskSample(n,e,i,50).map((function(t){return t.subtract(new a(n/2,e/2))})),u=0;u<i;u++){var c=b.getAgent(t,u,r[u],this.preferredVelocityFromGoalPosition(s[u]));o.push(c)}return o},t.RandomToLine=function(t,n,e,i){for(var o=[],r=this.poissonDiskSample(n,e,i,50).map((function(t){return t.subtract(new a(n/2,e/2))})),s=0;s<i;s++){var u=b.getAgent(t,s,r[s],this.preferredVelocityFromGoalPosition(new a(((s+1)/(i+1)-.5)*n,0)));o.push(u)}return o},t.CircleToCircle=function(t,n,e,i){for(var o=[],r=e/2-25,s=0;s<i;s++){var u=2*Math.PI*s/i,c=b.getAgent(t,s,new a(r*Math.cos(u),r*Math.sin(u)),this.preferredVelocityFromGoalPosition(new a(r*Math.cos(u+Math.PI),r*Math.sin(u+Math.PI))));o.push(c)}return o},t.GridToGrid=function(t,n,e,i){for(var o=[],r=Math.ceil(Math.sqrt(i/2)),s=90,u=30-n/2,c=-(r-1)/2*s,h=0;h<i;h++){var p=Math.floor(h/2),l=Math.floor(p/r),d=p%r;if(h%2==0){var f=b.getAgent(t,h,new a(u+(r-1-d)*s,c+l*s),this.preferredVelocityFromGoalPosition(new a(-u-d*s,c+l*s)));o.push(f)}else f=b.getAgent(t,h,new a(-u-(r-1-d)*s,c+l*s),this.preferredVelocityFromGoalPosition(new a(u+d*s,c+l*s))),o.push(f)}return o},t.preferredVelocityFromGoalPosition=function(t){return function(n){var e=t.subtract(n);return e.magnitudeSqrd()<1?e:e.normalise()}},t.poissonDiskSample=function(t,n,e,i){for(var o=[],r=function(){for(var e,r=!0;r;)r=!1,e=new a(t*Math.random(),n*Math.random()),o.forEach((function(t){e.subtract(t).magnitudeSqrd()<Math.pow(i,2)&&(r=!0)}));o.push(e)},s=0;s<e;s++)r();return o},t}(),M=document.getElementById("config"),O=document.getElementById("agentType"),S=document.getElementById("numberOfAgents"),R=document.getElementById("canvas"),D=document.getElementById("framerate"),C=document.getElementById("playButton"),A=document.getElementById("stepButton"),I=new o(new r(R),new s),T=!1;function E(){this.reconfigure();var t=0,n=0,e=0;window.requestAnimationFrame((function i(o){var r=o-t;t=o,T&&I.update(r),I.draw(),e++,o-n>=250&&(D.textContent="FPS: "+(1e3*e/(o-n)).toFixed(1),e=0,n=o),window.requestAnimationFrame(i)}))}function j(){(T=!T)?(C.textContent="Pause",A.disabled=!0):(C.textContent="Play",A.disabled=!1)}function V(){I.update(1e3/60)}function q(){var t;T&&this.playPause();var n=M.value,e=O.value,i=null!==(t=parseInt(S.value))&&void 0!==t?t:0;I.init(P.getConfiguration(n,e,R.width,R.height,i))}}},n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{}};return t[i](o,o.exports,e),o.exports}return e.d=(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(546)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZlY3RvcjJmLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL0FnZW50LnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL0NvbG91ci50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9hZ2VudHMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9hZ2VudHMvU3RvcEFnZW50LnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL0dlb21ldHJ5LnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZlbG9jaXR5T2JzdGFjbGUudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvYWdlbnRzL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvYWdlbnRzL1JWT0FnZW50LnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL2FnZW50cy9IUlZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRGYWN0b3J5LnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL0NvbmZpZ3VyYXRpb25GYWN0b3J5LnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL2RlbW8yZC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuIiwiZ2V0QWxsIiwiZHJhdyIsImNsZWFyIiwiZHJhd0FnZW50cyIsImNhbnZhcyIsImNhbWVyYURpc3QiLCJtb3VzZURvd24iLCJldmVudCIsImRyYWciLCJvbGRYIiwicGFnZVgiLCJvbGRZIiwicGFnZVkiLCJtb3VzZVVwIiwicHJldmVudERlZmF1bHQiLCJtb3VzZU1vdmUiLCJ4UGFuIiwieVBhbiIsIm1vdXNlU2Nyb2xsIiwiZGVsdGFZIiwiY29uc29sZSIsImxvZyIsImNvbnRleHQiLCJnZXRDb250ZXh0Iiwid2lkdGgiLCJoZWlnaHQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0VHJhbnNmb3JtIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJzY2FsZUZhY3RvciIsInRyYW5zbGF0ZSIsInNjYWxlIiwiZHJhd0FnZW50IiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsImRpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsImNvbG91ciIsImdldENvbG91ciIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwiciIsImciLCJiIiwibGluZVdpZHRoIiwiYXJjIiwieCIsInkiLCJSYWRpdXMiLCJNYXRoIiwiUEkiLCJtYWduaXR1ZGUiLCJtb3ZlVG8iLCJuZXdQb3MiLCJhZGQiLCJkaXZpZGUiLCJtdWx0aXBseSIsImxpbmVUbyIsInN0cm9rZSIsIl9yb290IiwiY29uc3RydWN0VHJlZSIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJyYW5nZSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJyYW5nZVNlYXJjaCIsImZpbHRlciIsIm90aGVyIiwiSWQiLCJzdWJ0cmFjdCIsIm1hZ25pdHVkZVNxcmQiLCJmdW4iLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImEiLCJsZWZ0Iiwic2xpY2UiLCJyaWdodCIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJwdXNoIiwiY29weSIsInYiLCJWZWN0b3IyZiIsInMiLCJkb3QiLCJzcXJ0Iiwibm9ybWFsaXNlIiwibSIsInNhbXBsZSIsIm1heFJhZGl1cyIsInJhZGl1cyIsInJhbmRvbSIsImFuZ2xlIiwiY29zIiwic2luIiwiaWQiLCJzdGFydFBvc2l0aW9uIiwiZ2V0UHJlZmVycmVkVmVsb2NpdHkiLCJfcG9zaXRpb24iLCJfZGlyZWN0aW9uIiwiX2dldFByZWZlcnJlZFZlbG9jaXR5IiwiX2lzRG9uZSIsImlzRG9uZSIsIkZyb21Ic3YiLCJoIiwiZnJhY3QiLCJQIiwiUSIsIlQiLCJXaGl0ZSIsIlJlZCIsIkdyZWVuIiwiQ29sb3VyIiwiX25laWdoYm91cnMiLCJwcmVmZXJyZWRWZWxvY2l0eSIsInN0ZXBTaXplIiwiQWdlbnQiLCJfaXNTdHVjayIsIm5laWdoYm91cnMiLCJoZWFkaW5nIiwiaSIsImNvbGxpZGVzIiwiZ2V0Q2xvc2VzdFBvaW50T25MaW5lIiwibGluZVBvaW50IiwibGluZURpcmVjdGlvbiIsInBvaW50IiwiZGlzdGFuY2UiLCJnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbiIsImNlbnRyZSIsIm9yaWdpbiIsImRlbHRhIiwiYyIsImRpc2NyaW0iLCJJbmZpbml0eSIsImdldExpbmVMaW5lSW50ZXJzZWN0aW9uIiwicG9pbnQxIiwiZGlyZWN0aW9uMSIsInBvaW50MiIsImRpcmVjdGlvbjIiLCJkaWZmIiwiZGV0IiwidCIsInZlcnRleCIsInRhbmdlbnQxIiwidGFuZ2VudDIiLCJjb250YWlucyIsInZlbG9jaXR5IiwiZGV0ZXJtaW5hbnQxIiwiZGV0ZXJtaW5hbnQyIiwiX2NvbG91ciIsImNvbGxpc2lvbiIsInNhZmUiLCJ2ZWxvY2l0eU9ic3RhY2xlIiwiZ2V0VmVsb2NpdHlPYnN0YWNsZSIsIkdlb21ldHJ5IiwibGVmdFNhZmUiLCJyaWdodFNhZmUiLCJzZXRDb2xvdXIiLCJtaW5QZW5hbHR5IiwiYmVzdFZlbG9jaXR5IiwibWluVGltZVRvQ29sbGlzaW9uIiwiaiIsInRpbWVUb0NvbGxpc2lvbiIsInBlbmFsdHkiLCJ2ZWxvY2l0eUIiLCJkaXN0IiwidGhldGEiLCJhY29zIiwicGhpIiwiYXRhbjIiLCJhbmdsZTEiLCJhbmdsZTIiLCJWZWxvY2l0eU9ic3RhY2xlIiwic3RyZXNzIiwiaHVlIiwidmVsb2NpdHlBIiwiVk9BZ2VudCIsInZvVmVydGV4IiwicnZvVmVydGV4IiwicG9zaXRpb25CIiwiZ2V0QWdlbnQiLCJ0eXBlIiwiQmFzaWNBZ2VudCIsIlN0b3BBZ2VudCIsIlJWT0FnZW50IiwiSFJWT0FnZW50IiwiRXJyb3IiLCJnZXRDb25maWd1cmF0aW9uIiwiYWdlbnRUeXBlIiwibnVtYmVyT2ZBZ2VudHMiLCJSYW5kb21Ub1JhbmRvbSIsIlJhbmRvbVRvTGluZSIsIkNpcmNsZVRvQ2lyY2xlIiwiR3JpZFRvR3JpZCIsInN0YXJ0UG9zaXRpb25zIiwicG9pc3NvbkRpc2tTYW1wbGUiLCJtYXAiLCJnb2FsUG9zaXRpb25zIiwiQWdlbnRGYWN0b3J5IiwicHJlZmVycmVkVmVsb2NpdHlGcm9tR29hbFBvc2l0aW9uIiwiX3dpZHRoIiwiX2hlaWdodCIsImdyaWRTaXplIiwiY2VpbCIsIm9mZnNldCIsImlkeCIsInJvdyIsImNvbCIsImdvYWxQb3NpdGlvbiIsInBvcyIsImdvYWxEaXJlY3Rpb24iLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJuIiwidGhyZXNob2xkIiwic2FtcGxlcyIsInJlc2FtcGxlIiwiY29uZmlnU2VsZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFnZW50VHlwZVNlbGVjdCIsIm51bWJlck9mQWdlbnRzSW5wdXQiLCJmcmFtZXJhdGUiLCJwbGF5QnV0dG9uIiwic3RlcEJ1dHRvbiIsInNpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwiUmVuZGVyZXIyRCIsIkFnZW50VHJlZSIsInBsYXkiLCJyZWNvbmZpZ3VyZSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsImNvbmZpZyIsInZhbHVlIiwicGFyc2VJbnQiLCJDb25maWd1cmF0aW9uRmFjdG9yeSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sIm1hcHBpbmdzIjoia0pBSUEsSSxFQUFBLGFBSUUsV0FBWUEsRUFBcUJDLEdBQy9CQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsUUFBVUgsRUF1Qm5CLE9BcEJFLFlBQUFJLEtBQUEsU0FBS0osR0FDSEMsS0FBS0UsUUFBUUMsS0FBS0osSUFHcEIsWUFBQUssT0FBQSxTQUFPQyxHQUFQLFdBRUVMLEtBQUtFLFFBQVFJLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1ILE9BQ0pDLEVBQ0EsRUFBS0gsUUFBUU0sOEJBQThCRCxFQUpuQyxTQVFaUCxLQUFLRSxRQUFRQyxLQUFLSCxLQUFLRSxRQUFR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R2pEQyxRQUFTLElBT1YsT0FIQUUsRUFBb0JILEdBQVVFLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9DRyxFQUFPRCxRQ2pCZixPQ0ZBRixFQUFvQkssRUFBSSxDQUFDSCxFQUFTSSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hOLEVBQW9CUSxFQUFFRixFQUFZQyxLQUFTUCxFQUFvQlEsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVAsRUFBb0JRLEVBQUksQ0FBQ0ssRUFBS0MsSUFBU0wsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDakZkLEVBQW9Cdk4sRUFBS3lOLElBQ0gsb0JBQVhnQixRQUEwQkEsT0FBT0MsYUFDMUNWLE9BQU9DLGVBQWVSLEVBQVNnQixPQUFPQyxZQUFhLENBQUV2QixNQUFPLFdBRTdEYSxPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRU4sT0FBTyxLSEZoREksRUFBb0IsTSIsImZpbGUiOiJkZW1vMmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9BZ2VudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gIF9yZW5kZXJlcjogSVJlbmRlcmVyO1xyXG4gIF9hZ2VudHM6IElBZ2VudENvbGxlY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIsIGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICB9XHJcblxyXG4gIGluaXQoYWdlbnRzOiBBZ2VudFtdKSB7XHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdChhZ2VudHMpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKSB7XHJcbiAgICBsZXQgcmFuZ2UgPSA0MDA7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgYWdlbnQudXBkYXRlKFxyXG4gICAgICAgIGRlbHRhVCxcclxuICAgICAgICB0aGlzLl9hZ2VudHMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4oYWdlbnQsIHJhbmdlKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fYWdlbnRzLmluaXQodGhpcy5fYWdlbnRzLmdldEFsbCgpKTtcclxuICB9XHJcblxyXG4gIGRyYXcoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlci5jbGVhcigpO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuZHJhd0FnZW50cyh0aGlzLl9hZ2VudHMpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL0FnZW50XCI7XHJcbmltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gXCIuL0lSZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyMkQgaW1wbGVtZW50cyBJUmVuZGVyZXIge1xyXG4gIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICBwcml2YXRlIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgLy8gQ2FtZXJhIGNvbnRyb2xzXHJcbiAgcHJpdmF0ZSBkcmFnOiBib29sZWFuO1xyXG4gIHByaXZhdGUgb2xkWDogbnVtYmVyO1xyXG4gIHByaXZhdGUgb2xkWTogbnVtYmVyO1xyXG4gIHByaXZhdGUgeFBhbjogbnVtYmVyO1xyXG4gIHByaXZhdGUgeVBhbjogbnVtYmVyO1xyXG4gIHByaXZhdGUgY2FtZXJhRGlzdCA9IDgwMDsgLy8gU3RhcnQgY2FtZXJhIDgwMCAncHgnIGF3YXlcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XHJcbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICB0aGlzLnhQYW4gPSB0aGlzLmNhbnZhcy53aWR0aCAvIDI7XHJcbiAgICB0aGlzLnlQYW4gPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyO1xyXG5cclxuICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5tb3VzZURvd24sIGZhbHNlKTtcclxuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMubW91c2VVcCwgZmFsc2UpO1xyXG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMubW91c2VVcCwgZmFsc2UpO1xyXG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlTW92ZSwgZmFsc2UpO1xyXG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRoaXMubW91c2VTY3JvbGwsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgLy8gQ2xlYXIgYmFja2dyb3VuZFxyXG4gICAgdGhpcy5jb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcclxuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBcInJnYigxMzUsIDE5NCwgMjUwKVwiO1xyXG4gICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLmNvbnRleHQuY2FudmFzLndpZHRoLFxyXG4gICAgICB0aGlzLmNvbnRleHQuY2FudmFzLmhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRyYXdBZ2VudHMoYWdlbnRzOiBJQWdlbnRDb2xsZWN0aW9uKSB7XHJcbiAgICBjb25zdCBzY2FsZUZhY3RvciA9IDgwMCAvIHRoaXMuY2FtZXJhRGlzdDtcclxuXHJcbiAgICAvLyBUT0RPOiByZXBsYWNlIHdpdGggc2luZ2xlIHNldFRyYW5zZm9ybVxyXG4gICAgdGhpcy5jb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcclxuICAgIHRoaXMuY29udGV4dC50cmFuc2xhdGUodGhpcy54UGFuLCB0aGlzLnlQYW4pO1xyXG4gICAgdGhpcy5jb250ZXh0LnNjYWxlKHNjYWxlRmFjdG9yLCBzY2FsZUZhY3Rvcik7XHJcblxyXG4gICAgLy8gRHJhdyBmbG9vclxyXG4gICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwicmdiKDUxLCA1MSwgNTEpXCI7XHJcbiAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoXHJcbiAgICAgIC10aGlzLmNvbnRleHQuY2FudmFzLndpZHRoICogMC41NSxcclxuICAgICAgLXRoaXMuY29udGV4dC5jYW52YXMuaGVpZ2h0ICogMC41NSxcclxuICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCAqIDEuMSxcclxuICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQgKiAxLjFcclxuICAgICk7XHJcblxyXG4gICAgLy8gRHJhdyBhZ2VudHNcclxuICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLmRyYXdBZ2VudChhZ2VudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZHJhd0FnZW50KGFnZW50OiBBZ2VudCk6IHZvaWQge1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSBhZ2VudC5nZXRQb3NpdGlvbigpO1xyXG4gICAgY29uc3QgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcbiAgICBjb25zdCBjb2xvdXIgPSBhZ2VudC5nZXRDb2xvdXIoKTtcclxuXHJcbiAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBgcmdiKCR7Y29sb3VyLnJ9LCAke2NvbG91ci5nfSwgJHtjb2xvdXIuYn0pYDtcclxuICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSAyO1xyXG5cclxuICAgIHRoaXMuY29udGV4dC5hcmMocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgYWdlbnQuUmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcblxyXG4gICAgbGV0IG1hZ25pdHVkZSA9IGRpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChtYWduaXR1ZGUgIT09IDApIHtcclxuICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvc2l0aW9uLmFkZChcclxuICAgICAgICBkaXJlY3Rpb24uZGl2aWRlKG1hZ25pdHVkZSkubXVsdGlwbHkoYWdlbnQuUmFkaXVzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmNvbnRleHQubGluZVRvKG5ld1Bvcy54LCBuZXdQb3MueSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jb250ZXh0LnN0cm9rZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBtb3VzZURvd24gPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgIHRoaXMuZHJhZyA9IHRydWU7XHJcbiAgICB0aGlzLm9sZFggPSBldmVudC5wYWdlWDtcclxuICAgIHRoaXMub2xkWSA9IGV2ZW50LnBhZ2VZO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgbW91c2VVcCA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgdGhpcy5kcmFnID0gZmFsc2U7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgbW91c2VNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuZHJhZykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHRoaXMueFBhbiArPSBldmVudC5wYWdlWCAtIHRoaXMub2xkWDtcclxuICAgIHRoaXMueVBhbiArPSBldmVudC5wYWdlWSAtIHRoaXMub2xkWTtcclxuXHJcbiAgICB0aGlzLm9sZFggPSBldmVudC5wYWdlWDtcclxuICAgIHRoaXMub2xkWSA9IGV2ZW50LnBhZ2VZO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgbW91c2VTY3JvbGwgPSAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcclxuICAgIHRoaXMuY2FtZXJhRGlzdCArPSBldmVudC5kZWx0YVk7XHJcbiAgICBpZiAodGhpcy5jYW1lcmFEaXN0IDwgMCkge1xyXG4gICAgICB0aGlzLmNhbWVyYURpc3QgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlNjcm9sbFwiKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vQWdlbnRcIjtcclxuXHJcbmludGVyZmFjZSBOb2RlIHtcclxuICBhZ2VudDogQWdlbnQ7XHJcbiAgbGVmdDogTm9kZTtcclxuICByaWdodDogTm9kZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFnZW50VHJlZSBpbXBsZW1lbnRzIElBZ2VudENvbGxlY3Rpb24ge1xyXG4gIHByaXZhdGUgX2FnZW50czogQWdlbnRbXTtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgdGhpcy5fYWdlbnRzID0gYWdlbnRzO1xyXG4gICAgdGhpcy5fcm9vdCA9IHRoaXMuY29uc3RydWN0VHJlZSh0aGlzLl9hZ2VudHMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsKCk6IEFnZW50W10ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FnZW50cztcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQ6IEFnZW50LCByYW5nZTogbnVtYmVyKTogQWdlbnRbXSB7XHJcbiAgICBsZXQgbWluWCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCAtIHJhbmdlO1xyXG4gICAgbGV0IG1pblkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgLSByYW5nZTtcclxuICAgIGxldCBtYXhYID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54ICsgcmFuZ2U7XHJcbiAgICBsZXQgbWF4WSA9IGFnZW50LmdldFBvc2l0aW9uKCkueSArIHJhbmdlO1xyXG5cclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5yYW5nZVNlYXJjaCh0aGlzLl9yb290LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCB0cnVlKTtcclxuICAgIHJldHVybiBjYW5kaWRhdGVzLmZpbHRlcigob3RoZXIpID0+IG90aGVyLklkICE9PSBhZ2VudC5JZCk7XHJcbiAgfVxyXG5cclxuICBnZXROZWlnaGJvdXJzSW5SYW5nZUV1Y2xpZGVhbihhZ2VudDogQWdlbnQsIHJhbmdlOiBudW1iZXIpOiBBZ2VudFtdIHtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoXHJcbiAgICAgIChvdGhlcikgPT5cclxuICAgICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KG90aGVyLmdldFBvc2l0aW9uKCkpLm1hZ25pdHVkZVNxcmQoKSA8PVxyXG4gICAgICAgIHJhbmdlICoqIDJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGZ1bjogKGFnZW50OiBBZ2VudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goZnVuKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0VHJlZShhZ2VudHM6IEFnZW50W10sIHhBeGlzOiBib29sZWFuKTogTm9kZSB7XHJcbiAgICBpZiAoYWdlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbWlkID0gTWF0aC5mbG9vcihhZ2VudHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgbGV0IHNvcnRlZCA9IHhBeGlzXHJcbiAgICAgID8gYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS54IC0gYi5nZXRQb3NpdGlvbigpLngpXHJcbiAgICAgIDogYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS55IC0gYi5nZXRQb3NpdGlvbigpLnkpO1xyXG5cclxuICAgIGxldCBsZWZ0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKHNvcnRlZC5zbGljZSgwLCBtaWQpLCAheEF4aXMpO1xyXG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKFxyXG4gICAgICBzb3J0ZWQuc2xpY2UobWlkICsgMSwgYWdlbnRzLmxlbmd0aCksXHJcbiAgICAgICF4QXhpc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4geyBhZ2VudDogYWdlbnRzW21pZF0sIGxlZnQ6IGxlZnQsIHJpZ2h0OiByaWdodCB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByYW5nZVNlYXJjaChcclxuICAgIHJvb3Q6IE5vZGUsXHJcbiAgICBtaW5YOiBudW1iZXIsXHJcbiAgICBtaW5ZOiBudW1iZXIsXHJcbiAgICBtYXhYOiBudW1iZXIsXHJcbiAgICBtYXhZOiBudW1iZXIsXHJcbiAgICB4QXhpczogYm9vbGVhblxyXG4gICk6IEFnZW50W10ge1xyXG4gICAgaWYgKHJvb3QgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlczogQWdlbnRbXSA9IFtdO1xyXG4gICAgaWYgKHhBeGlzKSB7XHJcbiAgICAgIC8vIElmIHggPD0gbWF4WCBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeCA+PSBtaW5YIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgeSA8PSBtYXhZIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB5ID49IG1pblkgbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIGFnZW50IGlzIGluIHJhbmdlIHJhbmdlIGFkZCB0byB0aGUgcmVzdWx0XHJcbiAgICBpZiAoXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFlcclxuICAgICkge1xyXG4gICAgICByZXMucHVzaChyb290LmFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVmVjdG9yMmYge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICB9XHJcblxyXG4gIGNvcHkodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHYueCwgdi55KTtcclxuICB9XHJcblxyXG4gIGFkZCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54ICsgdi54LCB0aGlzLnkgKyB2LnkpO1xyXG4gIH1cclxuXHJcbiAgc3VidHJhY3QodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuICB9XHJcblxyXG4gIG11bHRpcGx5KHM6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54ICogcywgdGhpcy55ICogcyk7XHJcbiAgfVxyXG5cclxuICBkaXZpZGUoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggLyBzLCB0aGlzLnkgLyBzKTtcclxuICB9XHJcblxyXG4gIGRvdCh2OiBWZWN0b3IyZikge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICB9XHJcblxyXG4gIG1hZ25pdHVkZVNxcmQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnggKiogMiArIHRoaXMueSAqKiAyO1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubWFnbml0dWRlU3FyZCgpKTtcclxuICB9XHJcblxyXG4gIG5vcm1hbGlzZSgpOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgbSA9IHRoaXMubWFnbml0dWRlKCk7XHJcbiAgICByZXR1cm4gbSA9PSAwID8gbmV3IFZlY3RvcjJmKDAsIDApIDogdGhpcy5kaXZpZGUobSk7XHJcbiAgfVxyXG5cclxuICBzYW1wbGUobWF4UmFkaXVzOiBudW1iZXIpIHtcclxuICAgIC8vIFVuaWZvcm1seSBzYW1wbGUgdGhlIGNpcmNsZSBjZW50cmVkIGF0IHRoaXMgcG9pbnQgd2l0aCByYWRpdXMgbWF4UmFkaXVzXHJcbiAgICBsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KE1hdGgucmFuZG9tKCkpICogbWF4UmFkaXVzO1xyXG4gICAgbGV0IGFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZihcclxuICAgICAgdGhpcy54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICB0aGlzLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSlcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbG91ciB9IGZyb20gXCIuL0NvbG91clwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWdlbnQge1xyXG4gIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG4gIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcblxyXG4gIHByb3RlY3RlZCBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByb3RlY3RlZCBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuICBwcm90ZWN0ZWQgX2dldFByZWZlcnJlZFZlbG9jaXR5OiAocG9zaXRpb246IFZlY3RvcjJmKSA9PiBWZWN0b3IyZjtcclxuICBwcm90ZWN0ZWQgX2lzRG9uZTogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnZXRQcmVmZXJyZWRWZWxvY2l0eTogKHBvc2l0aW9uOiBWZWN0b3IyZikgPT4gVmVjdG9yMmZcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuUmFkaXVzID0gMjA7XHJcblxyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5fZ2V0UHJlZmVycmVkVmVsb2NpdHkgPSBnZXRQcmVmZXJyZWRWZWxvY2l0eTtcclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBpc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgYWJzdHJhY3QgZ2V0Q29sb3VyKCk6IENvbG91cjtcclxuICBhYnN0cmFjdCB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIG5laWdoYm91cnM6IEFnZW50W10pOiB2b2lkO1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDb2xvdXIge1xyXG4gIHI6IG51bWJlcjtcclxuICBnOiBudW1iZXI7XHJcbiAgYjogbnVtYmVyO1xyXG5cclxuICBzdGF0aWMgV2hpdGU6IENvbG91ciA9IHtcclxuICAgIHI6IDI1NSxcclxuICAgIGc6IDI1NSxcclxuICAgIGI6IDI1NSxcclxuICB9O1xyXG5cclxuICBzdGF0aWMgUmVkOiBDb2xvdXIgPSB7XHJcbiAgICByOiAyNTUsXHJcbiAgICBnOiAwLFxyXG4gICAgYjogMCxcclxuICB9O1xyXG5cclxuICBzdGF0aWMgR3JlZW46IENvbG91ciA9IHtcclxuICAgIHI6IDAsXHJcbiAgICBnOiAyNTUsXHJcbiAgICBiOiAwLFxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyBGcm9tSHN2KGg6IG51bWJlciwgczogbnVtYmVyLCB2OiBudW1iZXIpOiBDb2xvdXIge1xyXG4gICAgLy8gYXNzdW1pbmcgaHN2IHZhbHVlcyBpbiByYW5nZSAwLTFcclxuICAgIGggKj0gNjtcclxuXHJcbiAgICBjb25zdCBmcmFjdCA9IGggLSBNYXRoLmZsb29yKGgpO1xyXG4gICAgY29uc3QgUCA9IHYgKiAoMSAtIHMpO1xyXG4gICAgY29uc3QgUSA9IHYgKiAoMSAtIHMgKiBmcmFjdCk7XHJcbiAgICBjb25zdCBUID0gdiAqICgxIC0gcyAqICgxIC0gZnJhY3QpKTtcclxuXHJcbiAgICBpZiAoMCA8PSBoICYmIGggPCAxKSB7XHJcbiAgICAgIHJldHVybiB7IHI6IHYgKiAyNTUsIGc6IFQgKiAyNTUsIGI6IFAgKiAyNTUgfTtcclxuICAgIH0gZWxzZSBpZiAoMSA8PSBoICYmIGggPCAyKSB7XHJcbiAgICAgIHJldHVybiB7IHI6IFEgKiAyNTUsIGc6IHYgKiAyNTUsIGI6IFAgKiAyNTUgfTtcclxuICAgIH0gZWxzZSBpZiAoMiA8PSBoICYmIGggPCAzKSB7XHJcbiAgICAgIHJldHVybiB7IHI6IFAgKiAyNTUsIGc6IHYgKiAyNTUsIGI6IFQgKiAyNTUgfTtcclxuICAgIH0gZWxzZSBpZiAoMyA8PSBoICYmIGggPCA0KSB7XHJcbiAgICAgIHJldHVybiB7IHI6IFAgKiAyNTUsIGc6IFEgKiAyNTUsIGI6IHYgKiAyNTUgfTtcclxuICAgIH0gZWxzZSBpZiAoNCA8PSBoICYmIGggPCA1KSB7XHJcbiAgICAgIHJldHVybiB7IHI6IFQgKiAyNTUsIGc6IFAgKiAyNTUsIGI6IHYgKiAyNTUgfTtcclxuICAgIH0gZWxzZSBpZiAoNSA8PSBoICYmIGggPCA2KSB7XHJcbiAgICAgIHJldHVybiB7IHI6IHYgKiAyNTUsIGc6IFAgKiAyNTUsIGI6IFEgKiAyNTUgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IHI6IDAsIGc6IDAsIGI6IDAgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi4vQWdlbnRcIjtcclxuaW1wb3J0IHsgQ29sb3VyIH0gZnJvbSBcIi4uL0NvbG91clwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2ljQWdlbnQgZXh0ZW5kcyBBZ2VudCB7XHJcbiAgZ2V0Q29sb3VyKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm4gQ29sb3VyLldoaXRlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIENvbG91ci5HcmVlbjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgX25laWdoYm91cnM6IEFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByZWZlcnJlZFZlbG9jaXR5ID0gdGhpcy5fZ2V0UHJlZmVycmVkVmVsb2NpdHkodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgY29uc3Qgc3RlcFNpemUgPSAoZGVsdGFUICogNjApIC8gNDAwMDtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBkb25lXHJcbiAgICBpZiAocHJlZmVycmVkVmVsb2NpdHkubWFnbml0dWRlU3FyZCgpIDwgMC4xKSB7XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGVwIHRvd2FyZHMgZ29hbFxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gcHJlZmVycmVkVmVsb2NpdHk7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChwcmVmZXJyZWRWZWxvY2l0eS5tdWx0aXBseShzdGVwU2l6ZSkpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuLi9BZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuLi9WZWN0b3IyZlwiO1xyXG5pbXBvcnQgeyBDb2xvdXIgfSBmcm9tIFwiLi4vQ29sb3VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcEFnZW50IGV4dGVuZHMgQWdlbnQge1xyXG4gIHByaXZhdGUgX2lzU3R1Y2s6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ2V0UHJlZmVycmVkVmVsb2NpdHk6IChwb3NpdGlvbjogVmVjdG9yMmYpID0+IFZlY3RvcjJmXHJcbiAgKSB7XHJcbiAgICBzdXBlcihpZCwgc3RhcnRQb3NpdGlvbiwgZ2V0UHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29sb3VyKCk6IENvbG91ciB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybiBDb2xvdXIuV2hpdGU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2lzU3R1Y2spIHtcclxuICAgICAgcmV0dXJuIENvbG91ci5SZWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gQ29sb3VyLkdyZWVuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBuZWlnaGJvdXJzOiBBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmVmZXJyZWRWZWxvY2l0eSA9IHRoaXMuX2dldFByZWZlcnJlZFZlbG9jaXR5KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGNvbnN0IHN0ZXBTaXplID0gKGRlbHRhVCAqIDYwKSAvIDQwMDA7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgZG9uZVxyXG4gICAgaWYgKHByZWZlcnJlZFZlbG9jaXR5Lm1hZ25pdHVkZVNxcmQoKSA8IDAuMSkge1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gcHJlZmVycmVkVmVsb2NpdHkubm9ybWFsaXNlKCk7XHJcbiAgICBjb25zdCBoZWFkaW5nID0gdGhpcy5fcG9zaXRpb24uYWRkKHRoaXMuX2RpcmVjdGlvbi5tdWx0aXBseSgyNSkpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHN0dWNrXHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMuY29sbGlkZXMobmVpZ2hib3Vyc1tpXSwgaGVhZGluZykpIHtcclxuICAgICAgICB0aGlzLl9pc1N0dWNrID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGVwIHRvd2FyZHMgZ29hbFxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gcHJlZmVycmVkVmVsb2NpdHk7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZCh0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoc3RlcFNpemUpKTtcclxuICB9XHJcblxyXG4gIGNvbGxpZGVzKGFnZW50OiBBZ2VudCwgcG9zaXRpb246IFZlY3RvcjJmKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHBvc2l0aW9uKS5tYWduaXR1ZGVTcXJkKCkgPFxyXG4gICAgICAoYWdlbnQuUmFkaXVzICsgdGhpcy5SYWRpdXMpICogKGFnZW50LlJhZGl1cyArIHRoaXMuUmFkaXVzKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb21ldHJ5IHtcclxuICBzdGF0aWMgZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgbGluZVBvaW50OiBWZWN0b3IyZixcclxuICAgIGxpbmVEaXJlY3Rpb246IFZlY3RvcjJmLFxyXG4gICAgcG9pbnQ6IFZlY3RvcjJmXHJcbiAgKTogVmVjdG9yMmYge1xyXG4gICAgY29uc3QgZGlyZWN0aW9uID0gbGluZURpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgIGNvbnN0IHZlY3RvciA9IHBvaW50LnN1YnRyYWN0KGxpbmVQb2ludCk7XHJcbiAgICBjb25zdCBkaXN0YW5jZSA9IHZlY3Rvci5kb3QoZGlyZWN0aW9uKTtcclxuXHJcbiAgICByZXR1cm4gbGluZVBvaW50LmFkZChkaXJlY3Rpb24ubXVsdGlwbHkoZGlzdGFuY2UpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgIGNlbnRyZTogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlcixcclxuICAgIG9yaWdpbjogVmVjdG9yMmYsXHJcbiAgICBkaXJlY3Rpb246IFZlY3RvcjJmXHJcbiAgKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGRlbHRhID0gb3JpZ2luLnN1YnRyYWN0KGNlbnRyZSk7XHJcblxyXG4gICAgY29uc3QgYSA9IGRpcmVjdGlvbi5kb3QoZGlyZWN0aW9uKTtcclxuICAgIGNvbnN0IGIgPSAyICogZGlyZWN0aW9uLmRvdChkZWx0YSk7XHJcbiAgICBjb25zdCBjID0gZGVsdGEuZG90KGRlbHRhKSAtIHJhZGl1cyAqKiAyO1xyXG5cclxuICAgIGNvbnN0IGRpc2NyaW0gPSBiICoqIDIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgaWYgKGRpc2NyaW0gPCAwKSB7XHJcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGlzdGFuY2UgPSAoKC1iIC0gTWF0aC5zcXJ0KGRpc2NyaW0pKSAvIDIpICogYTtcclxuXHJcbiAgICBpZiAoZGlzdGFuY2UgPCAwKSB7XHJcbiAgICAgIC8vIEludGVyc2VjdGlvbiBiZWhpbmRcclxuICAgICAgcmV0dXJuIEluZmluaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkaXN0YW5jZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRMaW5lTGluZUludGVyc2VjdGlvbihcclxuICAgIHBvaW50MTogVmVjdG9yMmYsXHJcbiAgICBkaXJlY3Rpb24xOiBWZWN0b3IyZixcclxuICAgIHBvaW50MjogVmVjdG9yMmYsXHJcbiAgICBkaXJlY3Rpb24yOiBWZWN0b3IyZlxyXG4gICk6IFZlY3RvcjJmIHtcclxuICAgIGNvbnN0IGRpZmYgPSBwb2ludDIuc3VidHJhY3QocG9pbnQxKTtcclxuICAgIGNvbnN0IGRldCA9IGRpcmVjdGlvbjIueCAqIGRpcmVjdGlvbjEueSAtIGRpcmVjdGlvbjIueSAqIGRpcmVjdGlvbjEueDtcclxuICAgIGNvbnN0IHQgPSAoZGlmZi55ICogZGlyZWN0aW9uMi54IC0gZGlmZi55ICogZGlyZWN0aW9uMi55KSAvIGRldDtcclxuXHJcbiAgICByZXR1cm4gcG9pbnQxLmFkZChkaXJlY3Rpb24xLm11bHRpcGx5KHQpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlbG9jaXR5T2JzdGFjbGUge1xyXG4gIHZlcnRleDogVmVjdG9yMmY7XHJcbiAgdGFuZ2VudDE6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQyOiBWZWN0b3IyZjtcclxuXHJcbiAgY29uc3RydWN0b3IodmVydGV4OiBWZWN0b3IyZiwgdGFuZ2VudDE6IFZlY3RvcjJmLCB0YW5nZW50MjogVmVjdG9yMmYpIHtcclxuICAgIHRoaXMudmVydGV4ID0gdmVydGV4O1xyXG4gICAgdGhpcy50YW5nZW50MSA9IHRhbmdlbnQxO1xyXG4gICAgdGhpcy50YW5nZW50MiA9IHRhbmdlbnQyO1xyXG4gIH1cclxuXHJcbiAgY29udGFpbnModmVsb2NpdHk6IFZlY3RvcjJmKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGaXJzdCBoYWxmLXBsYW5lXHJcbiAgICBjb25zdCBkZXRlcm1pbmFudDEgPVxyXG4gICAgICAodGhpcy50YW5nZW50MS54IC0gdGhpcy52ZXJ0ZXgueCkgKiAodmVsb2NpdHkueSAtIHRoaXMudmVydGV4LnkpIC1cclxuICAgICAgKHRoaXMudGFuZ2VudDEueSAtIHRoaXMudmVydGV4LnkpICogKHZlbG9jaXR5LnggLSB0aGlzLnZlcnRleC54KTtcclxuXHJcbiAgICAvLyBTZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgY29uc3QgZGV0ZXJtaW5hbnQyID1cclxuICAgICAgKHRoaXMudGFuZ2VudDIueCAtIHRoaXMudmVydGV4LngpICogKHZlbG9jaXR5LnkgLSB0aGlzLnZlcnRleC55KSAtXHJcbiAgICAgICh0aGlzLnRhbmdlbnQyLnkgLSB0aGlzLnZlcnRleC55KSAqICh2ZWxvY2l0eS54IC0gdGhpcy52ZXJ0ZXgueCk7XHJcblxyXG4gICAgcmV0dXJuIGRldGVybWluYW50MSA+IDAgJiYgZGV0ZXJtaW5hbnQyIDwgMDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi4vQWdlbnRcIjtcclxuaW1wb3J0IHsgQ29sb3VyIH0gZnJvbSBcIi4uL0NvbG91clwiO1xyXG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9HZW9tZXRyeVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuLi9WZWN0b3IyZlwiO1xyXG5pbXBvcnQgeyBWZWxvY2l0eU9ic3RhY2xlIH0gZnJvbSBcIi4uL1ZlbG9jaXR5T2JzdGFjbGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWT0FnZW50IGV4dGVuZHMgQWdlbnQge1xyXG4gIHByaXZhdGUgX2NvbG91cjogQ29sb3VyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdldFByZWZlcnJlZFZlbG9jaXR5OiAocG9zaXRpb246IFZlY3RvcjJmKSA9PiBWZWN0b3IyZlxyXG4gICkge1xyXG4gICAgc3VwZXIoaWQsIHN0YXJ0UG9zaXRpb24sIGdldFByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgIHRoaXMuX2NvbG91ciA9IENvbG91ci5HcmVlbjtcclxuICB9XHJcblxyXG4gIGdldENvbG91cigpOiBDb2xvdXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbG91cjtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgbmVpZ2hib3VyczogQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJlZmVycmVkVmVsb2NpdHkgPSB0aGlzLl9nZXRQcmVmZXJyZWRWZWxvY2l0eSh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBjb25zdCBzdGVwU2l6ZSA9IChkZWx0YVQgKiA2MCkgLyA0MDAwO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIGRvbmVcclxuICAgIGlmIChwcmVmZXJyZWRWZWxvY2l0eS5tYWduaXR1ZGVTcXJkKCkgPCAwLjEpIHtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgICB0aGlzLl9jb2xvdXIgPSBDb2xvdXIuV2hpdGU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2FmZSA9IHRydWU7XHJcbiAgICBsZXQgY29sbGlzaW9uO1xyXG4gICAgbGV0IGFnZW50O1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyBDaGVjayB3aGV0aGVyIHByZWZlcnJlZCB2ZWxvY2l0eSBpcyBzYWZlXHJcbiAgICAgIGNvbnN0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlLmNvbnRhaW5zKHByZWZlcnJlZFZlbG9jaXR5KVxyXG4gICAgICApIHtcclxuICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgY29sbGlzaW9uID0gdmVsb2NpdHlPYnN0YWNsZTtcclxuICAgICAgICBhZ2VudCA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcmVmZXJyZWQgdmVsb2NpdHkgaXMgc2FmZSwgZ28gaW4gdGhhdCBkaXJlY3Rpb25cclxuICAgIGlmIChzYWZlKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IHByZWZlcnJlZFZlbG9jaXR5O1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZCh0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoc3RlcFNpemUpKTtcclxuICAgICAgdGhpcy5fY29sb3VyID0gQ29sb3VyLkdyZWVuO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgbm90LCB0cnkgY2xvc2VzdCBwb2ludCBvbiBsZWZ0IGFuZCByaWdodCBlZGdlIG9mIGNvbmVcclxuICAgIGlmIChjb2xsaXNpb24gIT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBsZWZ0ID0gR2VvbWV0cnkuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQxLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCByaWdodCA9IEdlb21ldHJ5LmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MixcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgbGV0IGxlZnRTYWZlID0gdHJ1ZTtcclxuICAgICAgbGV0IHJpZ2h0U2FmZSA9IHRydWU7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgY29uc3QgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgICAgIGlmICh2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiYgdmVsb2NpdHlPYnN0YWNsZS5jb250YWlucyhsZWZ0KSkge1xyXG4gICAgICAgICAgICBsZWZ0U2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJiB2ZWxvY2l0eU9ic3RhY2xlLmNvbnRhaW5zKGxlZnQpKSB7XHJcbiAgICAgICAgICAgIHJpZ2h0U2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGxlZnRTYWZlICYmIHJpZ2h0U2FmZSkge1xyXG4gICAgICAgIC8vIElmIGJvdGggYXJlIHNhZmUgdGFrZSBjbG9zZXN0IHRvIHByZWZlcnJlZCB2ZWxvY2l0eVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGxlZnQuc3VidHJhY3QocHJlZmVycmVkVmVsb2NpdHkpLm1hZ25pdHVkZVNxcmQoKSA8XHJcbiAgICAgICAgICByaWdodC5zdWJ0cmFjdChwcmVmZXJyZWRWZWxvY2l0eSkubWFnbml0dWRlU3FyZCgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBsZWZ0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSByaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAobGVmdFNhZmUpIHtcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBsZWZ0O1xyXG4gICAgICB9IGVsc2UgaWYgKHJpZ2h0U2FmZSkge1xyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IHJpZ2h0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobGVmdFNhZmUgfHwgcmlnaHRTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fZGlyZWN0aW9uLm11bHRpcGx5KHN0ZXBTaXplKSk7XHJcbiAgICAgICAgdGhpcy5zZXRDb2xvdXIocHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVsc2UsIHNhbXBsZSByYW5kb20gdmVsb2NpdGllcyBhbmQgc2VsZWN0IHRoZSBvbmUgd2l0aCB0aGUgbGVhc3QgcGVuYWx0eVxyXG4gICAgY29uc3Qgc2FtcGxlcyA9IDEwMDsgLy8gbnVtYmVyIG9mIHZlbG9jaXRpZXMgdG8gdHJ5XHJcbiAgICBjb25zdCB3ID0gMTAwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGxldCBtaW5QZW5hbHR5ID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFZlbG9jaXR5ID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XHJcbiAgICAgIC8vIFNhbXBsZSB2ZWxvY2l0eSBmcm9tIGVudGlyZSBhbGxvd2VkIHZlbG9jaXR5IHNwYWNlXHJcbiAgICAgIGNvbnN0IHNhbXBsZSA9IG5ldyBWZWN0b3IyZigwLCAwKS5zYW1wbGUoMSk7XHJcbiAgICAgIGxldCBtaW5UaW1lVG9Db2xsaXNpb24gPSBJbmZpbml0eTtcclxuXHJcbiAgICAgIC8vIEZpbmQgdGltZSB0byBmaXJzdCBjb2xsaXNpb25cclxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZWlnaGJvdXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgY29uc3QgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgY29uc3QgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShiKTtcclxuXHJcbiAgICAgICAgaWYgKHZlbG9jaXR5T2JzdGFjbGUgPT0gbnVsbCB8fCB2ZWxvY2l0eU9ic3RhY2xlLmNvbnRhaW5zKHNhbXBsZSkpIHtcclxuICAgICAgICAgIGNvbnN0IHRpbWVUb0NvbGxpc2lvbiA9IEdlb21ldHJ5LmdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgICAgICBiLmdldFBvc2l0aW9uKCkuYWRkKGIuZ2V0RGlyZWN0aW9uKCkpLFxyXG4gICAgICAgICAgICB0aGlzLlJhZGl1cyArIGIuUmFkaXVzLFxyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbixcclxuICAgICAgICAgICAgc2FtcGxlLnN1YnRyYWN0KGIuZ2V0RGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGlmICh0aW1lVG9Db2xsaXNpb24gPCBtaW5UaW1lVG9Db2xsaXNpb24pIHtcclxuICAgICAgICAgICAgbWluVGltZVRvQ29sbGlzaW9uID0gdGltZVRvQ29sbGlzaW9uO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHlcclxuICAgICAgY29uc3QgcGVuYWx0eSA9XHJcbiAgICAgICAgdyAvIG1pblRpbWVUb0NvbGxpc2lvbiArIHByZWZlcnJlZFZlbG9jaXR5LnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlKCk7IC8vIFRTIGNvcnJlY3RseSBoYW5kbGVzIGRpdmlkZSBieSB6ZXJvIG9yIGluZmluaXR5XHJcblxyXG4gICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICBiZXN0VmVsb2NpdHkgPSBzYW1wbGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBiZXN0VmVsb2NpdHk7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZCh0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoc3RlcFNpemUpKTtcclxuICAgIHRoaXMuc2V0Q29sb3VyKHByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRWZWxvY2l0eU9ic3RhY2xlKGI6IEFnZW50KTogVmVsb2NpdHlPYnN0YWNsZSB8IG51bGwge1xyXG4gICAgY29uc3QgdmVsb2NpdHlCID0gYi5nZXREaXJlY3Rpb24oKTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGUgb3JpZ2luIHRvIHRoaXMgYWdlbnQncyBwb3NpdGlvblxyXG4gICAgY29uc3QgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBjb25zdCBjZW50cmUgPSBwb3NpdGlvbkIuYWRkKHZlbG9jaXR5Qik7XHJcbiAgICBjb25zdCByYWRpdXMgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGNvbnN0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGNvbnN0IGRpc3QgPSBkaWZmLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKGRpc3QgPCByYWRpdXMpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGhldGEgPSBNYXRoLmFjb3MocmFkaXVzIC8gZGlzdCk7XHJcbiAgICBjb25zdCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBjb25zdCBhbmdsZTEgPSBwaGkgKyB0aGV0YTtcclxuICAgIGNvbnN0IHRhbmdlbnQxID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMSksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUxKVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGNvbnN0IHRhbmdlbnQyID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMiksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUyKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdmVsb2NpdHkgb2JzdGFjbGVcclxuICAgIHJldHVybiBuZXcgVmVsb2NpdHlPYnN0YWNsZSh2ZWxvY2l0eUIsIHRhbmdlbnQxLCB0YW5nZW50Mik7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgc2V0Q29sb3VyKHByZWZlcnJlZFZlbG9jaXR5OiBWZWN0b3IyZikge1xyXG4gICAgY29uc3Qgc3RyZXNzID0gcHJlZmVycmVkVmVsb2NpdHkuc3VidHJhY3QodGhpcy5fZGlyZWN0aW9uKS5tYWduaXR1ZGUoKTtcclxuICAgIGNvbnN0IGh1ZSA9IHN0cmVzcyA+IDEgPyAwIDogKDEgLSBzdHJlc3MpIC8gMztcclxuICAgIHRoaXMuX2NvbG91ciA9IENvbG91ci5Gcm9tSHN2KGh1ZSwgMSwgMSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4uL0FnZW50XCI7XHJcbmltcG9ydCB7IFZPQWdlbnQgfSBmcm9tIFwiLi9WT0FnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4uL1ZlY3RvcjJmXCI7XHJcbmltcG9ydCB7IFZlbG9jaXR5T2JzdGFjbGUgfSBmcm9tIFwiLi4vVmVsb2NpdHlPYnN0YWNsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJWT0FnZW50IGV4dGVuZHMgVk9BZ2VudCB7XHJcbiAgLy8gT3ZlcnJpZGUgZ2V0VmVsb2NpdHlPYnN0YWNsZSB0byBwcm9kdWNlIFJlY2lwcm9jYWwgVmVsb2NpdHkgT2JzdGFjbGVcclxuICBwcm90ZWN0ZWQgZ2V0VmVsb2NpdHlPYnN0YWNsZShiOiBBZ2VudCk6IFZlbG9jaXR5T2JzdGFjbGUgfCBudWxsIHtcclxuICAgIGNvbnN0IHZlbG9jaXR5QSA9IHRoaXMuZ2V0RGlyZWN0aW9uKCk7XHJcbiAgICBjb25zdCB2ZWxvY2l0eUIgPSBiLmdldERpcmVjdGlvbigpO1xyXG4gICAgY29uc3QgdmVydGV4ID0gdmVsb2NpdHlBLmFkZCh2ZWxvY2l0eUIpLmRpdmlkZSgyKTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGUgb3JpZ2luIHRvIHRoaXMgYWdlbnQncyBwb3NpdGlvblxyXG4gICAgY29uc3QgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBjb25zdCBjZW50cmUgPSBwb3NpdGlvbkIuYWRkKHZlbG9jaXR5Qik7XHJcbiAgICBjb25zdCByYWRpdXMgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGNvbnN0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGNvbnN0IGRpc3QgPSBkaWZmLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKGRpc3QgPCByYWRpdXMpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGhldGEgPSBNYXRoLmFjb3MocmFkaXVzIC8gZGlzdCk7XHJcbiAgICBjb25zdCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBjb25zdCBhbmdsZTEgPSBwaGkgKyB0aGV0YTtcclxuICAgIGNvbnN0IHRhbmdlbnQxID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMSksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUxKVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGNvbnN0IHRhbmdlbnQyID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMiksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUyKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdmVsb2NpdHkgb2JzdGFjbGVcclxuICAgIHJldHVybiBuZXcgVmVsb2NpdHlPYnN0YWNsZSh2ZXJ0ZXgsIHRhbmdlbnQxLCB0YW5nZW50Mik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4uL0FnZW50XCI7XHJcbmltcG9ydCB7IFZPQWdlbnQgfSBmcm9tIFwiLi9WT0FnZW50XCI7XHJcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL0dlb21ldHJ5XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4uL1ZlY3RvcjJmXCI7XHJcbmltcG9ydCB7IFZlbG9jaXR5T2JzdGFjbGUgfSBmcm9tIFwiLi4vVmVsb2NpdHlPYnN0YWNsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhSVk9BZ2VudCBleHRlbmRzIFZPQWdlbnQge1xyXG4gIC8vIE92ZXJyaWRlIGdldFZlbG9jaXR5T2JzdGFjbGUgdG8gcHJvZHVjZSBIeWJyaWQgUmVjaXByb2NhbCBWZWxvY2l0eSBPYnN0YWNsZVxyXG4gIHByb3RlY3RlZCBnZXRWZWxvY2l0eU9ic3RhY2xlKGI6IEFnZW50KTogVmVsb2NpdHlPYnN0YWNsZSB8IG51bGwge1xyXG4gICAgY29uc3QgdmVsb2NpdHlBID0gdGhpcy5nZXREaXJlY3Rpb24oKTtcclxuICAgIGNvbnN0IHZlbG9jaXR5QiA9IGIuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgLy8gR2V0IHJlc3BlY3RpdmUgdmVydGljZXNcclxuICAgIGNvbnN0IHZvVmVydGV4ID0gdmVsb2NpdHlCO1xyXG4gICAgY29uc3QgcnZvVmVydGV4ID0gdmVsb2NpdHlBLmFkZCh2ZWxvY2l0eUIpLmRpdmlkZSgyKTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGUgb3JpZ2luIHRvIHRoaXMgYWdlbnQncyBwb3NpdGlvblxyXG4gICAgY29uc3QgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBjb25zdCBjZW50cmUgPSBwb3NpdGlvbkIuYWRkKHZlbG9jaXR5Qik7XHJcbiAgICBjb25zdCByYWRpdXMgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGNvbnN0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGNvbnN0IGRpc3QgPSBkaWZmLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKGRpc3QgPCByYWRpdXMpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGhldGEgPSBNYXRoLmFjb3MocmFkaXVzIC8gZGlzdCk7XHJcbiAgICBjb25zdCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBjb25zdCBhbmdsZTEgPSBwaGkgKyB0aGV0YTtcclxuICAgIGNvbnN0IHRhbmdlbnQxID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMSksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUxKVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGNvbnN0IHRhbmdlbnQyID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMiksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUyKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDaGVjayB3aGljaCBzaWRlIHRvIHBhc3Mgb25cclxuICAgIGNvbnN0IHNpZGUgPVxyXG4gICAgICAocG9zaXRpb25CLnggLSB2ZWxvY2l0eUIueCkgKiAodmVsb2NpdHlBLnkgLSB2ZWxvY2l0eUIueSkgLVxyXG4gICAgICAocG9zaXRpb25CLnkgLSB2ZWxvY2l0eUIueSkgKiAodmVsb2NpdHlBLnggLSB2ZWxvY2l0eUIueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHZlcnRleCBhcyBpbnRlcnNlY3Rpb24gb2YgVk8gYW5kIFJWTyBjb25lXHJcbiAgICBsZXQgdmVydGV4O1xyXG4gICAgaWYgKHNpZGUgPiAwKSB7XHJcbiAgICAgIC8vIFwiTGVmdFwiXHJcbiAgICAgIHZlcnRleCA9IEdlb21ldHJ5LmdldExpbmVMaW5lSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgIHZvVmVydGV4LFxyXG4gICAgICAgIHRhbmdlbnQxLFxyXG4gICAgICAgIHJ2b1ZlcnRleCxcclxuICAgICAgICB0YW5nZW50MlxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gXCJSaWdodFwiXHJcbiAgICAgIHZlcnRleCA9IEdlb21ldHJ5LmdldExpbmVMaW5lSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgIHZvVmVydGV4LFxyXG4gICAgICAgIHRhbmdlbnQyLFxyXG4gICAgICAgIHJ2b1ZlcnRleCxcclxuICAgICAgICB0YW5nZW50MVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiBoeWJyaWQgcmVjaXByaWNvbCB2ZWxvY2l0eSBvYnN0YWNsZVxyXG4gICAgcmV0dXJuIG5ldyBWZWxvY2l0eU9ic3RhY2xlKHZlcnRleCwgdGFuZ2VudDEsIHRhbmdlbnQyKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9BZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcbmltcG9ydCB7IEJhc2ljQWdlbnQgfSBmcm9tIFwiLi9hZ2VudHMvQmFzaWNBZ2VudFwiO1xyXG5pbXBvcnQgeyBTdG9wQWdlbnQgfSBmcm9tIFwiLi9hZ2VudHMvU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IFZPQWdlbnQgfSBmcm9tIFwiLi9hZ2VudHMvVk9BZ2VudFwiO1xyXG5pbXBvcnQgeyBSVk9BZ2VudCB9IGZyb20gXCIuL2FnZW50cy9SVk9BZ2VudFwiO1xyXG5pbXBvcnQgeyBIUlZPQWdlbnQgfSBmcm9tIFwiLi9hZ2VudHMvSFJWT0FnZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQWdlbnRGYWN0b3J5IHtcclxuICBzdGF0aWMgZ2V0QWdlbnQoXHJcbiAgICB0eXBlOiBzdHJpbmcsXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnZXRQcmVmZXJyZWRWZWxvY2l0eTogKHBvc2l0aW9uOiBWZWN0b3IyZikgPT4gVmVjdG9yMmZcclxuICApOiBBZ2VudCB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIkJhc2ljQWdlbnRcIjpcclxuICAgICAgICByZXR1cm4gbmV3IEJhc2ljQWdlbnQoaWQsIHN0YXJ0UG9zaXRpb24sIGdldFByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgICAgY2FzZSBcIlN0b3BBZ2VudFwiOlxyXG4gICAgICAgIHJldHVybiBuZXcgU3RvcEFnZW50KGlkLCBzdGFydFBvc2l0aW9uLCBnZXRQcmVmZXJyZWRWZWxvY2l0eSk7XHJcbiAgICAgIGNhc2UgXCJWT0FnZW50XCI6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWT0FnZW50KGlkLCBzdGFydFBvc2l0aW9uLCBnZXRQcmVmZXJyZWRWZWxvY2l0eSk7XHJcbiAgICAgIGNhc2UgXCJSVk9BZ2VudFwiOlxyXG4gICAgICAgIHJldHVybiBuZXcgUlZPQWdlbnQoaWQsIHN0YXJ0UG9zaXRpb24sIGdldFByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgICAgY2FzZSBcIkhSVk9BZ2VudFwiOlxyXG4gICAgICAgIHJldHVybiBuZXcgSFJWT0FnZW50KGlkLCBzdGFydFBvc2l0aW9uLCBnZXRQcmVmZXJyZWRWZWxvY2l0eSk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGFnZW50IHR5cGUgXFxcIiR7dHlwZX1cXFwiYCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vQWdlbnRcIjtcclxuaW1wb3J0IHsgQWdlbnRGYWN0b3J5IH0gZnJvbSBcIi4vQWdlbnRGYWN0b3J5XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0aW9uRmFjdG9yeSB7XHJcbiAgc3RhdGljIGdldENvbmZpZ3VyYXRpb24oXHJcbiAgICB0eXBlOiBzdHJpbmcsXHJcbiAgICBhZ2VudFR5cGU6IHN0cmluZyxcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIG51bWJlck9mQWdlbnRzOiBudW1iZXJcclxuICApOiBBZ2VudFtdIHtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlIFwiUmFuZG9tVG9SYW5kb21cIjpcclxuICAgICAgICByZXR1cm4gdGhpcy5SYW5kb21Ub1JhbmRvbShhZ2VudFR5cGUsIHdpZHRoLCBoZWlnaHQsIG51bWJlck9mQWdlbnRzKTtcclxuICAgICAgY2FzZSBcIlJhbmRvbVRvTGluZVwiOlxyXG4gICAgICAgIHJldHVybiB0aGlzLlJhbmRvbVRvTGluZShhZ2VudFR5cGUsIHdpZHRoLCBoZWlnaHQsIG51bWJlck9mQWdlbnRzKTtcclxuICAgICAgY2FzZSBcIkNpcmNsZVRvQ2lyY2xlXCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2lyY2xlVG9DaXJjbGUoYWdlbnRUeXBlLCB3aWR0aCwgaGVpZ2h0LCBudW1iZXJPZkFnZW50cyk7XHJcbiAgICAgIGNhc2UgXCJHcmlkVG9HcmlkXCI6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuR3JpZFRvR3JpZChhZ2VudFR5cGUsIHdpZHRoLCBoZWlnaHQsIG51bWJlck9mQWdlbnRzKTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29uZmlndXJhdGlvbiB0eXBlIFxcXCIke3R5cGV9XFxcImApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgUmFuZG9tVG9SYW5kb20oXHJcbiAgICBhZ2VudFR5cGU6IHN0cmluZyxcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIG51bWJlck9mQWdlbnRzOiBudW1iZXJcclxuICApOiBBZ2VudFtdIHtcclxuICAgIC8vIFJhbmRvbSBzdGFydCBwb3NpdGlvbiB0byByYW5kb20gZ29hbCBwb3NpdGlvblxyXG4gICAgbGV0IGFnZW50czogQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3Qgc3RhcnRQb3NpdGlvbnMgPSB0aGlzLnBvaXNzb25EaXNrU2FtcGxlKFxyXG4gICAgICB3aWR0aCxcclxuICAgICAgaGVpZ2h0LFxyXG4gICAgICBudW1iZXJPZkFnZW50cyxcclxuICAgICAgNTBcclxuICAgICkubWFwKCh4KSA9PiB4LnN1YnRyYWN0KG5ldyBWZWN0b3IyZih3aWR0aCAvIDIsIGhlaWdodCAvIDIpKSk7XHJcblxyXG4gICAgY29uc3QgZ29hbFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUoXHJcbiAgICAgIHdpZHRoLFxyXG4gICAgICBoZWlnaHQsXHJcbiAgICAgIG51bWJlck9mQWdlbnRzLFxyXG4gICAgICA1MFxyXG4gICAgKS5tYXAoKHgpID0+IHguc3VidHJhY3QobmV3IFZlY3RvcjJmKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMikpKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQWdlbnRzOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBBZ2VudEZhY3RvcnkuZ2V0QWdlbnQoXHJcbiAgICAgICAgYWdlbnRUeXBlLFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgc3RhcnRQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgdGhpcy5wcmVmZXJyZWRWZWxvY2l0eUZyb21Hb2FsUG9zaXRpb24oZ29hbFBvc2l0aW9uc1tpXSlcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhZ2VudHM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgYWdlbnRUeXBlOiBzdHJpbmcsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBudW1iZXJPZkFnZW50czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZShcclxuICAgICAgd2lkdGgsXHJcbiAgICAgIGhlaWdodCxcclxuICAgICAgbnVtYmVyT2ZBZ2VudHMsXHJcbiAgICAgIDUwXHJcbiAgICApLm1hcCgoeCkgPT4geC5zdWJ0cmFjdChuZXcgVmVjdG9yMmYod2lkdGggLyAyLCBoZWlnaHQgLyAyKSkpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZBZ2VudHM7IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IEFnZW50RmFjdG9yeS5nZXRBZ2VudChcclxuICAgICAgICBhZ2VudFR5cGUsXHJcbiAgICAgICAgaSxcclxuICAgICAgICBzdGFydFBvc2l0aW9uc1tpXSxcclxuICAgICAgICB0aGlzLnByZWZlcnJlZFZlbG9jaXR5RnJvbUdvYWxQb3NpdGlvbihcclxuICAgICAgICAgIG5ldyBWZWN0b3IyZigoKGkgKyAxKSAvIChudW1iZXJPZkFnZW50cyArIDEpIC0gMSAvIDIpICogd2lkdGgsIDApXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFnZW50cztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBDaXJjbGVUb0NpcmNsZShcclxuICAgIGFnZW50VHlwZTogc3RyaW5nLFxyXG4gICAgX3dpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIG51bWJlck9mQWdlbnRzOiBudW1iZXJcclxuICApIHtcclxuICAgIC8vIFBvc2l0aW9uIG9uIHJhZGl1cyBvZiBjaXJjbGUgdG8gb3Bwb3NpdGUgcG9pbnRcclxuICAgIGxldCBhZ2VudHM6IEFnZW50W10gPSBbXTtcclxuICAgIGNvbnN0IHJhZGl1cyA9IGhlaWdodCAvIDIgLSAyNTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQWdlbnRzOyBpKyspIHtcclxuICAgICAgY29uc3QgYW5nbGUgPSAoMiAqIE1hdGguUEkgKiBpKSAvIG51bWJlck9mQWdlbnRzO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IEFnZW50RmFjdG9yeS5nZXRBZ2VudChcclxuICAgICAgICBhZ2VudFR5cGUsXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYocmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLCByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSkpLFxyXG4gICAgICAgIHRoaXMucHJlZmVycmVkVmVsb2NpdHlGcm9tR29hbFBvc2l0aW9uKFxyXG4gICAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgICByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkpLFxyXG4gICAgICAgICAgICByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFnZW50cztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBHcmlkVG9HcmlkKFxyXG4gICAgYWdlbnRUeXBlOiBzdHJpbmcsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgX2hlaWdodDogbnVtYmVyLFxyXG4gICAgbnVtYmVyT2ZBZ2VudHM6IG51bWJlclxyXG4gICkge1xyXG4gICAgLy8gVHdvIG9wcG9zaW5nIGdyaWRzIG9mIGFnZW50cyBwYXNzaW5nIHRocm91Z2ggZWFjaG90aGVyXHJcbiAgICBsZXQgYWdlbnRzOiBBZ2VudFtdID0gW107XHJcbiAgICBjb25zdCBncmlkU2l6ZSA9IE1hdGguY2VpbChNYXRoLnNxcnQobnVtYmVyT2ZBZ2VudHMgLyAyKSk7XHJcbiAgICBjb25zdCBvZmZzZXQgPSA5MDtcclxuICAgIGxldCB4ID0gMzAgLSB3aWR0aCAvIDI7XHJcbiAgICBsZXQgeSA9IC0oKGdyaWRTaXplIC0gMSkgLyAyKSAqIG9mZnNldDtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQWdlbnRzOyBpKyspIHtcclxuICAgICAgY29uc3QgaWR4ID0gTWF0aC5mbG9vcihpIC8gMik7XHJcbiAgICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoaWR4IC8gZ3JpZFNpemUpO1xyXG4gICAgICBjb25zdCBjb2wgPSBpZHggJSBncmlkU2l6ZTtcclxuXHJcbiAgICAgIGlmIChpICUgMiA9PSAwKSB7XHJcbiAgICAgICAgLy8gTEhTXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBBZ2VudEZhY3RvcnkuZ2V0QWdlbnQoXHJcbiAgICAgICAgICBhZ2VudFR5cGUsXHJcbiAgICAgICAgICBpLFxyXG4gICAgICAgICAgbmV3IFZlY3RvcjJmKHggKyAoZ3JpZFNpemUgLSAxIC0gY29sKSAqIG9mZnNldCwgeSArIHJvdyAqIG9mZnNldCksXHJcbiAgICAgICAgICB0aGlzLnByZWZlcnJlZFZlbG9jaXR5RnJvbUdvYWxQb3NpdGlvbihcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjJmKC14IC0gY29sICogb2Zmc2V0LCB5ICsgcm93ICogb2Zmc2V0KVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFJIU1xyXG4gICAgICAgIGNvbnN0IGFnZW50ID0gQWdlbnRGYWN0b3J5LmdldEFnZW50KFxyXG4gICAgICAgICAgYWdlbnRUeXBlLFxyXG4gICAgICAgICAgaSxcclxuICAgICAgICAgIG5ldyBWZWN0b3IyZigteCAtIChncmlkU2l6ZSAtIDEgLSBjb2wpICogb2Zmc2V0LCB5ICsgcm93ICogb2Zmc2V0KSxcclxuICAgICAgICAgIHRoaXMucHJlZmVycmVkVmVsb2NpdHlGcm9tR29hbFBvc2l0aW9uKFxyXG4gICAgICAgICAgICBuZXcgVmVjdG9yMmYoeCArIGNvbCAqIG9mZnNldCwgeSArIHJvdyAqIG9mZnNldClcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhZ2VudHM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBwcmVmZXJyZWRWZWxvY2l0eUZyb21Hb2FsUG9zaXRpb24oXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmXHJcbiAgKTogKHBvczogVmVjdG9yMmYpID0+IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiAocG9zKSA9PiB7XHJcbiAgICAgIGNvbnN0IGdvYWxEaXJlY3Rpb24gPSBnb2FsUG9zaXRpb24uc3VidHJhY3QocG9zKTtcclxuICAgICAgaWYgKGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlU3FyZCgpIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBnb2FsRGlyZWN0aW9uO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBnb2FsRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcG9pc3NvbkRpc2tTYW1wbGUoXHJcbiAgICB4UmFuZ2U6IG51bWJlcixcclxuICAgIHlSYW5nZTogbnVtYmVyLFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgdGhyZXNob2xkOiBudW1iZXJcclxuICApOiBWZWN0b3IyZltdIHtcclxuICAgIGxldCBzYW1wbGVzOiBWZWN0b3IyZltdID0gW107XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgbGV0IHJlc2FtcGxlID0gdHJ1ZTtcclxuICAgICAgbGV0IHBvczogVmVjdG9yMmY7XHJcblxyXG4gICAgICB3aGlsZSAocmVzYW1wbGUpIHtcclxuICAgICAgICByZXNhbXBsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBvcyA9IG5ldyBWZWN0b3IyZih4UmFuZ2UgKiBNYXRoLnJhbmRvbSgpLCB5UmFuZ2UgKiBNYXRoLnJhbmRvbSgpKTtcclxuXHJcbiAgICAgICAgc2FtcGxlcy5mb3JFYWNoKChzYW1wbGUpID0+IHtcclxuICAgICAgICAgIGlmIChwb3Muc3VidHJhY3Qoc2FtcGxlKS5tYWduaXR1ZGVTcXJkKCkgPCB0aHJlc2hvbGQgKiogMikge1xyXG4gICAgICAgICAgICByZXNhbXBsZSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNhbXBsZXMucHVzaChwb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzYW1wbGVzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSBcIi4vU2ltdWxhdGlvblwiO1xyXG5pbXBvcnQgeyBSZW5kZXJlcjJEIH0gZnJvbSBcIi4vUmVuZGVyZXIyRFwiO1xyXG5pbXBvcnQgeyBBZ2VudFRyZWUgfSBmcm9tIFwiLi9BZ2VudFRyZWVcIjtcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbkZhY3RvcnkgfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uRmFjdG9yeVwiO1xyXG5cclxuY29uc3QgY29uZmlnU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maWdcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IGFnZW50VHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWdlbnRUeXBlXCJcclxuKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgbnVtYmVyT2ZBZ2VudHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwibnVtYmVyT2ZBZ2VudHNcIlxyXG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgZnJhbWVyYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXJhdGVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHN0ZXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0ZXBCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKGNhbnZhcyk7XHJcbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihyZW5kZXJlciwgbmV3IEFnZW50VHJlZSgpKTtcclxudmFyIHBsYXkgPSBmYWxzZTtcclxuXHJcbi8vIGluaXRpYWxpc2Ugc2ltdWxhdGlvbiBhbmQgYmVnaW4gdXBkYXRlL3JlbmRlciBsb29wXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xyXG4gIHRoaXMucmVjb25maWd1cmUoKTtcclxuXHJcbiAgbGV0IGxhc3RSZW5kZXIgPSAwO1xyXG4gIGxldCBsYXN0RlBTID0gMDtcclxuICBsZXQgZnJhbWVzID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXA6IG51bWJlcikge1xyXG4gICAgbGV0IGRlbHRhVCA9IHRpbWVzdGFtcCAtIGxhc3RSZW5kZXI7XHJcbiAgICBsYXN0UmVuZGVyID0gdGltZXN0YW1wO1xyXG5cclxuICAgIC8vIHVwZGF0ZVxyXG4gICAgaWYgKHBsYXkpIHtcclxuICAgICAgc2ltdWxhdGlvbi51cGRhdGUoZGVsdGFUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXJcclxuICAgIHNpbXVsYXRpb24uZHJhdygpO1xyXG4gICAgZnJhbWVzKys7XHJcblxyXG4gICAgLy8gcmVjYWxjdWxhdGUgZnJhbWVyYXRlIGV2ZXJ5IDI1MG1zXHJcbiAgICBpZiAodGltZXN0YW1wIC0gbGFzdEZQUyA+PSAyNTApIHtcclxuICAgICAgZnJhbWVyYXRlLnRleHRDb250ZW50ID0gYEZQUzogJHsoXHJcbiAgICAgICAgKDEwMDAgKiBmcmFtZXMpIC9cclxuICAgICAgICAodGltZXN0YW1wIC0gbGFzdEZQUylcclxuICAgICAgKS50b0ZpeGVkKDEpfWA7XHJcblxyXG4gICAgICBmcmFtZXMgPSAwO1xyXG4gICAgICBsYXN0RlBTID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG4vLyB0b2dnbGUgcGxheS9wYXVzZVxyXG5leHBvcnQgZnVuY3Rpb24gcGxheVBhdXNlKCkge1xyXG4gIHBsYXkgPSAhcGxheTtcclxuXHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBhdXNlXCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGxheVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gc3RlcCBzaW11bGF0aW9uIGJ5IDEgZnJhbWVcclxuZXhwb3J0IGZ1bmN0aW9uIHN0ZXAoKSB7XHJcbiAgc2ltdWxhdGlvbi51cGRhdGUoMTAwMCAvIDYwKTsgLy8gQXNzdW1lcyA2MEZQU1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjb25maWd1cmUoKSB7XHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHRoaXMucGxheVBhdXNlKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb25maWcgPSBjb25maWdTZWxlY3QudmFsdWU7XHJcbiAgY29uc3QgYWdlbnRUeXBlID0gYWdlbnRUeXBlU2VsZWN0LnZhbHVlO1xyXG4gIGNvbnN0IG51bWJlck9mQWdlbnRzID0gcGFyc2VJbnQobnVtYmVyT2ZBZ2VudHNJbnB1dC52YWx1ZSkgPz8gMDtcclxuXHJcbiAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgQ29uZmlndXJhdGlvbkZhY3RvcnkuZ2V0Q29uZmlndXJhdGlvbihcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBhZ2VudFR5cGUsXHJcbiAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgbnVtYmVyT2ZBZ2VudHNcclxuICAgIClcclxuICApO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNTQ2KTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==