var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={615:(t,i,e)=>{e.r(i),e.d(i,{init:()=>P,playPause:()=>b,reconfigure:()=>I,step:()=>w});var n=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(e){e.update(t,i._agents.getNeighboursInRangeEuclidean(e,300))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){this._renderer.clear(),this._renderer.drawAgents(this._agents)},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgents=function(t){var i=this;t.forEach((function(t){i.drawAgent(t)}))},t.prototype.drawAgent=function(t){var i=t.getPosition(),e=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var n=e.magnitude();if(0!==n){this._context.moveTo(i.x,i.y);var o=i.add(e.divide(n).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var e=Math.sqrt(Math.random())*i,n=2*Math.PI*Math.random();return new t(this.x+e*Math.cos(n),this.y+e*Math.sin(n))},t}(),s=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var e=this._goalPosition.subtract(this._position);e.magnitude()>60*t/1e3?(this._direction=e.normalise(),this._position=this._position.add(this._direction.multiply(60*t/1e3))):(this._position=this._goalPosition,this._isDone=!0)}},t}(),a=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var e=this;if(!this._isDone){var n=this._goalPosition.subtract(this._position);if(n.magnitude()>60*t/1e3){this._direction=n.normalise();var o=this._position.add(this._direction.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=e.Id&&e.collides(t,o)&&(e._isStuck=!0)})),this._isStuck||(this._position=this._position.add(this._direction.multiply(60*t/1e3)))}else this._position=this._goalPosition,this._isDone=!0}},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),u=function(){function t(){}return t.RandomToRandom=function(t,i,e,n){for(var o=[],r=this.poissonDiskSample(i,e,t,50),s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var u=n(a,r[a],s[a],20);o.push(u)}return{agents:o}},t.RandomToLine=function(t,i,e,n){for(var o=[],s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var u=n(a,s[a],new r((a+1)/(t+1)*i,e/2),20);o.push(u)}return{agents:o}},t.CircleToCircle=function(t,i,e,n){for(var o=[],s=i/2,a=e/2,u=e/2-25,c=0;c<t;c++){var h=2*Math.PI*c/t,d=n(c,new r(s+u*Math.cos(h),a+u*Math.sin(h)),new r(s+u*Math.cos(h+Math.PI),a+u*Math.sin(h+Math.PI)),20);o.push(d)}return{agents:o}},t.GridToGrid=function(t,i,e,n){for(var o=[],s=Math.ceil(t/8),a=i-50-90*(s-1),u=e/2-135,c=0,h=0;h<s;h++){for(var d=0;d<4;d++){var g=new r(50+90*h,u+90*d),p=new r(a+90*h,u+90*d);if(o.push(n(c,g,p,20)),++c>=t)break;if(o.push(n(c,p,g,20)),++c>=t)break}if(c>=t)break}return{agents:o}},t.poissonDiskSample=function(t,i,e,n){for(var o=[],s=function(){for(var e,s=!0;s;)s=!1,e=new r(t*Math.random(),i*Math.random()),o.forEach((function(t){e.subtract(t).magnitudeSqrd()<Math.pow(n,2)&&(s=!0)}));o.push(e)},a=0;a<e;a++)s();return o},t}(),c=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var e=t.getPosition().x-i,n=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,e,n,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(e){return t.getPosition().subtract(e.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var e=Math.floor(t.length/2),n=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(n.slice(0,e),!i),r=this.constructTree(n.slice(e+1,t.length),!i);return{agent:t[e],left:o,right:r}},t.prototype.rangeSearch=function(t,i,e,n,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=n&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().y>=e&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=e&&t.agent.getPosition().x<=n&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),h=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){var e=.5,n=this.getPreferredVelocity(e),o=this._goalPosition.subtract(this.getPosition()).magnitudeSqrd();this._isStuck=!1;for(var s,a,u=!0,c=0;c<i.length;c++)if(!(i[c].getPosition().subtract(this.getPosition()).magnitudeSqrd()>o)&&null!=(v=this.getVelocityObstacle(i[c]))&&this.isInside(n,v)){u=!1,s=v,a=c;break}if(u)return this._direction=n,this._position=this._position.add(n),void this.checkIfDone();if(null!=s){var h=this.getClosestPointOnLine(s.vertex,s.tangent1,n);if(h.magnitude()<=e){for(u=!0,c=0;c<i.length;c++)if(c!=a&&null!=(v=this.getVelocityObstacle(i[c]))&&this.isInside(h,v)){u=!1;break}if(u)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}var d=this.getClosestPointOnLine(s.vertex,s.tangent2,n);if(h.magnitude()<=e){for(u=!0,c=0;c<i.length;c++)if(c!=a&&null!=(v=this.getVelocityObstacle(i[c]))&&this.isInside(d,v)){u=!1;break}if(u)return this._direction=d,this._position=this._position.add(d),void this.checkIfDone()}}var g=Math.sqrt(o),p=1/0,f=new r(0,0);for(c=0;c<100;c++){for(var l=new r(0,0).sample(e),y=1/0,_=0;_<i.length;_++){var v,m=i[_];if(null==(v=this.getVelocityObstacle(m))||this.isInside(l,v)){var x=this.getFirstRayCircleIntersection(m.getPosition().add(m.getDirection()),this.Radius+m.Radius,this._position,l.subtract(m.getDirection()));if(x<y&&0==(y=x))return void this.checkIfDone()}}var P;(P=y<g?100/y+n.subtract(l).magnitude():n.subtract(l).magnitude())<p&&(p=P,f=l)}0==f.magnitude()&&(this._isStuck=!0),this._direction=f,this._position=this._position.add(f),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),e=t.getPosition().subtract(this._position).add(i),n=t.Radius+this.Radius,o=i.subtract(e),s=o.magnitude();if(s<n)return null;var a=Math.acos(n/s),u=Math.atan2(o.y,o.x),c=u+a,h=u-a;return{vertex:i,tangent1:new r(e.x+n*Math.cos(c),e.y+n*Math.sin(c)),tangent2:new r(e.x+n*Math.cos(h),e.y+n*Math.sin(h))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var c=(-s-Math.sqrt(u))/2*r;return c<0?1/0:c},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),d=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){var e=.5,n=this.getPreferredVelocity(e),o=this._goalPosition.subtract(this.getPosition()).magnitudeSqrd();this._isStuck=!1;for(var s,a,u=!0,c=0;c<i.length;c++)if(!(i[c].getPosition().subtract(this.getPosition()).magnitudeSqrd()>o)&&null!=(v=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(n,v)){u=!1,s=v,a=c;break}if(u)return this._direction=n,this._position=this._position.add(n),void this.checkIfDone();if(null!=s){var h=this.getClosestPointOnLine(s.vertex,s.tangent1,n);if(h.magnitude()<=e){for(u=!0,c=0;c<i.length;c++)if(c!=a&&null!=(v=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(h,v)){u=!1;break}if(u)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}var d=this.getClosestPointOnLine(s.vertex,s.tangent2,n);if(h.magnitude()<=e){for(u=!0,c=0;c<i.length;c++)if(c!=a&&null!=(v=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(d,v)){u=!1;break}if(u)return this._direction=d,this._position=this._position.add(d),void this.checkIfDone()}}var g=Math.sqrt(o),p=1/0,f=new r(0,0);for(c=0;c<100;c++){for(var l=new r(0,0).sample(e),y=1/0,_=0;_<i.length;_++){var v,m=i[_];if(null!=(v=this.getReciprocalVelocityObstacle(m))&&this.isInside(l,v)){var x=this.getFirstRayCircleIntersection(m.getPosition().add(m.getDirection()),this.Radius+m.Radius,this._position,l.multiply(2).subtract(this.getDirection()).subtract(m.getDirection()));if(x<y&&0==(y=x))return void this.checkIfDone()}}var P;(P=y<g?100/y+n.subtract(l).magnitude():n.subtract(l).magnitude())<p&&(p=P,f=l)}0==f.magnitude()&&(this._isStuck=!0),this._direction=f,this._position=this._position.add(f),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getReciprocalVelocityObstacle=function(t){var i=this.getDirection(),e=t.getDirection(),n=i.add(e).divide(2),o=t.getPosition().subtract(this._position).add(e),s=t.Radius+this.Radius,a=e.subtract(o),u=a.magnitude();if(u<s)return null;var c=Math.acos(s/u),h=Math.atan2(a.y,a.x),d=h+c,g=h-c;return{vertex:n,tangent1:new r(o.x+s*Math.cos(d),o.y+s*Math.sin(d)),tangent2:new r(o.x+s*Math.cos(g),o.y+s*Math.sin(g))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var c=(-s-Math.sqrt(u))/2*r;return c<0?1/0:c},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),g=document.getElementById("config"),p=document.getElementById("agentType"),f=document.getElementById("numberOfAgents"),l=document.getElementById("canvas"),y=document.getElementById("framerate"),_=document.getElementById("playButton"),v=document.getElementById("stepButton"),m=new n(new o(l),new c),x=!1;function P(){this.reconfigure();var t=0,i=0,e=0;window.requestAnimationFrame((function n(o){var r=o-t;t=o,x&&m.update(r),m.draw(),e++,o-i>=250&&(y.textContent="FPS: "+(1e3*e/(o-i)).toFixed(1),e=0,i=o),window.requestAnimationFrame(n)}))}function b(){(x=!x)?(_.textContent="Pause",v.disabled=!0):(_.textContent="Play",v.disabled=!1)}function w(){m.update(1e3/60)}function I(){var t;x&&this.playPause();var i,e=g.value,n=p.value,o=null!==(t=parseInt(f.value))&&void 0!==t?t:0;switch(n){case"BasicAgent":i=function(t,i,e,n){return new s(t,i,e,n)};break;case"StopAgent":i=function(t,i,e,n){return new a(t,i,e,n)};break;case"VOAgent":i=function(t,i,e,n){return new h(t,i,e,n)};break;case"RVOAgent":i=function(t,i,e,n){return new d(t,i,e,n)};break;default:throw new Error("Agent not implemented")}switch(e){case"RandomToRandom":m.init(u.RandomToRandom(o,l.width,l.height,i));break;case"RandomToLine":m.init(u.RandomToLine(o,l.width,l.height,i));break;case"CircleToCircle":m.init(u.CircleToCircle(o,l.width,l.height,i));break;case"GridToGrid":m.init(u.GridToGrid(o,l.width,l.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}return e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(615)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvUlZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvZGVtbzJkLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sIm5hbWVzIjpbInJlbmRlcmVyIiwiYWdlbnRzIiwidGhpcyIsIl9yZW5kZXJlciIsIl9hZ2VudHMiLCJpbml0IiwiY29uZmlnIiwidXBkYXRlIiwiZGVsdGFUIiwiZm9yRWFjaCIsImFnZW50IiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4iLCJnZXRBbGwiLCJkcmF3IiwiY2xlYXIiLCJkcmF3QWdlbnRzIiwiY2FudmFzIiwiX2NvbnRleHQiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImRyYXdBZ2VudCIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJkaXJlY3Rpb24iLCJnZXREaXJlY3Rpb24iLCJiZWdpblBhdGgiLCJnZXRJc0RvbmUiLCJzdHJva2VTdHlsZSIsImdldElzU3R1Y2siLCJhcmMiLCJ4IiwieSIsIlJhZGl1cyIsIk1hdGgiLCJQSSIsIm1hZ25pdHVkZSIsIm1vdmVUbyIsIm5ld1BvcyIsImFkZCIsImRpdmlkZSIsIm11bHRpcGx5IiwibGluZVRvIiwic3Ryb2tlIiwiY29weSIsInYiLCJWZWN0b3IyZiIsInN1YnRyYWN0IiwicyIsImRvdCIsIm1hZ25pdHVkZVNxcmQiLCJzcXJ0Iiwibm9ybWFsaXNlIiwibSIsInNhbXBsZSIsIm1heFJhZGl1cyIsInJhZGl1cyIsInJhbmRvbSIsImFuZ2xlIiwiY29zIiwic2luIiwiaWQiLCJzdGFydFBvc2l0aW9uIiwiZ29hbFBvc2l0aW9uIiwiSWQiLCJfcG9zaXRpb24iLCJfZ29hbFBvc2l0aW9uIiwiX2RpcmVjdGlvbiIsIl9pc0RvbmUiLCJnb2FsRGlyZWN0aW9uIiwiX2lzU3R1Y2siLCJjb2xsaWRlcyIsIlJhbmRvbVRvUmFuZG9tIiwibiIsImFnZW50Q29uc3RydWN0b3IiLCJzdGFydFBvc2l0aW9ucyIsInBvaXNzb25EaXNrU2FtcGxlIiwiZ29hbFBvc2l0aW9ucyIsImkiLCJwdXNoIiwiUmFuZG9tVG9MaW5lIiwiQ2lyY2xlVG9DaXJjbGUiLCJjZW50cmVYIiwiY2VudHJlWSIsIkdyaWRUb0dyaWQiLCJjb2xzIiwiY2VpbCIsInJpZ2h0IiwidG9wIiwiaiIsImEiLCJiIiwieFJhbmdlIiwieVJhbmdlIiwidGhyZXNob2xkIiwic2FtcGxlcyIsInBvcyIsInJlc2FtcGxlIiwiX3Jvb3QiLCJjb25zdHJ1Y3RUcmVlIiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhciIsInJhbmdlIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJhbmdlU2VhcmNoIiwiZmlsdGVyIiwib3RoZXIiLCJmdW4iLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImxlZnQiLCJzbGljZSIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJNQVhfVkVMT0NJVFkiLCJNQVhfQUNDRUxFUkFUSU9OIiwibmVpZ2hib3VycyIsInNwZWVkIiwicHJlZmVycmVkVmVsb2NpdHkiLCJnZXRQcmVmZXJyZWRWZWxvY2l0eSIsImdvYWxEaXN0U3FyZCIsImNvbGxpc2lvbiIsInNhZmUiLCJ2ZWxvY2l0eU9ic3RhY2xlIiwiZ2V0VmVsb2NpdHlPYnN0YWNsZSIsImlzSW5zaWRlIiwiY2hlY2tJZkRvbmUiLCJoYWxmcGxhbmUxIiwiZ2V0Q2xvc2VzdFBvaW50T25MaW5lIiwidmVydGV4IiwidGFuZ2VudDEiLCJoYWxmUGxhbmUyIiwidGFuZ2VudDIiLCJnb2FsRGlzdCIsIm1pblBlbmFsdHkiLCJJbmZpbml0eSIsImJlc3RWZWxvY2l0eSIsIm1pblRpbWVUb0NvbGxpc2lvbiIsInRpbWVUb0NvbGxpc2lvbiIsImdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uIiwicGVuYWx0eSIsIm1heFNwZWVkIiwiZ29hbERpc3RhbmNlIiwidmVsb2NpdHlCIiwiY2VudHJlIiwiZGlmZiIsImRpc3QiLCJ0aGV0YSIsImFjb3MiLCJwaGkiLCJhdGFuMiIsImFuZ2xlMSIsImFuZ2xlMiIsInZlbG9jaXR5IiwiZGV0ZXJtaW5hbnQxIiwiZGV0ZXJtaW5hbnQyIiwibGluZVBvaW50IiwibGluZURpcmVjdGlvbiIsInBvaW50IiwiZGlzdGFuY2UiLCJvcmlnaW4iLCJkZWx0YSIsImMiLCJkaXNjcmltIiwiZ2V0UmVjaXByb2NhbFZlbG9jaXR5T2JzdGFjbGUiLCJ2ZWxvY2l0eUEiLCJjb25maWdTZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWdlbnRUeXBlU2VsZWN0IiwibnVtYmVyT2ZBZ2VudHNJbnB1dCIsImZyYW1lcmF0ZSIsInBsYXlCdXR0b24iLCJzdGVwQnV0dG9uIiwic2ltdWxhdGlvbiIsIlNpbXVsYXRpb24iLCJSZW5kZXJlcjJEIiwiQWdlbnRUcmVlIiwicGxheSIsInJlY29uZmlndXJlIiwibGFzdFJlbmRlciIsImxhc3RGUFMiLCJmcmFtZXMiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wIiwidGltZXN0YW1wIiwidGV4dENvbnRlbnQiLCJ0b0ZpeGVkIiwicGxheVBhdXNlIiwiZGlzYWJsZWQiLCJzdGVwIiwidmFsdWUiLCJhZ2VudFR5cGUiLCJwYXJzZUludCIsIkJhc2ljQWdlbnQiLCJTdG9wQWdlbnQiLCJWT0FnZW50IiwiUlZPQWdlbnQiLCJFcnJvciIsIkNvbmZpZ3VyYXRpb25zIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sIm1hcHBpbmdzIjoia0pBSUEsaUJBSUUsV0FBWUEsRUFBcUJDLEdBQy9CQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsUUFBVUgsRUF1Qm5CLE9BcEJFLFlBQUFJLEtBQUEsU0FBS0MsR0FDSEosS0FBS0UsUUFBUUMsS0FBS0MsRUFBT0wsU0FHM0IsWUFBQU0sT0FBQSxTQUFPQyxHQUFQLFdBRUVOLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1ILE9BQ0pDLEVBQ0EsRUFBS0osUUFBUU8sOEJBQThC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SyxNQUNQTCxFQUFPTSxPQUNQc0QsSUFHSixNQUVGLElBQUssYUFDSDJHLEVBQVdsTCxLQUNUNE0sRUFBZTNILFdBQ2JYLEVBQ0EzRCxFQUFPSyxNQUNQTCxFQUFPTSxPQUNQc0QsSUFHSixNQUVGLFFBQ0UsTUFBTSxJQUFJb0ksTUFBTSxxQ0NsTGxCRSxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVQyxRQUczQyxJQUFJQyxFQUFTSixFQUF5QkUsR0FBWSxDQUdqREMsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSCxHQUFVRSxFQUFRQSxFQUFPRCxRQUFTRixHQUcvQ0csRUFBT0QsUUNqQmYsT0NGQUYsRUFBb0JLLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYTixFQUFvQlEsRUFBRUYsRUFBWUMsS0FBU1AsRUFBb0JRLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VQLEVBQW9CUSxFQUFJLENBQUNLLEVBQUtDLElBQVNMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGZCxFQUFvQmtCLEVBQUtoQixJQUNILG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDWCxPQUFPQyxlQUFlUixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFOUIsTUFBTyxXQUU3RG1CLE9BQU9DLGVBQWVSLEVBQVMsYUFBYyxDQUFFWixPQUFPLEtIRmhEVSxFQUFvQixNIiwiZmlsZSI6ImRlbW8yZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gXCIuL0lSZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBJQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgX3JlbmRlcmVyOiBJUmVuZGVyZXI7XHJcbiAgX2FnZW50czogSUFnZW50Q29sbGVjdGlvbjtcclxuXHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXI6IElSZW5kZXJlciwgYWdlbnRzOiBJQWdlbnRDb2xsZWN0aW9uKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fYWdlbnRzID0gYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgaW5pdChjb25maWc6IElDb25maWd1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdChjb25maWcuYWdlbnRzKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlcikge1xyXG4gICAgbGV0IHJhbmdlID0gMzAwO1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIGFnZW50LnVwZGF0ZShcclxuICAgICAgICBkZWx0YVQsXHJcbiAgICAgICAgdGhpcy5fYWdlbnRzLmdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuKGFnZW50LCByYW5nZSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2FnZW50cy5pbml0KHRoaXMuX2FnZW50cy5nZXRBbGwoKSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX3JlbmRlcmVyLmRyYXdBZ2VudHModGhpcy5fYWdlbnRzKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gXCIuL0lSZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyMkQgaW1wbGVtZW50cyBJUmVuZGVyZXIge1xyXG4gIF9jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgIHRoaXMuX2NvbnRleHQuZmlsbFJlY3QoXHJcbiAgICAgIDAsXHJcbiAgICAgIDAsXHJcbiAgICAgIHRoaXMuX2NvbnRleHQuY2FudmFzLndpZHRoLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy5oZWlnaHRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBkcmF3QWdlbnRzKGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZHJhd0FnZW50KGFnZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkcmF3QWdlbnQoYWdlbnQ6IElBZ2VudCk6IHZvaWQge1xyXG4gICAgbGV0IHBvc2l0aW9uID0gYWdlbnQuZ2V0UG9zaXRpb24oKTtcclxuICAgIGxldCBkaXJlY3Rpb24gPSBhZ2VudC5nZXREaXJlY3Rpb24oKTtcclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cclxuICAgIC8vIGRyYXcgYWdlbnRcclxuICAgIGlmIChhZ2VudC5nZXRJc0RvbmUoKSkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjMDBGRjAwXCI7XHJcbiAgICB9IGVsc2UgaWYgKGFnZW50LmdldElzU3R1Y2soKSkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjRkYwMDAwXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjMDAwMDAwXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5hcmMocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgYWdlbnQuUmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcblxyXG4gICAgLy8gZHJhdyBkaXJlY3Rpb25cclxuICAgIGxldCBtYWduaXR1ZGUgPSBkaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcbiAgICBpZiAobWFnbml0dWRlICE9PSAwKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQubW92ZVRvKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xyXG4gICAgICBsZXQgbmV3UG9zID0gcG9zaXRpb24uYWRkKFxyXG4gICAgICAgIGRpcmVjdGlvbi5kaXZpZGUobWFnbml0dWRlKS5tdWx0aXBseShhZ2VudC5SYWRpdXMpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKG5ld1Bvcy54LCBuZXdQb3MueSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5zdHJva2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFZlY3RvcjJmIHtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgfVxyXG5cclxuICBjb3B5KHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih2LngsIHYueSk7XHJcbiAgfVxyXG5cclxuICBhZGQodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55KTtcclxuICB9XHJcblxyXG4gIHN1YnRyYWN0KHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSk7XHJcbiAgfVxyXG5cclxuICBtdWx0aXBseShzOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAqIHMsIHRoaXMueSAqIHMpO1xyXG4gIH1cclxuXHJcbiAgZGl2aWRlKHM6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54IC8gcywgdGhpcy55IC8gcyk7XHJcbiAgfVxyXG5cclxuICBkb3QodjogVmVjdG9yMmYpIHtcclxuICAgIHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2Lnk7XHJcbiAgfVxyXG5cclxuICBtYWduaXR1ZGVTcXJkKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy54ICoqIDIgKyB0aGlzLnkgKiogMjtcclxuICB9XHJcblxyXG4gIG1hZ25pdHVkZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLm1hZ25pdHVkZVNxcmQoKSk7XHJcbiAgfVxyXG5cclxuICBub3JtYWxpc2UoKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IG0gPSB0aGlzLm1hZ25pdHVkZSgpO1xyXG4gICAgcmV0dXJuIG0gPT0gMCA/IG5ldyBWZWN0b3IyZigwLCAwKSA6IHRoaXMuZGl2aWRlKG0pO1xyXG4gIH1cclxuXHJcbiAgc2FtcGxlKG1heFJhZGl1czogbnVtYmVyKSB7XHJcbiAgICAvLyBVbmlmb3JtbHkgc2FtcGxlIHRoZSBjaXJjbGUgY2VudHJlZCBhdCB0aGlzIHBvaW50IHdpdGggcmFkaXVzIG1heFJhZGl1c1xyXG4gICAgbGV0IHJhZGl1cyA9IE1hdGguc3FydChNYXRoLnJhbmRvbSgpKSAqIG1heFJhZGl1cztcclxuICAgIGxldCBhbmdsZSA9IDIgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKTtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIHRoaXMueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSxcclxuICAgICAgdGhpcy55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2ljQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJZDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBSYWRpdXM6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgLy8gVGhpcyBhZ2VudCBjYW5ub3QgZ2V0IHN0dWNrXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIF9hZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uLm11bHRpcGx5KChkZWx0YVQgKiA2MCkgLyAxMDAwKVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcEFnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiAoZGVsdGFUICogNjApIC8gMTAwMCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBnb2FsRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgICBsZXQgaGVhZGluZyA9IHRoaXMuX3Bvc2l0aW9uLmFkZCh0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoMjApKTtcclxuXHJcbiAgICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICAgICAgYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGFnZW50LklkICE9IHRoaXMuSWQgJiYgdGhpcy5jb2xsaWRlcyhhZ2VudCwgaGVhZGluZykpIHtcclxuICAgICAgICAgIHRoaXMuX2lzU3R1Y2sgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuX2lzU3R1Y2spIHtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbi5tdWx0aXBseSgoZGVsdGFUICogNjApIC8gMTAwMClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbGxpZGVzKGFnZW50OiBJQWdlbnQsIHBvc2l0aW9uOiBWZWN0b3IyZik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgYWdlbnQuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdChwb3NpdGlvbikubWFnbml0dWRlKCkgPFxyXG4gICAgICBhZ2VudC5SYWRpdXMgKyB0aGlzLlJhZGl1c1xyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpZ3VyYXRpb24ge1xyXG4gIGFnZW50czogSUFnZW50W107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0aW9ucyB7XHJcbiAgc3RhdGljIFJhbmRvbVRvUmFuZG9tKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gcmFuZG9tIGdvYWwgcG9zaXRpb25cclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBsZXQgc3RhcnRQb3NpdGlvbnMgPSB0aGlzLnBvaXNzb25EaXNrU2FtcGxlKHdpZHRoLCBoZWlnaHQsIG4sIDUwKTtcclxuICAgIGxldCBnb2FsUG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZSh3aWR0aCwgaGVpZ2h0LCBuLCA1MCk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgc3RhcnRQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uc1tpXSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBSYW5kb21Ub0xpbmUoXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFJhbmRvbSBzdGFydCBwb3NpdGlvbiB0byBmaXhlZCBwb3NpdGlvbiBvbiBsaW5lXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZSh3aWR0aCwgaGVpZ2h0LCBuLCA1MCk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgc3RhcnRQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKCgoaSArIDEpIC8gKG4gKyAxKSkgKiB3aWR0aCwgaGVpZ2h0IC8gMiksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgQ2lyY2xlVG9DaXJjbGUoXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFBvc2l0aW9uIG9uIHJhZGl1cyBvZiBjaXJjbGUgdG8gb3Bwb3NpdGUgcG9pbnRcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBjb25zdCBjZW50cmVYID0gd2lkdGggLyAyO1xyXG4gICAgY29uc3QgY2VudHJlWSA9IGhlaWdodCAvIDI7XHJcbiAgICBjb25zdCByYWRpdXMgPSBoZWlnaHQgLyAyIC0gMjU7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYW5nbGUgPSAoMiAqIE1hdGguUEkgKiBpKSAvIG47XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZihcclxuICAgICAgICAgIGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgICAgICBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpXHJcbiAgICAgICAgKSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoXHJcbiAgICAgICAgICBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJKSxcclxuICAgICAgICAgIGNlbnRyZVkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkpXHJcbiAgICAgICAgKSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBHcmlkVG9HcmlkKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBUd28gb3Bwb3NpbmcgZ3JpZHMgb2YgYWdlbnRzIHBhc3NpbmcgdGhyb3VnaCBlYWNob3RoZXJcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBsZXQgcm93cyA9IDQ7XHJcbiAgICBsZXQgY29scyA9IE1hdGguY2VpbChuIC8gKDIgKiByb3dzKSk7XHJcbiAgICBsZXQgc3BhY2luZyA9IDkwO1xyXG4gICAgbGV0IGxlZnQgPSA1MDtcclxuICAgIGxldCByaWdodCA9IHdpZHRoIC0gbGVmdCAtIHNwYWNpbmcgKiAoY29scyAtIDEpO1xyXG4gICAgbGV0IHRvcCA9IGhlaWdodCAvIDIgLSAoc3BhY2luZyAvIDIpICogKHJvd3MgLSAxKTtcclxuXHJcbiAgICBsZXQgaWQgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzOyBpKyspIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb3dzOyBqKyspIHtcclxuICAgICAgICBsZXQgYSA9IG5ldyBWZWN0b3IyZihsZWZ0ICsgc3BhY2luZyAqIGksIHRvcCArIHNwYWNpbmcgKiBqKTtcclxuICAgICAgICBsZXQgYiA9IG5ldyBWZWN0b3IyZihyaWdodCArIHNwYWNpbmcgKiBpLCB0b3AgKyBzcGFjaW5nICogaik7XHJcblxyXG4gICAgICAgIC8vIExlZnQgZ3JpZFxyXG4gICAgICAgIGFnZW50cy5wdXNoKGFnZW50Q29uc3RydWN0b3IoaWQsIGEsIGIsIDIwKSk7XHJcbiAgICAgICAgaWQrKztcclxuICAgICAgICBpZiAoaWQgPj0gbikge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSaWdodCBncmlkXHJcbiAgICAgICAgYWdlbnRzLnB1c2goYWdlbnRDb25zdHJ1Y3RvcihpZCwgYiwgYSwgMjApKTtcclxuICAgICAgICBpZCsrO1xyXG5cclxuICAgICAgICBpZiAoaWQgPj0gbikge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpZCA+PSBuKSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcG9pc3NvbkRpc2tTYW1wbGUoXHJcbiAgICB4UmFuZ2U6IG51bWJlcixcclxuICAgIHlSYW5nZTogbnVtYmVyLFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgdGhyZXNob2xkOiBudW1iZXJcclxuICApOiBWZWN0b3IyZltdIHtcclxuICAgIGxldCBzYW1wbGVzOiBWZWN0b3IyZltdID0gW107XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgbGV0IHJlc2FtcGxlID0gdHJ1ZTtcclxuICAgICAgbGV0IHBvczogVmVjdG9yMmY7XHJcblxyXG4gICAgICB3aGlsZSAocmVzYW1wbGUpIHtcclxuICAgICAgICByZXNhbXBsZSA9IGZhbHNlO1xyXG4gICAgICAgIHBvcyA9IG5ldyBWZWN0b3IyZih4UmFuZ2UgKiBNYXRoLnJhbmRvbSgpLCB5UmFuZ2UgKiBNYXRoLnJhbmRvbSgpKTtcclxuXHJcbiAgICAgICAgc2FtcGxlcy5mb3JFYWNoKChzYW1wbGUpID0+IHtcclxuICAgICAgICAgIGlmIChwb3Muc3VidHJhY3Qoc2FtcGxlKS5tYWduaXR1ZGVTcXJkKCkgPCB0aHJlc2hvbGQgKiogMikge1xyXG4gICAgICAgICAgICByZXNhbXBsZSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNhbXBsZXMucHVzaChwb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzYW1wbGVzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmludGVyZmFjZSBOb2RlIHtcclxuICBhZ2VudDogSUFnZW50O1xyXG4gIGxlZnQ6IE5vZGU7XHJcbiAgcmlnaHQ6IE5vZGU7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZ2VudFRyZWUgaW1wbGVtZW50cyBJQWdlbnRDb2xsZWN0aW9uIHtcclxuICBwcml2YXRlIF9hZ2VudHM6IElBZ2VudFtdO1xyXG4gIHByaXZhdGUgX3Jvb3Q6IE5vZGU7XHJcblxyXG4gIGluaXQoYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgdGhpcy5fYWdlbnRzID0gYWdlbnRzO1xyXG4gICAgdGhpcy5fcm9vdCA9IHRoaXMuY29uc3RydWN0VHJlZSh0aGlzLl9hZ2VudHMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsKCk6IElBZ2VudFtdIHtcclxuICAgIHJldHVybiB0aGlzLl9hZ2VudHM7XHJcbiAgfVxyXG5cclxuICBnZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50OiBJQWdlbnQsIHJhbmdlOiBudW1iZXIpOiBJQWdlbnRbXSB7XHJcbiAgICBsZXQgbWluWCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCAtIHJhbmdlO1xyXG4gICAgbGV0IG1pblkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgLSByYW5nZTtcclxuICAgIGxldCBtYXhYID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54ICsgcmFuZ2U7XHJcbiAgICBsZXQgbWF4WSA9IGFnZW50LmdldFBvc2l0aW9uKCkueSArIHJhbmdlO1xyXG5cclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5yYW5nZVNlYXJjaCh0aGlzLl9yb290LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCB0cnVlKTtcclxuICAgIHJldHVybiBjYW5kaWRhdGVzLmZpbHRlcigob3RoZXIpID0+IG90aGVyLklkICE9PSBhZ2VudC5JZCk7XHJcbiAgfVxyXG5cclxuICBnZXROZWlnaGJvdXJzSW5SYW5nZUV1Y2xpZGVhbihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLmdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQsIHJhbmdlKTtcclxuICAgIHJldHVybiBjYW5kaWRhdGVzLmZpbHRlcihcclxuICAgICAgKG90aGVyKSA9PlxyXG4gICAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3Qob3RoZXIuZ2V0UG9zaXRpb24oKSkubWFnbml0dWRlU3FyZCgpIDw9XHJcbiAgICAgICAgcmFuZ2UgKiogMlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZvckVhY2goZnVuOiAoYWdlbnQ6IElBZ2VudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goZnVuKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0VHJlZShhZ2VudHM6IElBZ2VudFtdLCB4QXhpczogYm9vbGVhbik6IE5vZGUge1xyXG4gICAgaWYgKGFnZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1pZCA9IE1hdGguZmxvb3IoYWdlbnRzLmxlbmd0aCAvIDIpO1xyXG5cclxuICAgIGxldCBzb3J0ZWQgPSB4QXhpc1xyXG4gICAgICA/IGFnZW50cy5zb3J0KChhLCBiKSA9PiBhLmdldFBvc2l0aW9uKCkueCAtIGIuZ2V0UG9zaXRpb24oKS54KVxyXG4gICAgICA6IGFnZW50cy5zb3J0KChhLCBiKSA9PiBhLmdldFBvc2l0aW9uKCkueSAtIGIuZ2V0UG9zaXRpb24oKS55KTtcclxuXHJcbiAgICBsZXQgbGVmdCA9IHRoaXMuY29uc3RydWN0VHJlZShzb3J0ZWQuc2xpY2UoMCwgbWlkKSwgIXhBeGlzKTtcclxuICAgIGxldCByaWdodCA9IHRoaXMuY29uc3RydWN0VHJlZShcclxuICAgICAgc29ydGVkLnNsaWNlKG1pZCArIDEsIGFnZW50cy5sZW5ndGgpLFxyXG4gICAgICAheEF4aXNcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnQ6IGFnZW50c1ttaWRdLCBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmFuZ2VTZWFyY2goXHJcbiAgICByb290OiBOb2RlLFxyXG4gICAgbWluWDogbnVtYmVyLFxyXG4gICAgbWluWTogbnVtYmVyLFxyXG4gICAgbWF4WDogbnVtYmVyLFxyXG4gICAgbWF4WTogbnVtYmVyLFxyXG4gICAgeEF4aXM6IGJvb2xlYW5cclxuICApOiBJQWdlbnRbXSB7XHJcbiAgICBpZiAocm9vdCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgaWYgKHhBeGlzKSB7XHJcbiAgICAgIC8vIElmIHggPD0gbWF4WCBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeCA+PSBtaW5YIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgeSA8PSBtYXhZIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB5ID49IG1pblkgbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIGFnZW50IGlzIGluIHJhbmdlIHJhbmdlIGFkZCB0byB0aGUgcmVzdWx0XHJcbiAgICBpZiAoXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFlcclxuICAgICkge1xyXG4gICAgICByZXMucHVzaChyb290LmFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuaW50ZXJmYWNlIFZlbG9jaXR5T2JzdGFjbGUge1xyXG4gIC8vIFZlbG9jaXR5IG9iamVjdCBkZWZpbmVkIGJ5IGEgcG9pbnQgYW5kIHR3byBkaXJlY3Rpb24gdmVjdG9yc1xyXG4gIHZlcnRleDogVmVjdG9yMmY7XHJcbiAgdGFuZ2VudDE6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQyOiBWZWN0b3IyZjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZPQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIFJhZGl1czogbnVtYmVyO1xyXG4gIElkOiBudW1iZXI7XHJcblxyXG4gIE1BWF9WRUxPQ0lUWSA9IDEuMDtcclxuICBNQVhfQUNDRUxFUkFUSU9OID0gMC41O1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBuZWlnaGJvdXJzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3BlZWQgPSAwLjU7XHJcbiAgICBjb25zdCBwcmVmZXJyZWRWZWxvY2l0eSA9IHRoaXMuZ2V0UHJlZmVycmVkVmVsb2NpdHkoc3BlZWQpO1xyXG4gICAgY29uc3QgZ29hbERpc3RTcXJkID0gdGhpcy5fZ29hbFBvc2l0aW9uXHJcbiAgICAgIC5zdWJ0cmFjdCh0aGlzLmdldFBvc2l0aW9uKCkpXHJcbiAgICAgIC5tYWduaXR1ZGVTcXJkKCk7XHJcblxyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgbGV0IHNhZmUgPSB0cnVlO1xyXG4gICAgbGV0IGNvbGxpc2lvbjtcclxuICAgIGxldCBhZ2VudDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyBTa2lwIGFnZW50cyBmdXJ0aGVyIGF3YXkgdGhhbiBnb2FsXHJcbiAgICAgIGlmIChcclxuICAgICAgICBuZWlnaGJvdXJzW2ldXHJcbiAgICAgICAgICAuZ2V0UG9zaXRpb24oKVxyXG4gICAgICAgICAgLnN1YnRyYWN0KHRoaXMuZ2V0UG9zaXRpb24oKSlcclxuICAgICAgICAgIC5tYWduaXR1ZGVTcXJkKCkgPiBnb2FsRGlzdFNxcmRcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIHdoZXRoZXIgcHJlZmVycmVkIHZlbG9jaXR5IGlzIHNhZmVcclxuICAgICAgY29uc3QgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgIHRoaXMuaXNJbnNpZGUocHJlZmVycmVkVmVsb2NpdHksIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICBjb2xsaXNpb24gPSB2ZWxvY2l0eU9ic3RhY2xlO1xyXG4gICAgICAgIGFnZW50ID0gaTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHByZWZlcnJlZCB2ZWxvY2l0eSBpcyBzYWZlLCBnbyBpbiB0aGF0IGRpcmVjdGlvblxyXG4gICAgaWYgKHNhZmUpIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gcHJlZmVycmVkVmVsb2NpdHk7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKHByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbGxpc2lvbiAhPSBudWxsKSB7XHJcbiAgICAgIC8vIEVsc2UsIGNvbnNpZGVyIGNsb3Nlc3QgcG9pbnQgb24gZmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgICBjb25zdCBoYWxmcGxhbmUxID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udGFuZ2VudDEsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYWxmcGxhbmUxLm1hZ25pdHVkZSgpIDw9IHNwZWVkKSB7XHJcbiAgICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgICBjb25zdCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5pc0luc2lkZShoYWxmcGxhbmUxLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYWZlKSB7XHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBoYWxmcGxhbmUxO1xyXG4gICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoaGFsZnBsYW5lMSk7XHJcbiAgICAgICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIHNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICAgIGNvbnN0IGhhbGZQbGFuZTIgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MixcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICB0aGlzLmlzSW5zaWRlKGhhbGZQbGFuZTIsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGhhbGZQbGFuZTI7XHJcbiAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmUGxhbmUyKTtcclxuICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbHNlLCBzYW1wbGUgcmFuZG9tIHZlbG9jaXRpZXMgYW5kIHNlbGVjdCB0aGUgb25lIHdpdGggdGhlIGxlYXN0IHBlbmFsdHlcclxuICAgIGNvbnN0IHNhbXBsZXMgPSAxMDA7IC8vIG51bWJlciBvZiB2ZWxvY2l0aWVzIHRvIHRyeVxyXG4gICAgY29uc3QgdyA9IDEwMDsgLy8gcGFyYW1ldGVyIGZvciBwZW5hbHR5XHJcbiAgICBjb25zdCBnb2FsRGlzdCA9IE1hdGguc3FydChnb2FsRGlzdFNxcmQpO1xyXG4gICAgbGV0IG1pblBlbmFsdHkgPSBJbmZpbml0eTtcclxuICAgIGxldCBiZXN0VmVsb2NpdHkgPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzOyBpKyspIHtcclxuICAgICAgLy8gU2FtcGxlIHZlbG9jaXR5IGZyb20gZW50aXJlIGFsbG93ZWQgdmVsb2NpdHkgc3BhY2VcclxuICAgICAgY29uc3Qgc2FtcGxlID0gbmV3IFZlY3RvcjJmKDAsIDApLnNhbXBsZShzcGVlZCk7XHJcbiAgICAgIGxldCBtaW5UaW1lVG9Db2xsaXNpb24gPSBJbmZpbml0eTtcclxuXHJcbiAgICAgIC8vIEZpbmQgdGltZSB0byBmaXJzdCBjb2xsaXNpb25cclxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZWlnaGJvdXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgY29uc3QgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgY29uc3QgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShiKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlID09IG51bGwgfHxcclxuICAgICAgICAgIHRoaXMuaXNJbnNpZGUoc2FtcGxlLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgdGltZVRvQ29sbGlzaW9uID0gdGhpcy5nZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgICAgICAgICAgYi5nZXRQb3NpdGlvbigpLmFkZChiLmdldERpcmVjdGlvbigpKSxcclxuICAgICAgICAgICAgdGhpcy5SYWRpdXMgKyBiLlJhZGl1cyxcclxuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24sXHJcbiAgICAgICAgICAgIHNhbXBsZS5zdWJ0cmFjdChiLmdldERpcmVjdGlvbigpKVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpZiAodGltZVRvQ29sbGlzaW9uIDwgbWluVGltZVRvQ29sbGlzaW9uKSB7XHJcbiAgICAgICAgICAgIG1pblRpbWVUb0NvbGxpc2lvbiA9IHRpbWVUb0NvbGxpc2lvbjtcclxuICAgICAgICAgICAgaWYgKG1pblRpbWVUb0NvbGxpc2lvbiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHlcclxuICAgICAgbGV0IHBlbmFsdHk7XHJcbiAgICAgIGlmIChtaW5UaW1lVG9Db2xsaXNpb24gPCBnb2FsRGlzdCkge1xyXG4gICAgICAgIHBlbmFsdHkgPVxyXG4gICAgICAgICAgdyAvIG1pblRpbWVUb0NvbGxpc2lvbiArXHJcbiAgICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpOyAvLyBUUyBjb3JyZWN0bHkgaGFuZGxlcyBkaXZpZGUgYnkgemVybyBvciBpbmZpbml0eVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBlbmFsdHkgPSBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICBiZXN0VmVsb2NpdHkgPSBzYW1wbGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmVzdFZlbG9jaXR5Lm1hZ25pdHVkZSgpID09IDApIHtcclxuICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gYmVzdFZlbG9jaXR5O1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoYmVzdFZlbG9jaXR5KTtcclxuICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UHJlZmVycmVkVmVsb2NpdHkobWF4U3BlZWQ6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIGNvbnN0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgY29uc3QgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gbWF4U3BlZWQpIHtcclxuICAgICAgcmV0dXJuIGdvYWxEaXJlY3Rpb24uZGl2aWRlKGdvYWxEaXN0YW5jZSAvIG1heFNwZWVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnb2FsRGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRWZWxvY2l0eU9ic3RhY2xlKGI6IElBZ2VudCk6IFZlbG9jaXR5T2JzdGFjbGUgfCBudWxsIHtcclxuICAgIGNvbnN0IHZlbG9jaXR5QiA9IGIuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgLy8gVHJhbnNsYXRlIG9yaWdpbiB0byB0aGlzIGFnZW50J3MgcG9zaXRpb25cclxuICAgIGNvbnN0IHBvc2l0aW9uQiA9IGIuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcblxyXG4gICAgLy8gRmluZCBNaW5rb3dza2kgc3VtIG9mIGFnZW50c1xyXG4gICAgY29uc3QgY2VudHJlID0gcG9zaXRpb25CLmFkZCh2ZWxvY2l0eUIpO1xyXG4gICAgY29uc3QgcmFkaXVzID0gYi5SYWRpdXMgKyB0aGlzLlJhZGl1cztcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgYW5nbGVzXHJcbiAgICBjb25zdCBkaWZmID0gdmVsb2NpdHlCLnN1YnRyYWN0KGNlbnRyZSk7XHJcbiAgICBjb25zdCBkaXN0ID0gZGlmZi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChkaXN0IDwgcmFkaXVzKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hY29zKHJhZGl1cyAvIGRpc3QpO1xyXG4gICAgY29uc3QgcGhpID0gTWF0aC5hdGFuMihkaWZmLnksIGRpZmYueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhbmdlbnQgdmVjdG9yc1xyXG4gICAgY29uc3QgYW5nbGUxID0gcGhpICsgdGhldGE7XHJcbiAgICBjb25zdCB0YW5nZW50MSA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTEpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMSlcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYW5nbGUyID0gcGhpIC0gdGhldGE7XHJcbiAgICBjb25zdCB0YW5nZW50MiA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTIpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHZlbG9jaXR5IG9ic3RhY2xlXHJcbiAgICByZXR1cm4geyB2ZXJ0ZXg6IHZlbG9jaXR5QiwgdGFuZ2VudDE6IHRhbmdlbnQxLCB0YW5nZW50MjogdGFuZ2VudDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUoXHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yMmYsXHJcbiAgICB2ZWxvY2l0eU9ic3RhY2xlOiBWZWxvY2l0eU9ic3RhY2xlXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGaXJzdCBoYWxmLXBsYW5lXHJcbiAgICBjb25zdCBkZXRlcm1pbmFudDEgPVxyXG4gICAgICAodmVsb2NpdHlPYnN0YWNsZS50YW5nZW50MS54IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueCkgKlxyXG4gICAgICAgICh2ZWxvY2l0eS55IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueSkgLVxyXG4gICAgICAodmVsb2NpdHlPYnN0YWNsZS50YW5nZW50MS55IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueSkgKlxyXG4gICAgICAgICh2ZWxvY2l0eS54IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueCk7XHJcblxyXG4gICAgLy8gU2Vjb25kIGhhbGYtcGxhbmVcclxuICAgIGNvbnN0IGRldGVybWluYW50MiA9XHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAtXHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KTtcclxuXHJcbiAgICByZXR1cm4gZGV0ZXJtaW5hbnQxID4gMCAmJiBkZXRlcm1pbmFudDIgPCAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICBsaW5lUG9pbnQ6IFZlY3RvcjJmLFxyXG4gICAgbGluZURpcmVjdGlvbjogVmVjdG9yMmYsXHJcbiAgICBwb2ludDogVmVjdG9yMmZcclxuICApOiBWZWN0b3IyZiB7XHJcbiAgICBjb25zdCBkaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgY29uc3QgdmVjdG9yID0gcG9pbnQuc3VidHJhY3QobGluZVBvaW50KTtcclxuICAgIGNvbnN0IGRpc3RhbmNlID0gdmVjdG9yLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgcmV0dXJuIGxpbmVQb2ludC5hZGQoZGlyZWN0aW9uLm11bHRpcGx5KGRpc3RhbmNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgY2VudHJlOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgb3JpZ2luOiBWZWN0b3IyZixcclxuICAgIGRpcmVjdGlvbjogVmVjdG9yMmZcclxuICApOiBudW1iZXIge1xyXG4gICAgY29uc3QgZGVsdGEgPSBvcmlnaW4uc3VidHJhY3QoY2VudHJlKTtcclxuXHJcbiAgICBjb25zdCBhID0gZGlyZWN0aW9uLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgY29uc3QgYiA9IDIgKiBkaXJlY3Rpb24uZG90KGRlbHRhKTtcclxuICAgIGNvbnN0IGMgPSBkZWx0YS5kb3QoZGVsdGEpIC0gcmFkaXVzICoqIDI7XHJcblxyXG4gICAgY29uc3QgZGlzY3JpbSA9IGIgKiogMiAtIDQgKiBhICogYztcclxuXHJcbiAgICBpZiAoZGlzY3JpbSA8IDApIHtcclxuICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkaXN0YW5jZSA9ICgoLWIgLSBNYXRoLnNxcnQoZGlzY3JpbSkpIC8gMikgKiBhO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IDApIHtcclxuICAgICAgLy8gSW50ZXJzZWN0aW9uIGJlaGluZFxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja0lmRG9uZSgpIHtcclxuICAgIGNvbnN0IGZpbmlzaFRocmVzaG9sZCA9IDEuMDtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2dvYWxQb3NpdGlvbikubWFnbml0dWRlU3FyZCgpIDxcclxuICAgICAgZmluaXNoVGhyZXNob2xkXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmludGVyZmFjZSBWZWxvY2l0eU9ic3RhY2xlIHtcclxuICAvLyBWZWxvY2l0eSBvYmplY3QgZGVmaW5lZCBieSBhIHBvaW50IGFuZCB0d28gZGlyZWN0aW9uIHZlY3RvcnNcclxuICB2ZXJ0ZXg6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQxOiBWZWN0b3IyZjtcclxuICB0YW5nZW50MjogVmVjdG9yMmY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSVk9BZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgUmFkaXVzOiBudW1iZXI7XHJcbiAgSWQ6IG51bWJlcjtcclxuXHJcbiAgTUFYX1ZFTE9DSVRZID0gMS4wO1xyXG4gIE1BWF9BQ0NFTEVSQVRJT04gPSAwLjU7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIG5laWdoYm91cnM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzcGVlZCA9IDAuNTtcclxuICAgIGNvbnN0IHByZWZlcnJlZFZlbG9jaXR5ID0gdGhpcy5nZXRQcmVmZXJyZWRWZWxvY2l0eShzcGVlZCk7XHJcbiAgICBjb25zdCBnb2FsRGlzdFNxcmQgPSB0aGlzLl9nb2FsUG9zaXRpb25cclxuICAgICAgLnN1YnRyYWN0KHRoaXMuZ2V0UG9zaXRpb24oKSlcclxuICAgICAgLm1hZ25pdHVkZVNxcmQoKTtcclxuXHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICBsZXQgc2FmZSA9IHRydWU7XHJcbiAgICBsZXQgY29sbGlzaW9uO1xyXG4gICAgbGV0IGFnZW50O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIC8vIFNraXAgYWdlbnRzIGZ1cnRoZXIgYXdheSB0aGFuIGdvYWxcclxuICAgICAgaWYgKFxyXG4gICAgICAgIG5laWdoYm91cnNbaV1cclxuICAgICAgICAgIC5nZXRQb3NpdGlvbigpXHJcbiAgICAgICAgICAuc3VidHJhY3QodGhpcy5nZXRQb3NpdGlvbigpKVxyXG4gICAgICAgICAgLm1hZ25pdHVkZVNxcmQoKSA+IGdvYWxEaXN0U3FyZFxyXG4gICAgICApIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgd2hldGhlciBwcmVmZXJyZWQgdmVsb2NpdHkgaXMgc2FmZVxyXG4gICAgICBjb25zdCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRSZWNpcHJvY2FsVmVsb2NpdHlPYnN0YWNsZShcclxuICAgICAgICBuZWlnaGJvdXJzW2ldXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICB0aGlzLmlzSW5zaWRlKHByZWZlcnJlZFZlbG9jaXR5LCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICApIHtcclxuICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgY29sbGlzaW9uID0gdmVsb2NpdHlPYnN0YWNsZTtcclxuICAgICAgICBhZ2VudCA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcmVmZXJyZWQgdmVsb2NpdHkgaXMgc2FmZSwgZ28gaW4gdGhhdCBkaXJlY3Rpb25cclxuICAgIGlmIChzYWZlKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IHByZWZlcnJlZFZlbG9jaXR5O1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChwcmVmZXJyZWRWZWxvY2l0eSk7XHJcbiAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb2xsaXNpb24gIT0gbnVsbCkge1xyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIGZpcnN0IGhhbGYtcGxhbmVcclxuICAgICAgY29uc3QgaGFsZnBsYW5lMSA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQxLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFsZnBsYW5lMS5tYWduaXR1ZGUoKSA8PSBzcGVlZCkge1xyXG4gICAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgIT0gYWdlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0UmVjaXByb2NhbFZlbG9jaXR5T2JzdGFjbGUoXHJcbiAgICAgICAgICAgICAgbmVpZ2hib3Vyc1tpXVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5pc0luc2lkZShoYWxmcGxhbmUxLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYWZlKSB7XHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBoYWxmcGxhbmUxO1xyXG4gICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoaGFsZnBsYW5lMSk7XHJcbiAgICAgICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIHNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICAgIGNvbnN0IGhhbGZQbGFuZTIgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MixcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlKFxyXG4gICAgICAgICAgICAgIG5laWdoYm91cnNbaV1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZlBsYW5lMiwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gaGFsZlBsYW5lMjtcclxuICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhhbGZQbGFuZTIpO1xyXG4gICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVsc2UsIHNhbXBsZSByYW5kb20gdmVsb2NpdGllcyBhbmQgc2VsZWN0IHRoZSBvbmUgd2l0aCB0aGUgbGVhc3QgcGVuYWx0eVxyXG4gICAgY29uc3Qgc2FtcGxlcyA9IDEwMDsgLy8gbnVtYmVyIG9mIHZlbG9jaXRpZXMgdG8gdHJ5XHJcbiAgICBjb25zdCB3ID0gMTAwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGNvbnN0IGdvYWxEaXN0ID0gTWF0aC5zcXJ0KGdvYWxEaXN0U3FyZCk7XHJcbiAgICBsZXQgbWluUGVuYWx0eSA9IEluZmluaXR5O1xyXG4gICAgbGV0IGJlc3RWZWxvY2l0eSA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZXM7IGkrKykge1xyXG4gICAgICAvLyBTYW1wbGUgdmVsb2NpdHkgZnJvbSBlbnRpcmUgYWxsb3dlZCB2ZWxvY2l0eSBzcGFjZVxyXG4gICAgICBjb25zdCBzYW1wbGUgPSBuZXcgVmVjdG9yMmYoMCwgMCkuc2FtcGxlKHNwZWVkKTtcclxuICAgICAgbGV0IG1pblRpbWVUb0NvbGxpc2lvbiA9IEluZmluaXR5O1xyXG5cclxuICAgICAgLy8gRmluZCB0aW1lIHRvIGZpcnN0IGNvbGxpc2lvblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBjb25zdCBiID0gbmVpZ2hib3Vyc1tqXTtcclxuICAgICAgICBjb25zdCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRSZWNpcHJvY2FsVmVsb2NpdHlPYnN0YWNsZShiKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICAgIHRoaXMuaXNJbnNpZGUoc2FtcGxlLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3QgdGltZVRvQ29sbGlzaW9uID0gdGhpcy5nZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgICAgICAgICAgYi5nZXRQb3NpdGlvbigpLmFkZChiLmdldERpcmVjdGlvbigpKSxcclxuICAgICAgICAgICAgdGhpcy5SYWRpdXMgKyBiLlJhZGl1cyxcclxuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24sXHJcbiAgICAgICAgICAgIHNhbXBsZVxyXG4gICAgICAgICAgICAgIC5tdWx0aXBseSgyKVxyXG4gICAgICAgICAgICAgIC5zdWJ0cmFjdCh0aGlzLmdldERpcmVjdGlvbigpKVxyXG4gICAgICAgICAgICAgIC5zdWJ0cmFjdChiLmdldERpcmVjdGlvbigpKVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpZiAodGltZVRvQ29sbGlzaW9uIDwgbWluVGltZVRvQ29sbGlzaW9uKSB7XHJcbiAgICAgICAgICAgIG1pblRpbWVUb0NvbGxpc2lvbiA9IHRpbWVUb0NvbGxpc2lvbjtcclxuICAgICAgICAgICAgaWYgKG1pblRpbWVUb0NvbGxpc2lvbiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHlcclxuICAgICAgbGV0IHBlbmFsdHk7XHJcbiAgICAgIGlmIChtaW5UaW1lVG9Db2xsaXNpb24gPCBnb2FsRGlzdCkge1xyXG4gICAgICAgIHBlbmFsdHkgPVxyXG4gICAgICAgICAgdyAvIG1pblRpbWVUb0NvbGxpc2lvbiArXHJcbiAgICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpOyAvLyBUUyBjb3JyZWN0bHkgaGFuZGxlcyBkaXZpZGUgYnkgemVybyBvciBpbmZpbml0eVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBlbmFsdHkgPSBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICBiZXN0VmVsb2NpdHkgPSBzYW1wbGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmVzdFZlbG9jaXR5Lm1hZ25pdHVkZSgpID09IDApIHtcclxuICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gYmVzdFZlbG9jaXR5O1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoYmVzdFZlbG9jaXR5KTtcclxuICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UHJlZmVycmVkVmVsb2NpdHkobWF4U3BlZWQ6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIGNvbnN0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgY29uc3QgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gbWF4U3BlZWQpIHtcclxuICAgICAgcmV0dXJuIGdvYWxEaXJlY3Rpb24uZGl2aWRlKGdvYWxEaXN0YW5jZSAvIG1heFNwZWVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnb2FsRGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRSZWNpcHJvY2FsVmVsb2NpdHlPYnN0YWNsZShiOiBJQWdlbnQpOiBWZWxvY2l0eU9ic3RhY2xlIHwgbnVsbCB7XHJcbiAgICBjb25zdCB2ZWxvY2l0eUEgPSB0aGlzLmdldERpcmVjdGlvbigpO1xyXG4gICAgY29uc3QgdmVsb2NpdHlCID0gYi5nZXREaXJlY3Rpb24oKTtcclxuICAgIGNvbnN0IHZlcnRleCA9IHZlbG9jaXR5QS5hZGQodmVsb2NpdHlCKS5kaXZpZGUoMik7XHJcblxyXG4gICAgLy8gVHJhbnNsYXRlIG9yaWdpbiB0byB0aGlzIGFnZW50J3MgcG9zaXRpb25cclxuICAgIGNvbnN0IHBvc2l0aW9uQiA9IGIuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcblxyXG4gICAgLy8gRmluZCBNaW5rb3dza2kgc3VtIG9mIGFnZW50c1xyXG4gICAgY29uc3QgY2VudHJlID0gcG9zaXRpb25CLmFkZCh2ZWxvY2l0eUIpO1xyXG4gICAgY29uc3QgcmFkaXVzID0gYi5SYWRpdXMgKyB0aGlzLlJhZGl1cztcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgYW5nbGVzXHJcbiAgICBjb25zdCBkaWZmID0gdmVsb2NpdHlCLnN1YnRyYWN0KGNlbnRyZSk7XHJcbiAgICBjb25zdCBkaXN0ID0gZGlmZi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChkaXN0IDwgcmFkaXVzKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hY29zKHJhZGl1cyAvIGRpc3QpO1xyXG4gICAgY29uc3QgcGhpID0gTWF0aC5hdGFuMihkaWZmLnksIGRpZmYueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhbmdlbnQgdmVjdG9yc1xyXG4gICAgY29uc3QgYW5nbGUxID0gcGhpICsgdGhldGE7XHJcbiAgICBjb25zdCB0YW5nZW50MSA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTEpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMSlcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYW5nbGUyID0gcGhpIC0gdGhldGE7XHJcbiAgICBjb25zdCB0YW5nZW50MiA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTIpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHZlbG9jaXR5IG9ic3RhY2xlXHJcbiAgICByZXR1cm4geyB2ZXJ0ZXg6IHZlcnRleCwgdGFuZ2VudDE6IHRhbmdlbnQxLCB0YW5nZW50MjogdGFuZ2VudDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUoXHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yMmYsXHJcbiAgICB2ZWxvY2l0eU9ic3RhY2xlOiBWZWxvY2l0eU9ic3RhY2xlXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGaXJzdCBoYWxmLXBsYW5lXHJcbiAgICBjb25zdCBkZXRlcm1pbmFudDEgPVxyXG4gICAgICAodmVsb2NpdHlPYnN0YWNsZS50YW5nZW50MS54IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueCkgKlxyXG4gICAgICAgICh2ZWxvY2l0eS55IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueSkgLVxyXG4gICAgICAodmVsb2NpdHlPYnN0YWNsZS50YW5nZW50MS55IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueSkgKlxyXG4gICAgICAgICh2ZWxvY2l0eS54IC0gdmVsb2NpdHlPYnN0YWNsZS52ZXJ0ZXgueCk7XHJcblxyXG4gICAgLy8gU2Vjb25kIGhhbGYtcGxhbmVcclxuICAgIGNvbnN0IGRldGVybWluYW50MiA9XHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAtXHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KTtcclxuXHJcbiAgICByZXR1cm4gZGV0ZXJtaW5hbnQxID4gMCAmJiBkZXRlcm1pbmFudDIgPCAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICBsaW5lUG9pbnQ6IFZlY3RvcjJmLFxyXG4gICAgbGluZURpcmVjdGlvbjogVmVjdG9yMmYsXHJcbiAgICBwb2ludDogVmVjdG9yMmZcclxuICApOiBWZWN0b3IyZiB7XHJcbiAgICBjb25zdCBkaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgY29uc3QgdmVjdG9yID0gcG9pbnQuc3VidHJhY3QobGluZVBvaW50KTtcclxuICAgIGNvbnN0IGRpc3RhbmNlID0gdmVjdG9yLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgcmV0dXJuIGxpbmVQb2ludC5hZGQoZGlyZWN0aW9uLm11bHRpcGx5KGRpc3RhbmNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgY2VudHJlOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgb3JpZ2luOiBWZWN0b3IyZixcclxuICAgIGRpcmVjdGlvbjogVmVjdG9yMmZcclxuICApOiBudW1iZXIge1xyXG4gICAgY29uc3QgZGVsdGEgPSBvcmlnaW4uc3VidHJhY3QoY2VudHJlKTtcclxuXHJcbiAgICBjb25zdCBhID0gZGlyZWN0aW9uLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgY29uc3QgYiA9IDIgKiBkaXJlY3Rpb24uZG90KGRlbHRhKTtcclxuICAgIGNvbnN0IGMgPSBkZWx0YS5kb3QoZGVsdGEpIC0gcmFkaXVzICoqIDI7XHJcblxyXG4gICAgY29uc3QgZGlzY3JpbSA9IGIgKiogMiAtIDQgKiBhICogYztcclxuXHJcbiAgICBpZiAoZGlzY3JpbSA8IDApIHtcclxuICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkaXN0YW5jZSA9ICgoLWIgLSBNYXRoLnNxcnQoZGlzY3JpbSkpIC8gMikgKiBhO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IDApIHtcclxuICAgICAgLy8gSW50ZXJzZWN0aW9uIGJlaGluZFxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja0lmRG9uZSgpIHtcclxuICAgIGNvbnN0IGZpbmlzaFRocmVzaG9sZCA9IDEuMDtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2dvYWxQb3NpdGlvbikubWFnbml0dWRlU3FyZCgpIDxcclxuICAgICAgZmluaXNoVGhyZXNob2xkXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2ltdWxhdGlvbiB9IGZyb20gXCIuL1NpbXVsYXRpb25cIjtcclxuaW1wb3J0IHsgUmVuZGVyZXIyRCB9IGZyb20gXCIuL1JlbmRlcmVyMkRcIjtcclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgU3RvcEFnZW50IH0gZnJvbSBcIi4vU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25zIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgQWdlbnRUcmVlIH0gZnJvbSBcIi4vQWdlbnRUcmVlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuaW1wb3J0IHsgVk9BZ2VudCB9IGZyb20gXCIuL1ZPQWdlbnRcIjtcclxuaW1wb3J0IHsgUlZPQWdlbnQgfSBmcm9tIFwiLi9SVk9BZ2VudFwiO1xyXG5cclxuY29uc3QgY29uZmlnU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maWdcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IGFnZW50VHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWdlbnRUeXBlXCJcclxuKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgbnVtYmVyT2ZBZ2VudHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwibnVtYmVyT2ZBZ2VudHNcIlxyXG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgZnJhbWVyYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXJhdGVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHN0ZXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0ZXBCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKGNhbnZhcyk7XHJcbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihyZW5kZXJlciwgbmV3IEFnZW50VHJlZSgpKTtcclxudmFyIHBsYXkgPSBmYWxzZTtcclxuXHJcbi8vIGluaXRpYWxpc2Ugc2ltdWxhdGlvbiBhbmQgYmVnaW4gdXBkYXRlL3JlbmRlciBsb29wXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xyXG4gIHRoaXMucmVjb25maWd1cmUoKTtcclxuXHJcbiAgbGV0IGxhc3RSZW5kZXIgPSAwO1xyXG4gIGxldCBsYXN0RlBTID0gMDtcclxuICBsZXQgZnJhbWVzID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXA6IG51bWJlcikge1xyXG4gICAgbGV0IGRlbHRhVCA9IHRpbWVzdGFtcCAtIGxhc3RSZW5kZXI7XHJcbiAgICBsYXN0UmVuZGVyID0gdGltZXN0YW1wO1xyXG5cclxuICAgIC8vIHVwZGF0ZVxyXG4gICAgaWYgKHBsYXkpIHtcclxuICAgICAgc2ltdWxhdGlvbi51cGRhdGUoZGVsdGFUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXJcclxuICAgIHNpbXVsYXRpb24uZHJhdygpO1xyXG4gICAgZnJhbWVzKys7XHJcblxyXG4gICAgLy8gcmVjYWxjdWxhdGUgZnJhbWVyYXRlIGV2ZXJ5IDI1MG1zXHJcbiAgICBpZiAodGltZXN0YW1wIC0gbGFzdEZQUyA+PSAyNTApIHtcclxuICAgICAgZnJhbWVyYXRlLnRleHRDb250ZW50ID0gYEZQUzogJHsoXHJcbiAgICAgICAgKDEwMDAgKiBmcmFtZXMpIC9cclxuICAgICAgICAodGltZXN0YW1wIC0gbGFzdEZQUylcclxuICAgICAgKS50b0ZpeGVkKDEpfWA7XHJcblxyXG4gICAgICBmcmFtZXMgPSAwO1xyXG4gICAgICBsYXN0RlBTID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG4vLyB0b2dnbGUgcGxheS9wYXVzZVxyXG5leHBvcnQgZnVuY3Rpb24gcGxheVBhdXNlKCkge1xyXG4gIHBsYXkgPSAhcGxheTtcclxuXHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBhdXNlXCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGxheVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gc3RlcCBzaW11bGF0aW9uIGJ5IDEgZnJhbWVcclxuZXhwb3J0IGZ1bmN0aW9uIHN0ZXAoKSB7XHJcbiAgc2ltdWxhdGlvbi51cGRhdGUoMTAwMCAvIDYwKTsgLy8gQXNzdW1lcyA2MEZQU1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjb25maWd1cmUoKSB7XHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHRoaXMucGxheVBhdXNlKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb25maWcgPSBjb25maWdTZWxlY3QudmFsdWU7XHJcbiAgY29uc3QgYWdlbnRUeXBlID0gYWdlbnRUeXBlU2VsZWN0LnZhbHVlOyAvLyBUT0RPOiB3aXJlIHRoaXMgaW5cclxuICBjb25zdCBuID0gcGFyc2VJbnQobnVtYmVyT2ZBZ2VudHNJbnB1dC52YWx1ZSkgPz8gMDtcclxuXHJcbiAgLy8gU2VsZWN0IGFnZW50IGNvbnN0cnVjdG9yXHJcbiAgbGV0IGFnZW50Q29uc3RydWN0b3I7XHJcbiAgc3dpdGNoIChhZ2VudFR5cGUpIHtcclxuICAgIGNhc2UgXCJCYXNpY0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBCYXNpY0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJTdG9wQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFN0b3BBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiVk9BZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgVk9BZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiUlZPQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFJWT0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWdlbnQgbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VsZWN0IGNvbmZpZ3VyYXRpb25cclxuICBzd2l0Y2ggKGNvbmZpZykge1xyXG4gICAgY2FzZSBcIlJhbmRvbVRvUmFuZG9tXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvUmFuZG9tKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJSYW5kb21Ub0xpbmVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9MaW5lKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJDaXJjbGVUb0NpcmNsZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5DaXJjbGVUb0NpcmNsZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiR3JpZFRvR3JpZFwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5HcmlkVG9HcmlkKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNjE1KTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==