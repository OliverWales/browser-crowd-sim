var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={615:(t,i,e)=>{e.r(i),e.d(i,{init:()=>w,playPause:()=>P,reconfigure:()=>I,step:()=>b});var n=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(e){e.update(t,i._agents.getNeighboursInRangeEuclidean(e,300))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){this._renderer.clear(),this._renderer.drawAgents(this._agents)},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgents=function(t){var i=this;t.forEach((function(t){i.drawAgent(t)}))},t.prototype.drawAgent=function(t){var i=t.getPosition(),e=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var n=e.magnitude();if(0!==n){this._context.moveTo(i.x,i.y);var o=i.add(e.divide(n).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var e=Math.sqrt(Math.random())*i,n=2*Math.PI*Math.random();return new t(this.x+e*Math.cos(n),this.y+e*Math.sin(n))},t}(),s=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var e=this._goalPosition.subtract(this._position);e.magnitude()>60*t/1e3?(this._direction=e.normalise(),this._position=this._position.add(this._direction.multiply(60*t/1e3))):(this._position=this._goalPosition,this._isDone=!0)}},t}(),a=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var e=this;if(!this._isDone){var n=this._goalPosition.subtract(this._position);if(n.magnitude()>60*t/1e3){this._direction=n.normalise();var o=this._position.add(this._direction.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=e.Id&&e.collides(t,o)&&(e._isStuck=!0)})),this._isStuck||(this._position=this._position.add(this._direction.multiply(60*t/1e3)))}else this._position=this._goalPosition,this._isDone=!0}},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),c=function(){function t(){}return t.RandomToRandom=function(t,i,e,n){for(var o=[],r=this.poissonDiskSample(i,e,t,50),s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var c=n(a,r[a],s[a],20);o.push(c)}return{agents:o}},t.RandomToLine=function(t,i,e,n){for(var o=[],s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var c=n(a,s[a],new r((a+1)/(t+1)*i,e/2),20);o.push(c)}return{agents:o}},t.CircleToCircle=function(t,i,e,n){for(var o=[],s=i/2,a=e/2,c=e/2-25,u=0;u<t;u++){var h=2*Math.PI*u/t,d=n(u,new r(s+c*Math.cos(h),a+c*Math.sin(h)),new r(s+c*Math.cos(h+Math.PI),a+c*Math.sin(h+Math.PI)),20);o.push(d)}return{agents:o}},t.GridToGrid=function(t,i,e,n){for(var o=[],s=Math.ceil(t/8),a=i-50-90*(s-1),c=e/2-135,u=0,h=0;h<s;h++){for(var d=0;d<4;d++){var p=new r(50+90*h,c+90*d),g=new r(a+90*h,c+90*d);if(o.push(n(u,p,g,20)),++u>=t)break;if(o.push(n(u,g,p,20)),++u>=t)break}if(u>=t)break}return{agents:o}},t.poissonDiskSample=function(t,i,e,n){for(var o=[],s=function(){for(var e,s=!0;s;)s=!1,e=new r(t*Math.random(),i*Math.random()),o.forEach((function(t){e.subtract(t).magnitudeSqrd()<Math.pow(n,2)&&(s=!0)}));o.push(e)},a=0;a<e;a++)s();return o},t}(),u=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var e=t.getPosition().x-i,n=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,e,n,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(e){return t.getPosition().subtract(e.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var e=Math.floor(t.length/2),n=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(n.slice(0,e),!i),r=this.constructTree(n.slice(e+1,t.length),!i);return{agent:t[e],left:o,right:r}},t.prototype.rangeSearch=function(t,i,e,n,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=n&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().y>=e&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=e&&t.agent.getPosition().x<=n&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),h=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var e,n,o=.5,s=this.getPreferredVelocity(o),a=!0,c=0;c<i.length;c++)if(null!=(y=this.getVelocityObstacle(i[c]))&&this.isInside(s,y)){a=!1,e=y,n=c;break}if(a)return this._direction=s,this._position=this._position.add(s),void this.checkIfDone();if(null!=e){var u=this.getClosestPointOnLine(e.vertex,e.tangent1,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getVelocityObstacle(i[c]))&&this.isInside(u,y)){a=!1;break}if(a)return this._direction=u,this._position=this._position.add(u),void this.checkIfDone()}var h=this.getClosestPointOnLine(e.vertex,e.tangent2,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getVelocityObstacle(i[c]))&&this.isInside(h,y)){a=!1;break}if(a)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}}var d=1/0,p=new r(0,0);for(c=0;c<100;c++){for(var g=new r(0,0).sample(o),f=1/0,l=0;l<i.length;l++){var y,_=i[l];if(null==(y=this.getVelocityObstacle(_))||this.isInside(g,y)){var v=this.getFirstRayCircleIntersection(_.getPosition().add(_.getDirection()),this.Radius+_.Radius,this._position,g.subtract(_.getDirection()));if(v<f&&0==(f=v))return void this.checkIfDone()}}var x=100/f+s.subtract(g).magnitude();x<d&&(d=x,p=g)}0==p.magnitude()&&(this._isStuck=!0),this._direction=p,this._position=this._position.add(p),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),e=t.getPosition().subtract(this._position).add(i),n=t.Radius+this.Radius,o=i.subtract(e),s=o.magnitude();if(s<n)return null;var a=Math.acos(n/s),c=Math.atan2(o.y,o.x),u=c+a,h=c-a;return{vertex:i,tangent1:new r(e.x+n*Math.cos(u),e.y+n*Math.sin(u)),tangent2:new r(e.x+n*Math.cos(h),e.y+n*Math.sin(h))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),c=Math.pow(s,2)-4*r*a;if(c<0)return 1/0;var u=(-s-Math.sqrt(c))/2*r;return u<0?1/0:u},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),d=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var e,n,o=.5,s=this.getPreferredVelocity(o),a=!0,c=0;c<i.length;c++)if(null!=(y=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(s,y)){a=!1,e=y,n=c;break}if(a)return this._direction=s,this._position=this._position.add(s),void this.checkIfDone();if(null!=e){var u=this.getClosestPointOnLine(e.vertex,e.tangent1,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(u,y)){a=!1;break}if(a)return this._direction=u,this._position=this._position.add(u),void this.checkIfDone()}var h=this.getClosestPointOnLine(e.vertex,e.tangent2,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(h,y)){a=!1;break}if(a)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}}var d=1/0,p=new r(0,0);for(c=0;c<100;c++){for(var g=new r(0,0).sample(o),f=1/0,l=0;l<i.length;l++){var y,_=i[l];if(null!=(y=this.getReciprocalVelocityObstacle(_))&&this.isInside(g,y)){var v=this.getFirstRayCircleIntersection(_.getPosition().add(_.getDirection()),this.Radius+_.Radius,this._position,g.multiply(2).subtract(this.getDirection()).subtract(_.getDirection()));if(v<f&&0==(f=v))return void this.checkIfDone()}}var x=100/f+s.subtract(g).magnitude();x<d&&(d=x,p=g)}0==p.magnitude()&&(this._isStuck=!0),this._direction=p,this._position=this._position.add(p),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getReciprocalVelocityObstacle=function(t){var i=this.getDirection(),e=t.getDirection(),n=i.add(e).divide(2),o=t.getPosition().subtract(this._position).add(e),s=t.Radius+this.Radius,a=e.subtract(o),c=a.magnitude();if(c<s)return null;var u=Math.acos(s/c),h=Math.atan2(a.y,a.x),d=h+u,p=h-u;return{vertex:n,tangent1:new r(o.x+s*Math.cos(d),o.y+s*Math.sin(d)),tangent2:new r(o.x+s*Math.cos(p),o.y+s*Math.sin(p))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),c=Math.pow(s,2)-4*r*a;if(c<0)return 1/0;var u=(-s-Math.sqrt(c))/2*r;return u<0?1/0:u},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),p=document.getElementById("config"),g=document.getElementById("agentType"),f=document.getElementById("numberOfAgents"),l=document.getElementById("canvas"),y=document.getElementById("framerate"),_=document.getElementById("playButton"),v=document.getElementById("stepButton"),x=new n(new o(l),new u),m=!1;function w(){this.reconfigure();var t=0,i=0,e=0;window.requestAnimationFrame((function n(o){var r=o-t;t=o,m&&x.update(r),x.draw(),e++,o-i>=250&&(y.textContent="FPS: "+(1e3*e/(o-i)).toFixed(1),e=0,i=o),window.requestAnimationFrame(n)}))}function P(){(m=!m)?(_.textContent="Pause",v.disabled=!0):(_.textContent="Play",v.disabled=!1)}function b(){x.update(1e3/60)}function I(){var t;m&&this.playPause();var i,e=p.value,n=g.value,o=null!==(t=parseInt(f.value))&&void 0!==t?t:0;switch(n){case"BasicAgent":i=function(t,i,e,n){return new s(t,i,e,n)};break;case"StopAgent":i=function(t,i,e,n){return new a(t,i,e,n)};break;case"VOAgent":i=function(t,i,e,n){return new h(t,i,e,n)};break;case"RVOAgent":i=function(t,i,e,n){return new d(t,i,e,n)};break;default:throw new Error("Agent not implemented")}switch(e){case"RandomToRandom":x.init(c.RandomToRandom(o,l.width,l.height,i));break;case"RandomToLine":x.init(c.RandomToLine(o,l.width,l.height,i));break;case"CircleToCircle":x.init(c.CircleToCircle(o,l.width,l.height,i));break;case"GridToGrid":x.init(c.GridToGrid(o,l.width,l.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}return e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(615)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvUlZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvZGVtbzJkLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sIm5hbWVzIjpbInJlbmRlcmVyIiwiYWdlbnRzIiwidGhpcyIsIl9yZW5kZXJlciIsIl9hZ2VudHMiLCJpbml0IiwiY29uZmlnIiwidXBkYXRlIiwiZGVsdGFUIiwiZm9yRWFjaCIsImFnZW50IiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4iLCJnZXRBbGwiLCJkcmF3IiwiY2xlYXIiLCJkcmF3QWdlbnRzIiwiY2FudmFzIiwiX2NvbnRleHQiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImRyYXdBZ2VudCIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJkaXJlY3Rpb24iLCJnZXREaXJlY3Rpb24iLCJiZWdpblBhdGgiLCJnZXRJc0RvbmUiLCJzdHJva2VTdHlsZSIsImdldElzU3R1Y2siLCJhcmMiLCJ4IiwieSIsIlJhZGl1cyIsIk1hdGgiLCJQSSIsIm1hZ25pdHVkZSIsIm1vdmVUbyIsIm5ld1BvcyIsImFkZCIsImRpdmlkZSIsIm11bHRpcGx5IiwibGluZVRvIiwic3Ryb2tlIiwiY29weSIsInYiLCJWZWN0b3IyZiIsInN1YnRyYWN0IiwicyIsImRvdCIsIm1hZ25pdHVkZVNxcmQiLCJzcXJ0Iiwibm9ybWFsaXNlIiwibSIsInNhbXBsZSIsIm1heFJhZGl1cyIsInJhZGl1cyIsInJhbmRvbSIsImFuZ2xlIiwiY29zIiwic2luIiwiaWQiLCJzdGFydFBvc2l0aW9uIiwiZ29hbFBvc2l0aW9uIiwiSWQiLCJfcG9zaXRpb24iLCJfZ29hbFBvc2l0aW9uIiwiX2RpcmVjdGlvbiIsIl9pc0RvbmUiLCJnb2FsRGlyZWN0aW9uIiwiX2lzU3R1Y2siLCJjb2xsaWRlcyIsIlJhbmRvbVRvUmFuZG9tIiwibiIsImFnZW50Q29uc3RydWN0b3IiLCJzdGFydFBvc2l0aW9ucyIsInBvaXNzb25EaXNrU2FtcGxlIiwiZ29hbFBvc2l0aW9ucyIsImkiLCJwdXNoIiwiUmFuZG9tVG9MaW5lIiwiQ2lyY2xlVG9DaXJjbGUiLCJjZW50cmVYIiwiY2VudHJlWSIsIkdyaWRUb0dyaWQiLCJjb2xzIiwiY2VpbCIsInJpZ2h0IiwidG9wIiwiaiIsImEiLCJiIiwieFJhbmdlIiwieVJhbmdlIiwidGhyZXNob2xkIiwic2FtcGxlcyIsInBvcyIsInJlc2FtcGxlIiwiX3Jvb3QiLCJjb25zdHJ1Y3RUcmVlIiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhciIsInJhbmdlIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJhbmdlU2VhcmNoIiwiZmlsdGVyIiwib3RoZXIiLCJmdW4iLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImxlZnQiLCJzbGljZSIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJNQVhfVkVMT0NJVFkiLCJNQVhfQUNDRUxFUkFUSU9OIiwibmVpZ2hib3VycyIsImNvbGxpc2lvbiIsInNwZWVkIiwicHJlZmVycmVkVmVsb2NpdHkiLCJnZXRQcmVmZXJyZWRWZWxvY2l0eSIsInNhZmUiLCJ2ZWxvY2l0eU9ic3RhY2xlIiwiZ2V0VmVsb2NpdHlPYnN0YWNsZSIsImlzSW5zaWRlIiwiY2hlY2tJZkRvbmUiLCJoYWxmcGxhbmUxIiwiZ2V0Q2xvc2VzdFBvaW50T25MaW5lIiwidmVydGV4IiwidGFuZ2VudDEiLCJoYWxmUGxhbmUyIiwidGFuZ2VudDIiLCJtaW5QZW5hbHR5IiwiSW5maW5pdHkiLCJiZXN0VmVsb2NpdHkiLCJtaW5UaW1lVG9Db2xsaXNpb24iLCJ0aW1lVG9Db2xsaXNpb24iLCJnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbiIsInBlbmFsdHkiLCJtYXhTcGVlZCIsImdvYWxEaXN0YW5jZSIsInZlbG9jaXR5QiIsImNlbnRyZSIsImRpZmYiLCJkaXN0IiwidGhldGEiLCJhY29zIiwicGhpIiwiYXRhbjIiLCJhbmdsZTEiLCJhbmdsZTIiLCJ2ZWxvY2l0eSIsImRldGVybWluYW50MSIsImRldGVybWluYW50MiIsImxpbmVQb2ludCIsImxpbmVEaXJlY3Rpb24iLCJwb2ludCIsImRpc3RhbmNlIiwib3JpZ2luIiwiZGVsdGEiLCJjIiwiZGlzY3JpbSIsImdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlIiwidmVsb2NpdHlBIiwiY29uZmlnU2VsZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFnZW50VHlwZVNlbGVjdCIsIm51bWJlck9mQWdlbnRzSW5wdXQiLCJmcmFtZXJhdGUiLCJwbGF5QnV0dG9uIiwic3RlcEJ1dHRvbiIsInNpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwiUmVuZGVyZXIyRCIsIkFnZW50VHJlZSIsInBsYXkiLCJyZWNvbmZpZ3VyZSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsInZhbHVlIiwiYWdlbnRUeXBlIiwicGFyc2VJbnQiLCJCYXNpY0FnZW50IiwiU3RvcEFnZW50IiwiVk9BZ2VudCIsIlJWT0FnZW50IiwiRXJyb3IiLCJDb25maWd1cmF0aW9ucyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6ImtKQUlBLGlCQUlFLFdBQVlBLEVBQXFCQyxHQUMvQkMsS0FBS0MsVUFBWUgsRUFDakJFLEtBQUtFLFFBQVVILEVBdUJuQixPQXBCRSxZQUFBSSxLQUFBLFNBQUtDLEdBQ0hKLEtBQUtFLFFBQVFDLEtBQUtDLEVBQU9MLFNBRzNCLFlBQUFNLE9BQUEsU0FBT0MsR0FBUCxXQUVFTixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCQSxFQUFNSCxPQUNKQyxFQUNBLEVBQUtKLFFBQVFPLDhCQUE4QkQsRUFKbkMsU0FRWlIsS0FBS0UsUUFBUUMs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QVlDLEtBQVNQLEVBQW9CUSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NqRmQsRUFBb0JrQixFQUFLaEIsSUFDSCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ1gsT0FBT0MsZUFBZVIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRTlCLE1BQU8sV0FFN0RtQixPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRVosT0FBTyxLSEZoRFUsRUFBb0IsTSIsImZpbGUiOiJkZW1vMmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gIF9yZW5kZXJlcjogSVJlbmRlcmVyO1xyXG4gIF9hZ2VudHM6IElBZ2VudENvbGxlY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIsIGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICB9XHJcblxyXG4gIGluaXQoY29uZmlnOiBJQ29uZmlndXJhdGlvbikge1xyXG4gICAgdGhpcy5fYWdlbnRzLmluaXQoY29uZmlnLmFnZW50cyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpIHtcclxuICAgIGxldCByYW5nZSA9IDMwMDtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICBhZ2VudC51cGRhdGUoXHJcbiAgICAgICAgZGVsdGFULFxyXG4gICAgICAgIHRoaXMuX2FnZW50cy5nZXROZWlnaGJvdXJzSW5SYW5nZUV1Y2xpZGVhbihhZ2VudCwgcmFuZ2UpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdCh0aGlzLl9hZ2VudHMuZ2V0QWxsKCkpO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnRzKHRoaXMuX2FnZW50cyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50cyhhZ2VudHM6IElBZ2VudENvbGxlY3Rpb24pIHtcclxuICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLmRyYXdBZ2VudChhZ2VudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpOiB2b2lkIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICBpZiAoYWdlbnQuZ2V0SXNEb25lKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwRkYwMFwiO1xyXG4gICAgfSBlbHNlIGlmIChhZ2VudC5nZXRJc1N0dWNrKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0ZGMDAwMFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBsZXQgbWFnbml0dWRlID0gZGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKG1hZ25pdHVkZSAhPT0gMCkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvc2l0aW9uLmFkZChcclxuICAgICAgICBkaXJlY3Rpb24uZGl2aWRlKG1hZ25pdHVkZSkubXVsdGlwbHkoYWdlbnQuUmFkaXVzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhuZXdQb3MueCwgbmV3UG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBWZWN0b3IyZiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gIH1cclxuXHJcbiAgY29weSh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodi54LCB2LnkpO1xyXG4gIH1cclxuXHJcbiAgYWRkKHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBzdWJ0cmFjdCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG4gIH1cclxuXHJcbiAgbXVsdGlwbHkoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuICB9XHJcblxyXG4gIGRpdmlkZShzOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAvIHMsIHRoaXMueSAvIHMpO1xyXG4gIH1cclxuXHJcbiAgZG90KHY6IFZlY3RvcjJmKSB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlU3FyZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDI7XHJcbiAgfVxyXG5cclxuICBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5tYWduaXR1ZGVTcXJkKCkpO1xyXG4gIH1cclxuXHJcbiAgbm9ybWFsaXNlKCk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBtID0gdGhpcy5tYWduaXR1ZGUoKTtcclxuICAgIHJldHVybiBtID09IDAgPyBuZXcgVmVjdG9yMmYoMCwgMCkgOiB0aGlzLmRpdmlkZShtKTtcclxuICB9XHJcblxyXG4gIHNhbXBsZShtYXhSYWRpdXM6IG51bWJlcikge1xyXG4gICAgLy8gVW5pZm9ybWx5IHNhbXBsZSB0aGUgY2lyY2xlIGNlbnRyZWQgYXQgdGhpcyBwb2ludCB3aXRoIHJhZGl1cyBtYXhSYWRpdXNcclxuICAgIGxldCByYWRpdXMgPSBNYXRoLnNxcnQoTWF0aC5yYW5kb20oKSkgKiBtYXhSYWRpdXM7XHJcbiAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKFxyXG4gICAgICB0aGlzLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgIHRoaXMueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIC8vIFRoaXMgYWdlbnQgY2Fubm90IGdldCBzdHVja1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGdvYWxEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKFxyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbi5tdWx0aXBseSgoZGVsdGFUICogNjApIC8gMTAwMClcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3BBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fZGlyZWN0aW9uLm11bHRpcGx5KDIwKSk7XHJcblxyXG4gICAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICAgIGlmIChhZ2VudC5JZCAhPSB0aGlzLklkICYmIHRoaXMuY29sbGlkZXMoYWdlbnQsIGhlYWRpbmcpKSB7XHJcbiAgICAgICAgICB0aGlzLl9pc1N0dWNrID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLl9pc1N0dWNrKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlcyhhZ2VudDogSUFnZW50LCBwb3NpdGlvbjogVmVjdG9yMmYpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3QocG9zaXRpb24pLm1hZ25pdHVkZSgpIDxcclxuICAgICAgYWdlbnQuUmFkaXVzICsgdGhpcy5SYWRpdXNcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZSh3aWR0aCwgaGVpZ2h0LCBuLCA1MCk7XHJcbiAgICBsZXQgZ29hbFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGxldCBzdGFydFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZigoKGkgKyAxKSAvIChuICsgMSkpICogd2lkdGgsIGhlaWdodCAvIDIpLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBQb3NpdGlvbiBvbiByYWRpdXMgb2YgY2lyY2xlIHRvIG9wcG9zaXRlIHBvaW50XHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3QgY2VudHJlWCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGNlbnRyZVkgPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzID0gaGVpZ2h0IC8gMiAtIDI1O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuZ2xlID0gKDIgKiBNYXRoLlBJICogaSkgLyBuO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoXHJcbiAgICAgICAgICBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgR3JpZFRvR3JpZChcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gVHdvIG9wcG9zaW5nIGdyaWRzIG9mIGFnZW50cyBwYXNzaW5nIHRocm91Z2ggZWFjaG90aGVyXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHJvd3MgPSA0O1xyXG4gICAgbGV0IGNvbHMgPSBNYXRoLmNlaWwobiAvICgyICogcm93cykpO1xyXG4gICAgbGV0IHNwYWNpbmcgPSA5MDtcclxuICAgIGxldCBsZWZ0ID0gNTA7XHJcbiAgICBsZXQgcmlnaHQgPSB3aWR0aCAtIGxlZnQgLSBzcGFjaW5nICogKGNvbHMgLSAxKTtcclxuICAgIGxldCB0b3AgPSBoZWlnaHQgLyAyIC0gKHNwYWNpbmcgLyAyKSAqIChyb3dzIC0gMSk7XHJcblxyXG4gICAgbGV0IGlkID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93czsgaisrKSB7XHJcbiAgICAgICAgbGV0IGEgPSBuZXcgVmVjdG9yMmYobGVmdCArIHNwYWNpbmcgKiBpLCB0b3AgKyBzcGFjaW5nICogaik7XHJcbiAgICAgICAgbGV0IGIgPSBuZXcgVmVjdG9yMmYocmlnaHQgKyBzcGFjaW5nICogaSwgdG9wICsgc3BhY2luZyAqIGopO1xyXG5cclxuICAgICAgICAvLyBMZWZ0IGdyaWRcclxuICAgICAgICBhZ2VudHMucHVzaChhZ2VudENvbnN0cnVjdG9yKGlkLCBhLCBiLCAyMCkpO1xyXG4gICAgICAgIGlkKys7XHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmlnaHQgZ3JpZFxyXG4gICAgICAgIGFnZW50cy5wdXNoKGFnZW50Q29uc3RydWN0b3IoaWQsIGIsIGEsIDIwKSk7XHJcbiAgICAgICAgaWQrKztcclxuXHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaWQgPj0gbikge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHBvaXNzb25EaXNrU2FtcGxlKFxyXG4gICAgeFJhbmdlOiBudW1iZXIsXHJcbiAgICB5UmFuZ2U6IG51bWJlcixcclxuICAgIG46IG51bWJlcixcclxuICAgIHRocmVzaG9sZDogbnVtYmVyXHJcbiAgKTogVmVjdG9yMmZbXSB7XHJcbiAgICBsZXQgc2FtcGxlczogVmVjdG9yMmZbXSA9IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGxldCByZXNhbXBsZSA9IHRydWU7XHJcbiAgICAgIGxldCBwb3M6IFZlY3RvcjJmO1xyXG5cclxuICAgICAgd2hpbGUgKHJlc2FtcGxlKSB7XHJcbiAgICAgICAgcmVzYW1wbGUgPSBmYWxzZTtcclxuICAgICAgICBwb3MgPSBuZXcgVmVjdG9yMmYoeFJhbmdlICogTWF0aC5yYW5kb20oKSwgeVJhbmdlICogTWF0aC5yYW5kb20oKSk7XHJcblxyXG4gICAgICAgIHNhbXBsZXMuZm9yRWFjaCgoc2FtcGxlKSA9PiB7XHJcbiAgICAgICAgICBpZiAocG9zLnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlU3FyZCgpIDwgdGhyZXNob2xkICoqIDIpIHtcclxuICAgICAgICAgICAgcmVzYW1wbGUgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzYW1wbGVzLnB1c2gocG9zKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2FtcGxlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5pbnRlcmZhY2UgTm9kZSB7XHJcbiAgYWdlbnQ6IElBZ2VudDtcclxuICBsZWZ0OiBOb2RlO1xyXG4gIHJpZ2h0OiBOb2RlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWdlbnRUcmVlIGltcGxlbWVudHMgSUFnZW50Q29sbGVjdGlvbiB7XHJcbiAgcHJpdmF0ZSBfYWdlbnRzOiBJQWdlbnRbXTtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICAgIHRoaXMuX3Jvb3QgPSB0aGlzLmNvbnN0cnVjdFRyZWUodGhpcy5fYWdlbnRzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldEFsbCgpOiBJQWdlbnRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IG1pblggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggLSByYW5nZTtcclxuICAgIGxldCBtaW5ZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWF4WCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCArIHJhbmdlO1xyXG4gICAgbGV0IG1heFkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgKyByYW5nZTtcclxuXHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMucmFuZ2VTZWFyY2godGhpcy5fcm9vdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoKG90aGVyKSA9PiBvdGhlci5JZCAhPT0gYWdlbnQuSWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4oYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoXHJcbiAgICAgIChvdGhlcikgPT5cclxuICAgICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KG90aGVyLmdldFBvc2l0aW9uKCkpLm1hZ25pdHVkZVNxcmQoKSA8PVxyXG4gICAgICAgIHJhbmdlICoqIDJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGZ1bjogKGFnZW50OiBJQWdlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKGZ1bik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdFRyZWUoYWdlbnRzOiBJQWdlbnRbXSwgeEF4aXM6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGlmIChhZ2VudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtaWQgPSBNYXRoLmZsb29yKGFnZW50cy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBsZXQgc29ydGVkID0geEF4aXNcclxuICAgICAgPyBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnggLSBiLmdldFBvc2l0aW9uKCkueClcclxuICAgICAgOiBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnkgLSBiLmdldFBvc2l0aW9uKCkueSk7XHJcblxyXG4gICAgbGV0IGxlZnQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoc29ydGVkLnNsaWNlKDAsIG1pZCksICF4QXhpcyk7XHJcbiAgICBsZXQgcmlnaHQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoXHJcbiAgICAgIHNvcnRlZC5zbGljZShtaWQgKyAxLCBhZ2VudHMubGVuZ3RoKSxcclxuICAgICAgIXhBeGlzXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB7IGFnZW50OiBhZ2VudHNbbWlkXSwgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJhbmdlU2VhcmNoKFxyXG4gICAgcm9vdDogTm9kZSxcclxuICAgIG1pblg6IG51bWJlcixcclxuICAgIG1pblk6IG51bWJlcixcclxuICAgIG1heFg6IG51bWJlcixcclxuICAgIG1heFk6IG51bWJlcixcclxuICAgIHhBeGlzOiBib29sZWFuXHJcbiAgKTogSUFnZW50W10ge1xyXG4gICAgaWYgKHJvb3QgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlczogSUFnZW50W10gPSBbXTtcclxuICAgIGlmICh4QXhpcykge1xyXG4gICAgICAvLyBJZiB4IDw9IG1heFggbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHggPj0gbWluWCBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIHkgPD0gbWF4WSBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeSA+PSBtaW5ZIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBhZ2VudCBpcyBpbiByYW5nZSByYW5nZSBhZGQgdG8gdGhlIHJlc3VsdFxyXG4gICAgaWYgKFxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkgJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZXHJcbiAgICApIHtcclxuICAgICAgcmVzLnB1c2gocm9vdC5hZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmludGVyZmFjZSBWZWxvY2l0eU9ic3RhY2xlIHtcclxuICAvLyBWZWxvY2l0eSBvYmplY3QgZGVmaW5lZCBieSBhIHBvaW50IGFuZCB0d28gZGlyZWN0aW9uIHZlY3RvcnNcclxuICB2ZXJ0ZXg6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQxOiBWZWN0b3IyZjtcclxuICB0YW5nZW50MjogVmVjdG9yMmY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWT0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBSYWRpdXM6IG51bWJlcjtcclxuICBJZDogbnVtYmVyO1xyXG5cclxuICBNQVhfVkVMT0NJVFkgPSAxLjA7XHJcbiAgTUFYX0FDQ0VMRVJBVElPTiA9IDAuNTtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX2lzU3R1Y2s6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNTdHVjaztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgbmVpZ2hib3VyczogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICAgIGxldCBzcGVlZCA9IDAuNTtcclxuICAgIGxldCBwcmVmZXJyZWRWZWxvY2l0eSA9IHRoaXMuZ2V0UHJlZmVycmVkVmVsb2NpdHkoc3BlZWQpO1xyXG5cclxuICAgIGxldCBzYWZlID0gdHJ1ZTtcclxuICAgIGxldCBjb2xsaXNpb247XHJcbiAgICBsZXQgYWdlbnQ7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICB0aGlzLmlzSW5zaWRlKHByZWZlcnJlZFZlbG9jaXR5LCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICApIHtcclxuICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgY29sbGlzaW9uID0gdmVsb2NpdHlPYnN0YWNsZTtcclxuICAgICAgICBhZ2VudCA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcmVmZXJyZWQgdmVsb2NpdHkgaXMgc2FmZSwgZ28gaW4gdGhhdCBkaXJlY3Rpb25cclxuICAgIGlmIChzYWZlKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IHByZWZlcnJlZFZlbG9jaXR5O1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChwcmVmZXJyZWRWZWxvY2l0eSk7XHJcbiAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb2xsaXNpb24gIT0gbnVsbCkge1xyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIGZpcnN0IGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhhbGZwbGFuZTEgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MSxcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5pc0luc2lkZShoYWxmcGxhbmUxLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYWZlKSB7XHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBoYWxmcGxhbmUxO1xyXG4gICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoaGFsZnBsYW5lMSk7XHJcbiAgICAgICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIHNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICAgIGxldCBoYWxmUGxhbmUyID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udGFuZ2VudDIsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYWxmcGxhbmUxLm1hZ25pdHVkZSgpIDw9IHNwZWVkKSB7XHJcbiAgICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZlBsYW5lMiwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gaGFsZlBsYW5lMjtcclxuICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhhbGZQbGFuZTIpO1xyXG4gICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVsc2UsIHNhbXBsZSByYW5kb20gdmVsb2NpdGllcyBhbmQgc2VsZWN0IHRoZSBvbmUgd2l0aCB0aGUgbGVhc3QgcGVuYWx0eVxyXG4gICAgbGV0IHNhbXBsZXMgPSAxMDA7IC8vIG51bWJlciBvZiB2ZWxvY2l0aWVzIHRvIHRyeVxyXG4gICAgbGV0IHcgPSAxMDA7IC8vIHBhcmFtZXRlciBmb3IgcGVuYWx0eVxyXG4gICAgbGV0IG1pblBlbmFsdHkgPSBJbmZpbml0eTtcclxuICAgIGxldCBiZXN0VmVsb2NpdHkgPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzOyBpKyspIHtcclxuICAgICAgLy8gU2FtcGxlIHZlbG9jaXR5IGZyb20gZW50aXJlIGFsbG93ZWQgdmVsb2NpdHkgc3BhY2VcclxuICAgICAgbGV0IHNhbXBsZSA9IG5ldyBWZWN0b3IyZigwLCAwKS5zYW1wbGUoc3BlZWQpO1xyXG4gICAgICBsZXQgbWluVGltZVRvQ29sbGlzaW9uID0gSW5maW5pdHk7XHJcblxyXG4gICAgICAvLyBGaW5kIHRpbWUgdG8gZmlyc3QgY29sbGlzaW9uXHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIGxldCBiID0gbmVpZ2hib3Vyc1tqXTtcclxuICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShiKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlID09IG51bGwgfHxcclxuICAgICAgICAgIHRoaXMuaXNJbnNpZGUoc2FtcGxlLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbGV0IHRpbWVUb0NvbGxpc2lvbiA9IHRoaXMuZ2V0Rmlyc3RSYXlDaXJjbGVJbnRlcnNlY3Rpb24oXHJcbiAgICAgICAgICAgIGIuZ2V0UG9zaXRpb24oKS5hZGQoYi5nZXREaXJlY3Rpb24oKSksXHJcbiAgICAgICAgICAgIHRoaXMuUmFkaXVzICsgYi5SYWRpdXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLFxyXG4gICAgICAgICAgICBzYW1wbGUuc3VidHJhY3QoYi5nZXREaXJlY3Rpb24oKSlcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgaWYgKHRpbWVUb0NvbGxpc2lvbiA8IG1pblRpbWVUb0NvbGxpc2lvbikge1xyXG4gICAgICAgICAgICBtaW5UaW1lVG9Db2xsaXNpb24gPSB0aW1lVG9Db2xsaXNpb247XHJcbiAgICAgICAgICAgIGlmIChtaW5UaW1lVG9Db2xsaXNpb24gPT0gMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBwZW5hbHR5XHJcbiAgICAgIGxldCBwZW5hbHR5ID1cclxuICAgICAgICB3IC8gbWluVGltZVRvQ29sbGlzaW9uICsgcHJlZmVycmVkVmVsb2NpdHkuc3VidHJhY3Qoc2FtcGxlKS5tYWduaXR1ZGUoKTsgLy8gVFMgY29ycmVjdGx5IGhhbmRsZXMgZGl2aWRlIGJ5IHplcm8gb3IgaW5maW5pdHlcclxuICAgICAgaWYgKHBlbmFsdHkgPCBtaW5QZW5hbHR5KSB7XHJcbiAgICAgICAgbWluUGVuYWx0eSA9IHBlbmFsdHk7XHJcbiAgICAgICAgYmVzdFZlbG9jaXR5ID0gc2FtcGxlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJlc3RWZWxvY2l0eS5tYWduaXR1ZGUoKSA9PSAwKSB7XHJcbiAgICAgIHRoaXMuX2lzU3R1Y2sgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IGJlc3RWZWxvY2l0eTtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGJlc3RWZWxvY2l0eSk7XHJcbiAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFByZWZlcnJlZFZlbG9jaXR5KG1heFNwZWVkOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gbWF4U3BlZWQpIHtcclxuICAgICAgcmV0dXJuIGdvYWxEaXJlY3Rpb24uZGl2aWRlKGdvYWxEaXN0YW5jZSAvIG1heFNwZWVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnb2FsRGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRWZWxvY2l0eU9ic3RhY2xlKGI6IElBZ2VudCk6IFZlbG9jaXR5T2JzdGFjbGUgfCBudWxsIHtcclxuICAgIGxldCB2ZWxvY2l0eUIgPSBiLmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIC8vIFRyYW5zbGF0ZSBvcmlnaW4gdG8gdGhpcyBhZ2VudCdzIHBvc2l0aW9uXHJcbiAgICBsZXQgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBsZXQgY2VudHJlID0gcG9zaXRpb25CLmFkZCh2ZWxvY2l0eUIpO1xyXG4gICAgbGV0IHJhZGl1cyA9IGIuUmFkaXVzICsgdGhpcy5SYWRpdXM7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGFuZ2xlc1xyXG4gICAgbGV0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGxldCBkaXN0ID0gZGlmZi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChkaXN0IDwgcmFkaXVzKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aGV0YSA9IE1hdGguYWNvcyhyYWRpdXMgLyBkaXN0KTtcclxuICAgIGxldCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBsZXQgYW5nbGUxID0gcGhpICsgdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDEgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUxKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTEpXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGxldCB0YW5nZW50MiA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTIpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHZlbG9jaXR5IG9ic3RhY2xlXHJcbiAgICByZXR1cm4geyB2ZXJ0ZXg6IHZlbG9jaXR5QiwgdGFuZ2VudDE6IHRhbmdlbnQxLCB0YW5nZW50MjogdGFuZ2VudDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUoXHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yMmYsXHJcbiAgICB2ZWxvY2l0eU9ic3RhY2xlOiBWZWxvY2l0eU9ic3RhY2xlXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGaXJzdCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQxID1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDEueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpICpcclxuICAgICAgICAodmVsb2NpdHkueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpIC1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDEueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpICpcclxuICAgICAgICAodmVsb2NpdHkueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpO1xyXG5cclxuICAgIC8vIFNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQyID1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDIueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpICpcclxuICAgICAgICAodmVsb2NpdHkueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpIC1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDIueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpICpcclxuICAgICAgICAodmVsb2NpdHkueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpO1xyXG5cclxuICAgIHJldHVybiBkZXRlcm1pbmFudDEgPiAwICYmIGRldGVybWluYW50MiA8IDA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgIGxpbmVQb2ludDogVmVjdG9yMmYsXHJcbiAgICBsaW5lRGlyZWN0aW9uOiBWZWN0b3IyZixcclxuICAgIHBvaW50OiBWZWN0b3IyZlxyXG4gICk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBkaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgbGV0IHZlY3RvciA9IHBvaW50LnN1YnRyYWN0KGxpbmVQb2ludCk7XHJcbiAgICBsZXQgZGlzdGFuY2UgPSB2ZWN0b3IuZG90KGRpcmVjdGlvbik7XHJcbiAgICByZXR1cm4gbGluZVBvaW50LmFkZChkaXJlY3Rpb24ubXVsdGlwbHkoZGlzdGFuY2UpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Rmlyc3RSYXlDaXJjbGVJbnRlcnNlY3Rpb24oXHJcbiAgICBjZW50cmU6IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXIsXHJcbiAgICBvcmlnaW46IFZlY3RvcjJmLFxyXG4gICAgZGlyZWN0aW9uOiBWZWN0b3IyZlxyXG4gICk6IG51bWJlciB7XHJcbiAgICBsZXQgZGVsdGEgPSBvcmlnaW4uc3VidHJhY3QoY2VudHJlKTtcclxuXHJcbiAgICBsZXQgYSA9IGRpcmVjdGlvbi5kb3QoZGlyZWN0aW9uKTtcclxuICAgIGxldCBiID0gMiAqIGRpcmVjdGlvbi5kb3QoZGVsdGEpO1xyXG4gICAgbGV0IGMgPSBkZWx0YS5kb3QoZGVsdGEpIC0gcmFkaXVzICoqIDI7XHJcblxyXG4gICAgbGV0IGRpc2NyaW0gPSBiICoqIDIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgaWYgKGRpc2NyaW0gPCAwKSB7XHJcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGRpc3RhbmNlID0gKCgtYiAtIE1hdGguc3FydChkaXNjcmltKSkgLyAyKSAqIGE7XHJcblxyXG4gICAgaWYgKGRpc3RhbmNlIDwgMCkge1xyXG4gICAgICAvLyBJbnRlcnNlY3Rpb24gYmVoaW5kXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGlzdGFuY2U7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrSWZEb25lKCkge1xyXG4gICAgbGV0IGZpbmlzaFRocmVzaG9sZCA9IDEuMDtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2dvYWxQb3NpdGlvbikubWFnbml0dWRlU3FyZCgpIDxcclxuICAgICAgZmluaXNoVGhyZXNob2xkXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmludGVyZmFjZSBWZWxvY2l0eU9ic3RhY2xlIHtcclxuICAvLyBWZWxvY2l0eSBvYmplY3QgZGVmaW5lZCBieSBhIHBvaW50IGFuZCB0d28gZGlyZWN0aW9uIHZlY3RvcnNcclxuICB2ZXJ0ZXg6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQxOiBWZWN0b3IyZjtcclxuICB0YW5nZW50MjogVmVjdG9yMmY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSVk9BZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgUmFkaXVzOiBudW1iZXI7XHJcbiAgSWQ6IG51bWJlcjtcclxuXHJcbiAgTUFYX1ZFTE9DSVRZID0gMS4wO1xyXG4gIE1BWF9BQ0NFTEVSQVRJT04gPSAwLjU7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIG5laWdoYm91cnM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICBsZXQgc3BlZWQgPSAwLjU7XHJcbiAgICBsZXQgcHJlZmVycmVkVmVsb2NpdHkgPSB0aGlzLmdldFByZWZlcnJlZFZlbG9jaXR5KHNwZWVkKTtcclxuXHJcbiAgICBsZXQgc2FmZSA9IHRydWU7XHJcbiAgICBsZXQgY29sbGlzaW9uO1xyXG4gICAgbGV0IGFnZW50O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRSZWNpcHJvY2FsVmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgIHRoaXMuaXNJbnNpZGUocHJlZmVycmVkVmVsb2NpdHksIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICBjb2xsaXNpb24gPSB2ZWxvY2l0eU9ic3RhY2xlO1xyXG4gICAgICAgIGFnZW50ID0gaTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHByZWZlcnJlZCB2ZWxvY2l0eSBpcyBzYWZlLCBnbyBpbiB0aGF0IGRpcmVjdGlvblxyXG4gICAgaWYgKHNhZmUpIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gcHJlZmVycmVkVmVsb2NpdHk7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKHByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbGxpc2lvbiAhPSBudWxsKSB7XHJcbiAgICAgIC8vIEVsc2UsIGNvbnNpZGVyIGNsb3Nlc3QgcG9pbnQgb24gZmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgICBsZXQgaGFsZnBsYW5lMSA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQxLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFsZnBsYW5lMS5tYWduaXR1ZGUoKSA8PSBzcGVlZCkge1xyXG4gICAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgIT0gYWdlbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlKFxyXG4gICAgICAgICAgICAgIG5laWdoYm91cnNbaV1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZnBsYW5lMSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gaGFsZnBsYW5lMTtcclxuICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhhbGZwbGFuZTEpO1xyXG4gICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBzZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgICBsZXQgaGFsZlBsYW5lMiA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQyLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFsZnBsYW5lMS5tYWduaXR1ZGUoKSA8PSBzcGVlZCkge1xyXG4gICAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgIT0gYWdlbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlKFxyXG4gICAgICAgICAgICAgIG5laWdoYm91cnNbaV1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZlBsYW5lMiwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gaGFsZlBsYW5lMjtcclxuICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhhbGZQbGFuZTIpO1xyXG4gICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVsc2UsIHNhbXBsZSByYW5kb20gdmVsb2NpdGllcyBhbmQgc2VsZWN0IHRoZSBvbmUgd2l0aCB0aGUgbGVhc3QgcGVuYWx0eVxyXG4gICAgbGV0IHNhbXBsZXMgPSAxMDA7IC8vIG51bWJlciBvZiB2ZWxvY2l0aWVzIHRvIHRyeVxyXG4gICAgbGV0IHcgPSAxMDA7IC8vIHBhcmFtZXRlciBmb3IgcGVuYWx0eVxyXG4gICAgbGV0IG1pblBlbmFsdHkgPSBJbmZpbml0eTtcclxuICAgIGxldCBiZXN0VmVsb2NpdHkgPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzOyBpKyspIHtcclxuICAgICAgLy8gU2FtcGxlIHZlbG9jaXR5IGZyb20gZW50aXJlIGFsbG93ZWQgdmVsb2NpdHkgc3BhY2VcclxuICAgICAgbGV0IHNhbXBsZSA9IG5ldyBWZWN0b3IyZigwLCAwKS5zYW1wbGUoc3BlZWQpO1xyXG4gICAgICBsZXQgbWluVGltZVRvQ29sbGlzaW9uID0gSW5maW5pdHk7XHJcblxyXG4gICAgICAvLyBGaW5kIHRpbWUgdG8gZmlyc3QgY29sbGlzaW9uXHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIGxldCBiID0gbmVpZ2hib3Vyc1tqXTtcclxuICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0UmVjaXByb2NhbFZlbG9jaXR5T2JzdGFjbGUoYik7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSAhPSBudWxsICYmXHJcbiAgICAgICAgICB0aGlzLmlzSW5zaWRlKHNhbXBsZSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGxldCB0aW1lVG9Db2xsaXNpb24gPSB0aGlzLmdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgICAgICBiLmdldFBvc2l0aW9uKCkuYWRkKGIuZ2V0RGlyZWN0aW9uKCkpLFxyXG4gICAgICAgICAgICB0aGlzLlJhZGl1cyArIGIuUmFkaXVzLFxyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbixcclxuICAgICAgICAgICAgc2FtcGxlXHJcbiAgICAgICAgICAgICAgLm11bHRpcGx5KDIpXHJcbiAgICAgICAgICAgICAgLnN1YnRyYWN0KHRoaXMuZ2V0RGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICAgICAgLnN1YnRyYWN0KGIuZ2V0RGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGlmICh0aW1lVG9Db2xsaXNpb24gPCBtaW5UaW1lVG9Db2xsaXNpb24pIHtcclxuICAgICAgICAgICAgbWluVGltZVRvQ29sbGlzaW9uID0gdGltZVRvQ29sbGlzaW9uO1xyXG4gICAgICAgICAgICBpZiAobWluVGltZVRvQ29sbGlzaW9uID09IDApIHtcclxuICAgICAgICAgICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgcGVuYWx0eVxyXG4gICAgICBsZXQgcGVuYWx0eSA9XHJcbiAgICAgICAgdyAvIG1pblRpbWVUb0NvbGxpc2lvbiArIHByZWZlcnJlZFZlbG9jaXR5LnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlKCk7IC8vIFRTIGNvcnJlY3RseSBoYW5kbGVzIGRpdmlkZSBieSB6ZXJvIG9yIGluZmluaXR5XHJcbiAgICAgIGlmIChwZW5hbHR5IDwgbWluUGVuYWx0eSkge1xyXG4gICAgICAgIG1pblBlbmFsdHkgPSBwZW5hbHR5O1xyXG4gICAgICAgIGJlc3RWZWxvY2l0eSA9IHNhbXBsZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChiZXN0VmVsb2NpdHkubWFnbml0dWRlKCkgPT0gMCkge1xyXG4gICAgICB0aGlzLl9pc1N0dWNrID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBiZXN0VmVsb2NpdHk7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChiZXN0VmVsb2NpdHkpO1xyXG4gICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQcmVmZXJyZWRWZWxvY2l0eShtYXhTcGVlZDogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IG1heFNwZWVkKSB7XHJcbiAgICAgIHJldHVybiBnb2FsRGlyZWN0aW9uLmRpdmlkZShnb2FsRGlzdGFuY2UgLyBtYXhTcGVlZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ29hbERpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UmVjaXByb2NhbFZlbG9jaXR5T2JzdGFjbGUoYjogSUFnZW50KTogVmVsb2NpdHlPYnN0YWNsZSB8IG51bGwge1xyXG4gICAgbGV0IHZlbG9jaXR5QSA9IHRoaXMuZ2V0RGlyZWN0aW9uKCk7XHJcbiAgICBsZXQgdmVsb2NpdHlCID0gYi5nZXREaXJlY3Rpb24oKTtcclxuICAgIGxldCB2ZXJ0ZXggPSB2ZWxvY2l0eUEuYWRkKHZlbG9jaXR5QikuZGl2aWRlKDIpO1xyXG5cclxuICAgIC8vIFRyYW5zbGF0ZSBvcmlnaW4gdG8gdGhpcyBhZ2VudCdzIHBvc2l0aW9uXHJcbiAgICBsZXQgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBsZXQgY2VudHJlID0gcG9zaXRpb25CLmFkZCh2ZWxvY2l0eUIpO1xyXG4gICAgbGV0IHJhZGl1cyA9IGIuUmFkaXVzICsgdGhpcy5SYWRpdXM7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGFuZ2xlc1xyXG4gICAgbGV0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGxldCBkaXN0ID0gZGlmZi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChkaXN0IDwgcmFkaXVzKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aGV0YSA9IE1hdGguYWNvcyhyYWRpdXMgLyBkaXN0KTtcclxuICAgIGxldCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBsZXQgYW5nbGUxID0gcGhpICsgdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDEgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUxKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTEpXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGxldCB0YW5nZW50MiA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTIpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHZlbG9jaXR5IG9ic3RhY2xlXHJcbiAgICByZXR1cm4geyB2ZXJ0ZXg6IHZlcnRleCwgdGFuZ2VudDE6IHRhbmdlbnQxLCB0YW5nZW50MjogdGFuZ2VudDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUoXHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yMmYsXHJcbiAgICB2ZWxvY2l0eU9ic3RhY2xlOiBWZWxvY2l0eU9ic3RhY2xlXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGaXJzdCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQxID1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDEueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpICpcclxuICAgICAgICAodmVsb2NpdHkueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpIC1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDEueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpICpcclxuICAgICAgICAodmVsb2NpdHkueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpO1xyXG5cclxuICAgIC8vIFNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQyID1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDIueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpICpcclxuICAgICAgICAodmVsb2NpdHkueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpIC1cclxuICAgICAgKHZlbG9jaXR5T2JzdGFjbGUudGFuZ2VudDIueSAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LnkpICpcclxuICAgICAgICAodmVsb2NpdHkueCAtIHZlbG9jaXR5T2JzdGFjbGUudmVydGV4LngpO1xyXG5cclxuICAgIHJldHVybiBkZXRlcm1pbmFudDEgPiAwICYmIGRldGVybWluYW50MiA8IDA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgIGxpbmVQb2ludDogVmVjdG9yMmYsXHJcbiAgICBsaW5lRGlyZWN0aW9uOiBWZWN0b3IyZixcclxuICAgIHBvaW50OiBWZWN0b3IyZlxyXG4gICk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBkaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgbGV0IHZlY3RvciA9IHBvaW50LnN1YnRyYWN0KGxpbmVQb2ludCk7XHJcbiAgICBsZXQgZGlzdGFuY2UgPSB2ZWN0b3IuZG90KGRpcmVjdGlvbik7XHJcbiAgICByZXR1cm4gbGluZVBvaW50LmFkZChkaXJlY3Rpb24ubXVsdGlwbHkoZGlzdGFuY2UpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Rmlyc3RSYXlDaXJjbGVJbnRlcnNlY3Rpb24oXHJcbiAgICBjZW50cmU6IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXIsXHJcbiAgICBvcmlnaW46IFZlY3RvcjJmLFxyXG4gICAgZGlyZWN0aW9uOiBWZWN0b3IyZlxyXG4gICk6IG51bWJlciB7XHJcbiAgICBsZXQgZGVsdGEgPSBvcmlnaW4uc3VidHJhY3QoY2VudHJlKTtcclxuXHJcbiAgICBsZXQgYSA9IGRpcmVjdGlvbi5kb3QoZGlyZWN0aW9uKTtcclxuICAgIGxldCBiID0gMiAqIGRpcmVjdGlvbi5kb3QoZGVsdGEpO1xyXG4gICAgbGV0IGMgPSBkZWx0YS5kb3QoZGVsdGEpIC0gcmFkaXVzICoqIDI7XHJcblxyXG4gICAgbGV0IGRpc2NyaW0gPSBiICoqIDIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgaWYgKGRpc2NyaW0gPCAwKSB7XHJcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGRpc3RhbmNlID0gKCgtYiAtIE1hdGguc3FydChkaXNjcmltKSkgLyAyKSAqIGE7XHJcblxyXG4gICAgaWYgKGRpc3RhbmNlIDwgMCkge1xyXG4gICAgICAvLyBJbnRlcnNlY3Rpb24gYmVoaW5kXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGlzdGFuY2U7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrSWZEb25lKCkge1xyXG4gICAgbGV0IGZpbmlzaFRocmVzaG9sZCA9IDEuMDtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2dvYWxQb3NpdGlvbikubWFnbml0dWRlU3FyZCgpIDxcclxuICAgICAgZmluaXNoVGhyZXNob2xkXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2ltdWxhdGlvbiB9IGZyb20gXCIuL1NpbXVsYXRpb25cIjtcclxuaW1wb3J0IHsgUmVuZGVyZXIyRCB9IGZyb20gXCIuL1JlbmRlcmVyMkRcIjtcclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgU3RvcEFnZW50IH0gZnJvbSBcIi4vU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25zIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgQWdlbnRUcmVlIH0gZnJvbSBcIi4vQWdlbnRUcmVlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuaW1wb3J0IHsgVk9BZ2VudCB9IGZyb20gXCIuL1ZPQWdlbnRcIjtcclxuaW1wb3J0IHsgUlZPQWdlbnQgfSBmcm9tIFwiLi9SVk9BZ2VudFwiO1xyXG5cclxuY29uc3QgY29uZmlnU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maWdcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IGFnZW50VHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWdlbnRUeXBlXCJcclxuKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgbnVtYmVyT2ZBZ2VudHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwibnVtYmVyT2ZBZ2VudHNcIlxyXG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgZnJhbWVyYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXJhdGVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHN0ZXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0ZXBCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKGNhbnZhcyk7XHJcbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihyZW5kZXJlciwgbmV3IEFnZW50VHJlZSgpKTtcclxudmFyIHBsYXkgPSBmYWxzZTtcclxuXHJcbi8vIGluaXRpYWxpc2Ugc2ltdWxhdGlvbiBhbmQgYmVnaW4gdXBkYXRlL3JlbmRlciBsb29wXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xyXG4gIHRoaXMucmVjb25maWd1cmUoKTtcclxuXHJcbiAgbGV0IGxhc3RSZW5kZXIgPSAwO1xyXG4gIGxldCBsYXN0RlBTID0gMDtcclxuICBsZXQgZnJhbWVzID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXA6IG51bWJlcikge1xyXG4gICAgbGV0IGRlbHRhVCA9IHRpbWVzdGFtcCAtIGxhc3RSZW5kZXI7XHJcbiAgICBsYXN0UmVuZGVyID0gdGltZXN0YW1wO1xyXG5cclxuICAgIC8vIHVwZGF0ZVxyXG4gICAgaWYgKHBsYXkpIHtcclxuICAgICAgc2ltdWxhdGlvbi51cGRhdGUoZGVsdGFUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXJcclxuICAgIHNpbXVsYXRpb24uZHJhdygpO1xyXG4gICAgZnJhbWVzKys7XHJcblxyXG4gICAgLy8gcmVjYWxjdWxhdGUgZnJhbWVyYXRlIGV2ZXJ5IDI1MG1zXHJcbiAgICBpZiAodGltZXN0YW1wIC0gbGFzdEZQUyA+PSAyNTApIHtcclxuICAgICAgZnJhbWVyYXRlLnRleHRDb250ZW50ID0gYEZQUzogJHsoXHJcbiAgICAgICAgKDEwMDAgKiBmcmFtZXMpIC9cclxuICAgICAgICAodGltZXN0YW1wIC0gbGFzdEZQUylcclxuICAgICAgKS50b0ZpeGVkKDEpfWA7XHJcblxyXG4gICAgICBmcmFtZXMgPSAwO1xyXG4gICAgICBsYXN0RlBTID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG4vLyB0b2dnbGUgcGxheS9wYXVzZVxyXG5leHBvcnQgZnVuY3Rpb24gcGxheVBhdXNlKCkge1xyXG4gIHBsYXkgPSAhcGxheTtcclxuXHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBhdXNlXCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGxheVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gc3RlcCBzaW11bGF0aW9uIGJ5IDEgZnJhbWVcclxuZXhwb3J0IGZ1bmN0aW9uIHN0ZXAoKSB7XHJcbiAgc2ltdWxhdGlvbi51cGRhdGUoMTAwMCAvIDYwKTsgLy8gQXNzdW1lcyA2MEZQU1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjb25maWd1cmUoKSB7XHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHRoaXMucGxheVBhdXNlKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb25maWcgPSBjb25maWdTZWxlY3QudmFsdWU7XHJcbiAgY29uc3QgYWdlbnRUeXBlID0gYWdlbnRUeXBlU2VsZWN0LnZhbHVlOyAvLyBUT0RPOiB3aXJlIHRoaXMgaW5cclxuICBjb25zdCBuID0gcGFyc2VJbnQobnVtYmVyT2ZBZ2VudHNJbnB1dC52YWx1ZSkgPz8gMDtcclxuXHJcbiAgLy8gU2VsZWN0IGFnZW50IGNvbnN0cnVjdG9yXHJcbiAgbGV0IGFnZW50Q29uc3RydWN0b3I7XHJcbiAgc3dpdGNoIChhZ2VudFR5cGUpIHtcclxuICAgIGNhc2UgXCJCYXNpY0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBCYXNpY0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJTdG9wQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFN0b3BBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiVk9BZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgVk9BZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiUlZPQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFJWT0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWdlbnQgbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VsZWN0IGNvbmZpZ3VyYXRpb25cclxuICBzd2l0Y2ggKGNvbmZpZykge1xyXG4gICAgY2FzZSBcIlJhbmRvbVRvUmFuZG9tXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvUmFuZG9tKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJSYW5kb21Ub0xpbmVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9MaW5lKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJDaXJjbGVUb0NpcmNsZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5DaXJjbGVUb0NpcmNsZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiR3JpZFRvR3JpZFwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5HcmlkVG9HcmlkKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNjE1KTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==