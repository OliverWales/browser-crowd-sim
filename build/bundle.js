var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={438:(t,i,o)=>{o.r(i),o.d(i,{init:()=>g,playPause:()=>x,reconfigure:()=>v,step:()=>m});var e=function(){function t(t){this._renderer=t,this._agents=[]}return t.prototype.init=function(t){this._agents=t.agents},t.prototype.update=function(t){var i=this;this._agents.forEach((function(o){o.update(t,i._agents)}))},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),n=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),o=t.getDirection();if(this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI),0!==o.dx||0!==o.dy){var e=Math.sqrt(Math.pow(o.dx,2)+Math.pow(o.dy,2));this._context.moveTo(i.x,i.y),this._context.lineTo(i.x+t.Radius*o.dx/e,i.y+t.Radius*o.dy/e)}this._context.stroke()},t}(),s=function(){function t(t,i,o,e){this.Id=t,this._position=i,this._goalPosition=o,this.Radius=e,this._direction={dx:0,dy:0},this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var o={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},e=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2));e>60*t/1e3?(this._direction.dx=o.x/e,this._direction.dy=o.y/e,this._position.x+=60*t/1e3*this._direction.dx,this._position.y+=60*t/1e3*this._direction.dy):(this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y,this._isDone=!0)}},t}(),r=function(){function t(t,i,o,e){this.Id=t,this._position=i,this._goalPosition=o,this.Radius=e,this._direction={dx:0,dy:0},this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var o=this;if(!this._isDone){var e={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},n=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));if(n>60*t/1e3){this._direction.dx=e.x/n,this._direction.dy=e.y/n;var s=this._position.x+20*this._direction.dx,r=this._position.y+20*this._direction.dy;this._isStuck=!1,i.forEach((function(t){t.Id!=o.Id&&o.collides(t,{x:s,y:r})&&(o._isStuck=!0)})),this._isStuck||(this._position.x+=60*t/1e3*this._direction.dx,this._position.y+=60*t/1e3*this._direction.dy)}else this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y,this._isDone=!0}},t.prototype.collides=function(t,i){var o=i.x,e=i.y,n=this.Radius,s=t.getPosition().x,r=t.getPosition().y,a=t.Radius;return Math.sqrt(Math.pow(o-s,2)+Math.pow(e-r,2))<n+a},t}(),a=function(){function t(){}return t.RandomToRandom=function(t,i,o,e){for(var n=[],s=0;s<t;s++){var r=e(s,{x:i*Math.random(),y:o*Math.random()},{x:i*Math.random(),y:o*Math.random()},20);n.push(r)}return{agents:n}},t.RandomToLine=function(t,i,o,e){for(var n=[],s=0;s<t;s++){var r=e(s,{x:i*Math.random(),y:o*Math.random()},{x:(s+1)/(t+1)*i,y:o/2},20);n.push(r)}return{agents:n}},t.CircleToCircle=function(t,i,o,e){for(var n=[],s=i/2,r=o/2,a=o/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,u=e(h,{x:s+a*Math.cos(c),y:r+a*Math.sin(c)},{x:s+a*Math.cos(c+Math.PI),y:r+a*Math.sin(c+Math.PI)},20);n.push(u)}return{agents:n}},t}(),h=document.getElementById("config"),c=document.getElementById("agentType"),u=document.getElementById("numberOfAgents"),d=document.getElementById("canvas"),p=document.getElementById("framerate"),y=document.getElementById("playButton"),_=document.getElementById("stepButton"),f=new e(new n(d)),l=!1;function g(){this.reconfigure();var t=0,i=0,o=0;window.requestAnimationFrame((function e(n){var s=n-t;t=n,l&&f.update(s),f.draw(),o++,n-i>=250&&(p.textContent="FPS: "+(1e3*o/(n-i)).toFixed(1),o=0,i=n),window.requestAnimationFrame(e)}))}function x(){(l=!l)?(y.textContent="Pause",_.disabled=!0):(y.textContent="Play",_.disabled=!1)}function m(){f.update(1e3/60)}function v(){var t;l&&this.playPause();var i,o=h.value,e=c.value,n=null!==(t=parseInt(u.value))&&void 0!==t?t:0;switch(e){case"BasicAgent":i=function(t,i,o,e){return new s(t,i,o,e)};break;case"StopAgent":i=function(t,i,o,e){return new r(t,i,o,e)};break;default:throw new Error("Agent not implemented")}switch(o){case"RandomToRandom":f.init(a.RandomToRandom(n,d.width,d.height,i));break;case"RandomToLine":f.init(a.RandomToLine(n,d.width,d.height,i));break;case"CircleToCircle":f.init(a.CircleToCircle(n,d.width,d.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function o(e){if(i[e])return i[e].exports;var n=i[e]={exports:{}};return t[e](n,n.exports,o),n.exports}return o.d=(t,i)=>{for(var e in i)o.o(i,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(438)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsImFnZW50cyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImRyYXciLCJjbGVhciIsImRyYXdBZ2VudCIsImNhbnZhcyIsIl9jb250ZXh0IiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZ2V0RGlyZWN0aW9uIiwiYmVnaW5QYXRoIiwiZ2V0SXNEb25lIiwic3Ryb2tlU3R5bGUiLCJnZXRJc1N0dWNrIiwiYXJjIiwieCIsInkiLCJSYWRpdXMiLCJNYXRoIiwiUEkiLCJkeCIsImR5IiwibWFnbml0dWRlIiwic3FydCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsImlkIiwic3RhcnRQb3NpdGlvbiIsImdvYWxQb3NpdGlvbiIsInJhZGl1cyIsIklkIiwiX3Bvc2l0aW9uIiwiX2dvYWxQb3NpdGlvbiIsIl9kaXJlY3Rpb24iLCJfaXNEb25lIiwiZ29hbERpcmVjdGlvbiIsImdvYWxEaXN0YW5jZSIsIl9pc1N0dWNrIiwiY29sbGlkZXMiLCJhMXgiLCJhMXkiLCJhMXIiLCJhMngiLCJhMnkiLCJhMnIiLCJSYW5kb21Ub1JhbmRvbSIsIm4iLCJhZ2VudENvbnN0cnVjdG9yIiwiaSIsInJhbmRvbSIsInB1c2giLCJSYW5kb21Ub0xpbmUiLCJDaXJjbGVUb0NpcmNsZSIsImNlbnRyZVgiLCJjZW50cmVZIiwiYW5nbGUiLCJjb3MiLCJzaW4iLCJjb25maWdTZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWdlbnRUeXBlU2VsZWN0IiwibnVtYmVyT2ZBZ2VudHNJbnB1dCIsImZyYW1lcmF0ZSIsInBsYXlCdXR0b24iLCJzdGVwQnV0dG9uIiwic2ltdWxhdGlvbiIsIlNpbXVsYXRpb24iLCJSZW5kZXJlcjJEIiwicGxheSIsInJlY29uZmlndXJlIiwibGFzdFJlbmRlciIsImxhc3RGUFMiLCJmcmFtZXMiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wIiwidGltZXN0YW1wIiwidGV4dENvbnRlbnQiLCJ0b0ZpeGVkIiwicGxheVBhdXNlIiwiZGlzYWJsZWQiLCJzdGVwIiwidmFsdWUiLCJhZ2VudFR5cGUiLCJwYXJzZUludCIsIkJhc2ljQWdlbnQiLCJTdG9wQWdlbnQiLCJFcnJvciIsIkNvbmZpZ3VyYXRpb25zIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sIm1hcHBpbmdzIjoia0pBSUEsaUJBSUUsV0FBWUEsR0FDVkMsS0FBS0MsVUFBWUYsRUFDakJDLEtBQUtFLFFBQVUsR0FtQm5CLE9BaEJFLFlBQUFDLEtBQUEsU0FBS0MsR0FDSEosS0FBS0UsUUFBVUUsRUFBT0MsUUFHeEIsWUFBQUMsT0FBQSxTQUFPQyxHQUFQLFdBQ0VQLEtBQUtFLFFBQVFNLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1ILE9BQU9DLEVBQVEsRUFBS0wsYUFJOUIsWUFBQVEsS0FBQSxzQkFDRVYsS0FBS0MsVUFBVVUsUUFDZlgsS0FBS0UsUUFBUU0sU0FBUSxTQUFDQyxHQUNwQixFQUFLUixVQUFVVyxVQUFVSCxPQUcvQixFQXpCQSxHQ0RBLGFBR0UsV0FBWUksR0FDVmIsS0FBS2MsU0FBV0QsRUFBT0UsV0FBVyxNQTBDdEMsT0F2Q0UsWUFBQUosTUFBQSxXQUNFWCxLQUFLYyxTQUFTRSxVQUFZLFFBQzFCaEIsS0FBS2MsU0FBU0csU0FDWixFQUNBLEVBQ0FqQixLQUFLYyxTQUFTRCxPQUFPSyxNQUNyQmxCLEtBQUtjLFNBQVNELE9BQU9NLFNBSXpCLFlBQUFQLFVBQUEsU0FBVUgsR0FDUixJQUFJVyxFQUFXWCxFQUFNWSxjQUNqQkMsRUFBWWIsRUFBTWMsZUFldEIsR0FiQXZCLEtBQUtjLFNBQVNVLFlBR1ZmLEVBQU1nQixZQUNSekIsS0FBS2MsU0FBU1ksWUFBYyxVQUNuQmpCLEVBQU1rQixhQUNmM0IsS0FBS2MsU0FBU1ksWUFBYyxVQUU1QjFCLEtBQUtjLFNBQVNZLFlBQWMsVUFFOUIxQixLQUFLYyxTQUFTYyxJQUFJUixFQUFTUyxFQUFHVCxFQUFTVSxFQUFHckIsRUFBTXNCLE9B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QUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NqRmQsRUFBb0JrQixFQUFLaEIsSUFDSCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ1gsT0FBT0MsZUFBZVIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRTVCLE1BQU8sV0FFN0RpQixPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRVYsT0FBTyxLSEZoRFEsRUFBb0IsTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25zXCI7XHJcbmltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uIHtcclxuICBfcmVuZGVyZXI6IElSZW5kZXJlcjtcclxuICBfYWdlbnRzOiBJQWdlbnRbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXI6IElSZW5kZXJlcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgaW5pdChjb25maWc6IElDb25maWd1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBjb25maWcuYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgYWdlbnQudXBkYXRlKGRlbHRhVCwgdGhpcy5fYWdlbnRzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIuZHJhd0FnZW50KGFnZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIyRCBpbXBsZW1lbnRzIElSZW5kZXJlciB7XHJcbiAgX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpOiB2b2lkIHtcclxuICAgIHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsUmVjdChcclxuICAgICAgMCxcclxuICAgICAgMCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMud2lkdGgsXHJcbiAgICAgIHRoaXMuX2NvbnRleHQuY2FudmFzLmhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRyYXdBZ2VudChhZ2VudDogSUFnZW50KSB7XHJcbiAgICBsZXQgcG9zaXRpb24gPSBhZ2VudC5nZXRQb3NpdGlvbigpO1xyXG4gICAgbGV0IGRpcmVjdGlvbiA9IGFnZW50LmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgLy8gZHJhdyBhZ2VudFxyXG4gICAgaWYgKGFnZW50LmdldElzRG9uZSgpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMEZGMDBcIjtcclxuICAgIH0gZWxzZSBpZiAoYWdlbnQuZ2V0SXNTdHVjaygpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiNGRjAwMDBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMDAwMDBcIjtcclxuICAgIH1cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBpZiAoZGlyZWN0aW9uLmR4ICE9PSAwIHx8IGRpcmVjdGlvbi5keSAhPT0gMCkge1xyXG4gICAgICBsZXQgbWFnbml0dWRlID0gTWF0aC5zcXJ0KGRpcmVjdGlvbi5keCAqKiAyICsgZGlyZWN0aW9uLmR5ICoqIDIpO1xyXG5cclxuICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKFxyXG4gICAgICAgIHBvc2l0aW9uLnggKyAoYWdlbnQuUmFkaXVzICogZGlyZWN0aW9uLmR4KSAvIG1hZ25pdHVkZSxcclxuICAgICAgICBwb3NpdGlvbi55ICsgKGFnZW50LlJhZGl1cyAqIGRpcmVjdGlvbi5keSkgLyBtYWduaXR1ZGVcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG5cclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IHsgZHg6IDAsIGR5OiAwIH07XHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogeyBkeDogbnVtYmVyOyBkeTogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB7XHJcbiAgICAgIHg6IHRoaXMuX2dvYWxQb3NpdGlvbi54IC0gdGhpcy5fcG9zaXRpb24ueCxcclxuICAgICAgeTogdGhpcy5fZ29hbFBvc2l0aW9uLnkgLSB0aGlzLl9wb3NpdGlvbi55LFxyXG4gICAgfTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBNYXRoLnNxcnQoZ29hbERpcmVjdGlvbi54ICoqIDIgKyBnb2FsRGlyZWN0aW9uLnkgKiogMik7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbi5keCA9IGdvYWxEaXJlY3Rpb24ueCAvIGdvYWxEaXN0YW5jZTtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uLmR5ID0gZ29hbERpcmVjdGlvbi55IC8gZ29hbERpc3RhbmNlO1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi54ICs9ICgoZGVsdGFUICogNjApIC8gMTAwMCkgKiB0aGlzLl9kaXJlY3Rpb24uZHg7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnkgKz0gKChkZWx0YVQgKiA2MCkgLyAxMDAwKSAqIHRoaXMuX2RpcmVjdGlvbi5keTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnggPSB0aGlzLl9nb2FsUG9zaXRpb24ueDtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueSA9IHRoaXMuX2dvYWxQb3NpdGlvbi55O1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9wQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJZDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBSYWRpdXM6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9O1xyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB7IGR4OiAwLCBkeTogMCB9O1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHtcclxuICAgICAgeDogdGhpcy5fZ29hbFBvc2l0aW9uLnggLSB0aGlzLl9wb3NpdGlvbi54LFxyXG4gICAgICB5OiB0aGlzLl9nb2FsUG9zaXRpb24ueSAtIHRoaXMuX3Bvc2l0aW9uLnksXHJcbiAgICB9O1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IE1hdGguc3FydChnb2FsRGlyZWN0aW9uLnggKiogMiArIGdvYWxEaXJlY3Rpb24ueSAqKiAyKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uLmR4ID0gZ29hbERpcmVjdGlvbi54IC8gZ29hbERpc3RhbmNlO1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24uZHkgPSBnb2FsRGlyZWN0aW9uLnkgLyBnb2FsRGlzdGFuY2U7XHJcbiAgICAgIGxldCBoZWFkaW5nWCA9IHRoaXMuX3Bvc2l0aW9uLnggKyAyMCAqIHRoaXMuX2RpcmVjdGlvbi5keDtcclxuICAgICAgbGV0IGhlYWRpbmdZID0gdGhpcy5fcG9zaXRpb24ueSArIDIwICogdGhpcy5fZGlyZWN0aW9uLmR5O1xyXG5cclxuICAgICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBhZ2VudC5JZCAhPSB0aGlzLklkICYmXHJcbiAgICAgICAgICB0aGlzLmNvbGxpZGVzKGFnZW50LCB7IHg6IGhlYWRpbmdYLCB5OiBoZWFkaW5nWSB9KVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5faXNTdHVjaykge1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uLnggKz0gKChkZWx0YVQgKiA2MCkgLyAxMDAwKSAqIHRoaXMuX2RpcmVjdGlvbi5keDtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbi55ICs9ICgoZGVsdGFUICogNjApIC8gMTAwMCkgKiB0aGlzLl9kaXJlY3Rpb24uZHk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnggPSB0aGlzLl9nb2FsUG9zaXRpb24ueDtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueSA9IHRoaXMuX2dvYWxQb3NpdGlvbi55O1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29sbGlkZXMoYWdlbnQ6IElBZ2VudCwgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IGExeCA9IHBvc2l0aW9uLng7XHJcbiAgICBsZXQgYTF5ID0gcG9zaXRpb24ueTtcclxuICAgIGxldCBhMXIgPSB0aGlzLlJhZGl1cztcclxuICAgIGxldCBhMnggPSBhZ2VudC5nZXRQb3NpdGlvbigpLng7XHJcbiAgICBsZXQgYTJ5ID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55O1xyXG4gICAgbGV0IGEyciA9IGFnZW50LlJhZGl1cztcclxuXHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KChhMXggLSBhMngpICoqIDIgKyAoYTF5IC0gYTJ5KSAqKiAyKSA8IGExciArIGEycjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gcmFuZG9tIGdvYWwgcG9zaXRpb25cclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICB7IHg6IHdpZHRoICogTWF0aC5yYW5kb20oKSwgeTogaGVpZ2h0ICogTWF0aC5yYW5kb20oKSB9LFxyXG4gICAgICAgIHsgeDogd2lkdGggKiBNYXRoLnJhbmRvbSgpLCB5OiBoZWlnaHQgKiBNYXRoLnJhbmRvbSgpIH0sXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFJhbmRvbSBzdGFydCBwb3NpdGlvbiB0byBmaXhlZCBwb3NpdGlvbiBvbiBsaW5lXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgeyB4OiB3aWR0aCAqIE1hdGgucmFuZG9tKCksIHk6IGhlaWdodCAqIE1hdGgucmFuZG9tKCkgfSxcclxuICAgICAgICB7IHg6ICgoaSArIDEpIC8gKG4gKyAxKSkgKiB3aWR0aCwgeTogaGVpZ2h0IC8gMiB9LFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFBvc2l0aW9uIG9uIHJhZGl1cyBvZiBjaXJjbGUgdG8gb3Bwb3NpdGUgcG9pbnRcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBjb25zdCBjZW50cmVYID0gd2lkdGggLyAyO1xyXG4gICAgY29uc3QgY2VudHJlWSA9IGhlaWdodCAvIDI7XHJcbiAgICBjb25zdCByYWRpdXMgPSBoZWlnaHQgLyAyIC0gMjU7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYW5nbGUgPSAoMiAqIE1hdGguUEkgKiBpKSAvIG47XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHg6IGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgICAgICB5OiBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgeDogY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICB5OiBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSBcIi4vU2ltdWxhdGlvblwiO1xyXG5pbXBvcnQgeyBSZW5kZXJlcjJEIH0gZnJvbSBcIi4vUmVuZGVyZXIyRFwiO1xyXG5cclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgU3RvcEFnZW50IH0gZnJvbSBcIi4vU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25zIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuXHJcbmNvbnN0IGNvbmZpZ1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlnXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBhZ2VudFR5cGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImFnZW50VHlwZVwiXHJcbikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IG51bWJlck9mQWdlbnRzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcIm51bWJlck9mQWdlbnRzXCJcclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmNvbnN0IGZyYW1lcmF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnJhbWVyYXRlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5jb25zdCBwbGF5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5QnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBzdGVwQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGVwQnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuY29uc3QgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIyRChjYW52YXMpO1xyXG5jb25zdCBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24ocmVuZGVyZXIpO1xyXG52YXIgcGxheSA9IGZhbHNlO1xyXG5cclxuLy8gaW5pdGlhbGlzZSBzaW11bGF0aW9uIGFuZCBiZWdpbiB1cGRhdGUvcmVuZGVyIGxvb3BcclxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgdGhpcy5yZWNvbmZpZ3VyZSgpO1xyXG5cclxuICBsZXQgbGFzdFJlbmRlciA9IDA7XHJcbiAgbGV0IGxhc3RGUFMgPSAwO1xyXG4gIGxldCBmcmFtZXMgPSAwO1xyXG5cclxuICBmdW5jdGlvbiBsb29wKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBsZXQgZGVsdGFUID0gdGltZXN0YW1wIC0gbGFzdFJlbmRlcjtcclxuICAgIGxhc3RSZW5kZXIgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgLy8gdXBkYXRlXHJcbiAgICBpZiAocGxheSkge1xyXG4gICAgICBzaW11bGF0aW9uLnVwZGF0ZShkZWx0YVQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbmRlclxyXG4gICAgc2ltdWxhdGlvbi5kcmF3KCk7XHJcbiAgICBmcmFtZXMrKztcclxuXHJcbiAgICAvLyByZWNhbGN1bGF0ZSBmcmFtZXJhdGUgZXZlcnkgMjUwbXNcclxuICAgIGlmICh0aW1lc3RhbXAgLSBsYXN0RlBTID49IDI1MCkge1xyXG4gICAgICBmcmFtZXJhdGUudGV4dENvbnRlbnQgPSBgRlBTOiAkeyhcclxuICAgICAgICAoMTAwMCAqIGZyYW1lcykgL1xyXG4gICAgICAgICh0aW1lc3RhbXAgLSBsYXN0RlBTKVxyXG4gICAgICApLnRvRml4ZWQoMSl9YDtcclxuXHJcbiAgICAgIGZyYW1lcyA9IDA7XHJcbiAgICAgIGxhc3RGUFMgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuXHJcbi8vIHRvZ2dsZSBwbGF5L3BhdXNlXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5UGF1c2UoKSB7XHJcbiAgcGxheSA9ICFwbGF5O1xyXG5cclxuICBpZiAocGxheSkge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGF1c2VcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQbGF5XCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBzdGVwIHNpbXVsYXRpb24gYnkgMSBmcmFtZVxyXG5leHBvcnQgZnVuY3Rpb24gc3RlcCgpIHtcclxuICBzaW11bGF0aW9uLnVwZGF0ZSgxMDAwIC8gNjApOyAvLyBBc3N1bWVzIDYwRlBTXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvbmZpZ3VyZSgpIHtcclxuICBpZiAocGxheSkge1xyXG4gICAgdGhpcy5wbGF5UGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ1NlbGVjdC52YWx1ZTtcclxuICBjb25zdCBhZ2VudFR5cGUgPSBhZ2VudFR5cGVTZWxlY3QudmFsdWU7IC8vIFRPRE86IHdpcmUgdGhpcyBpblxyXG4gIGNvbnN0IG4gPSBwYXJzZUludChudW1iZXJPZkFnZW50c0lucHV0LnZhbHVlKSA/PyAwO1xyXG5cclxuICAvLyBTZWxlY3QgYWdlbnQgY29uc3RydWN0b3JcclxuICBsZXQgYWdlbnRDb25zdHJ1Y3RvcjtcclxuICBzd2l0Y2ggKGFnZW50VHlwZSkge1xyXG4gICAgY2FzZSBcIkJhc2ljQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgQmFzaWNBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiU3RvcEFnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFN0b3BBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFnZW50IG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNlbGVjdCBjb25maWd1cmF0aW9uXHJcbiAgc3dpdGNoIChjb25maWcpIHtcclxuICAgIGNhc2UgXCJSYW5kb21Ub1JhbmRvbVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub1JhbmRvbShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9MaW5lXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvTGluZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiQ2lyY2xlVG9DaXJjbGVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuQ2lyY2xlVG9DaXJjbGUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzgpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9