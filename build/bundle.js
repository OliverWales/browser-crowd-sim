var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={389:(t,i,n)=>{n.r(i),n.d(i,{init:()=>x,playPause:()=>P,reconfigure:()=>w,step:()=>m});var o=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(n){n.update(t,i._agents.getNeighboursInRangeRectilinear(n,200))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),e=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),n=t.getDirection();if(this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI),0!==n.dx||0!==n.dy){var o=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2));this._context.moveTo(i.x,i.y),this._context.lineTo(i.x+t.Radius*n.dx/o,i.y+t.Radius*n.dy/o)}this._context.stroke()},t}(),r=function(){function t(t,i,n,o){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=o,this._direction={dx:0,dy:0},this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var n={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},o=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));o>60*t/1e3?(this._direction.dx=n.x/o,this._direction.dy=n.y/o,this._position.x+=60*t/1e3*this._direction.dx,this._position.y+=60*t/1e3*this._direction.dy):(this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y,this._isDone=!0)}},t}(),s=function(){function t(t,i,n,o){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=o,this._direction={dx:0,dy:0},this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var n=this;if(!this._isDone){var o={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},e=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2));if(e>60*t/1e3){this._direction.dx=o.x/e,this._direction.dy=o.y/e;var r=this._position.x+20*this._direction.dx,s=this._position.y+20*this._direction.dy;this._isStuck=!1,i.forEach((function(t){t.Id!=n.Id&&n.collides(t,{x:r,y:s})&&(n._isStuck=!0)})),this._isStuck||(this._position.x+=60*t/1e3*this._direction.dx,this._position.y+=60*t/1e3*this._direction.dy)}else this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y,this._isDone=!0}},t.prototype.collides=function(t,i){var n=i.x,o=i.y,e=this.Radius,r=t.getPosition().x,s=t.getPosition().y,a=t.Radius;return Math.sqrt(Math.pow(n-r,2)+Math.pow(o-s,2))<e+a},t}(),a=function(){function t(){}return t.RandomToRandom=function(t,i,n,o){for(var e=[],r=0;r<t;r++){var s=o(r,{x:i*Math.random(),y:n*Math.random()},{x:i*Math.random(),y:n*Math.random()},20);e.push(s)}return{agents:e}},t.RandomToLine=function(t,i,n,o){for(var e=[],r=0;r<t;r++){var s=o(r,{x:i*Math.random(),y:n*Math.random()},{x:(r+1)/(t+1)*i,y:n/2},20);e.push(s)}return{agents:e}},t.CircleToCircle=function(t,i,n,o){for(var e=[],r=i/2,s=n/2,a=n/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,u=o(h,{x:r+a*Math.cos(c),y:s+a*Math.sin(c)},{x:r+a*Math.cos(c+Math.PI),y:s+a*Math.sin(c+Math.PI)},20);e.push(u)}return{agents:e}},t}(),h=function(){function t(){}return t.prototype.init=function(t){this._root=this.construct(t,!0)},t.prototype.getAll=function(){return this.get(this._root)},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var n=t.getPosition().x-i,o=t.getPosition().y-i,e=t.getPosition().x+i,r=t.getPosition().y+i;return this.rectilinear(this._root,n,o,e,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(n){return Math.pow(t.getPosition().x-n.getPosition().x,2)+Math.pow(t.getPosition().y-n.getPosition().y,2)<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this.apply(this._root,t)},t.prototype.construct=function(t,i){if(0===t.length)return null;var n=Math.floor(t.length/2),o=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),e=this.construct(o.slice(0,n),!i),r=this.construct(o.slice(n+1,t.length),!i);return{agent:t[n],left:e,right:r}},t.prototype.insert=function(t,i,n){return null==i?{agent:t,left:null,right:null}:(n?t.getPosition().x<i.agent.getPosition().x?i.left=this.insert(t,i.left,!n):i.right=this.insert(t,i.right,!n):t.getPosition().y<i.agent.getPosition().y?i.left=this.insert(t,i.left,!n):i.right=this.insert(t,i.right,!n),i)},t.prototype.get=function(t){return null==t?[]:this.get(t.left).concat(this.get(t.right)).concat(t.agent)},t.prototype.rectilinear=function(t,i,n,o,e,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=o&&(s=s.concat(this.rectilinear(t.right,i,n,o,e,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rectilinear(t.left,i,n,o,e,!r)))):(t.agent.getPosition().y<=e&&(s=s.concat(this.rectilinear(t.right,i,n,o,e,!r))),t.agent.getPosition().y>=n&&(s=s.concat(this.rectilinear(t.left,i,n,o,e,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=n&&t.agent.getPosition().x<=o&&t.agent.getPosition().y<=e&&(s=s.concat(t.agent)),s},t.prototype.apply=function(t,i){null!=t&&(i(t.agent),this.apply(t.left,i),this.apply(t.right,i))},t}(),c=document.getElementById("config"),u=document.getElementById("agentType"),g=document.getElementById("numberOfAgents"),d=document.getElementById("canvas"),p=document.getElementById("framerate"),l=document.getElementById("playButton"),y=document.getElementById("stepButton"),f=new o(new e(d),new h),_=!1;function x(){this.reconfigure();var t=0,i=0,n=0;window.requestAnimationFrame((function o(e){var r=e-t;t=e,_&&f.update(r),f.draw(),n++,e-i>=250&&(p.textContent="FPS: "+(1e3*n/(e-i)).toFixed(1),n=0,i=e),window.requestAnimationFrame(o)}))}function P(){(_=!_)?(l.textContent="Pause",y.disabled=!0):(l.textContent="Play",y.disabled=!1)}function m(){f.update(1e3/60)}function w(){var t;_&&this.playPause();var i,n=c.value,o=u.value,e=null!==(t=parseInt(g.value))&&void 0!==t?t:0;switch(o){case"BasicAgent":i=function(t,i,n,o){return new r(t,i,n,o)};break;case"StopAgent":i=function(t,i,n,o){return new s(t,i,n,o)};break;default:throw new Error("Agent not implemented")}switch(n){case"RandomToRandom":f.init(a.RandomToRandom(e,d.width,d.height,i));break;case"RandomToLine":f.init(a.RandomToLine(e,d.width,d.height,i));break;case"CircleToCircle":f.init(a.CircleToCircle(e,d.width,d.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function n(o){if(i[o])return i[o].exports;var e=i[o]={exports:{}};return t[o](e,e.exports,n),e.exports}return n.d=(t,i)=>{for(var o in i)n.o(i,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(389)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiXSwibmFtZXMiOlsicmVuZGVyZXIiLCJhZ2VudHMiLCJ0aGlzIiwiX3JlbmRlcmVyIiwiX2FnZW50cyIsImluaXQiLCJjb25maWciLCJ1cGRhdGUiLCJkZWx0YVQiLCJmb3JFYWNoIiwiYWdlbnQiLCJnZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyIiwiZ2V0QWxsIiwiZHJhdyIsImNsZWFyIiwiZHJhd0FnZW50IiwiY2FudmFzIiwiX2NvbnRleHQiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJkaXJlY3Rpb24iLCJnZXREaXJlY3Rpb24iLCJiZWdpblBhdGgiLCJnZXRJc0RvbmUiLCJzdHJva2VTdHlsZSIsImdldElzU3R1Y2siLCJhcmMiLCJ4IiwieSIsIlJhZGl1cyIsIk1hdGgiLCJQSSIsImR4IiwiZHkiLCJtYWduaXR1ZGUiLCJzcXJ0IiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiaWQiLCJzdGFydFBvc2l0aW9uIiwiZ29hbFBvc2l0aW9uIiwicmFkaXVzIiwiSWQiLCJfcG9zaXRpb24iLCJfZ29hbFBvc2l0aW9uIiwiX2RpcmVjdGlvbiIsIl9pc0RvbmUiLCJnb2FsRGlyZWN0aW9uIiwiZ29hbERpc3RhbmNlIiwiX2lzU3R1Y2siLCJjb2xsaWRlcyIsImExeCIsImExeSIsImExciIsImEyeCIsImEyeSIsImEyciIsIlJhbmRvbVRvUmFuZG9tIiwibiIsImFnZW50Q29uc3RydWN0b3IiLCJpIiwicmFuZG9tIiwicHVzaCIsIlJhbmRvbVRvTGluZSIsIkNpcmNsZVRvQ2lyY2xlIiwiY2VudHJlWCIsImNlbnRyZVkiLCJhbmdsZSIsImNvcyIsInNpbiIsIl9yb290IiwiY29uc3RydWN0IiwiZ2V0IiwicmFuZ2UiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwicmVjdGlsaW5lYXIiLCJmaWx0ZXIiLCJvdGhlciIsImdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuIiwiZnVuIiwiYXBwbHkiLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImEiLCJiIiwibGVmdCIsInNsaWNlIiwicmlnaHQiLCJpbnNlcnQiLCJyb290IiwiY29uY2F0IiwicmVzIiwiY29uZmlnU2VsZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFnZW50VHlwZVNlbGVjdCIsIm51bWJlck9mQWdlbnRzSW5wdXQiLCJmcmFtZXJhdGUiLCJwbGF5QnV0dG9uIiwic3RlcEJ1dHRvbiIsInNpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwiUmVuZGVyZXIyRCIsIkFnZW50VHJlZSIsInBsYXkiLCJyZWNvbmZpZ3VyZSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsInZhbHVlIiwiYWdlbnRUeXBlIiwicGFyc2VJbnQiLCJCYXNpY0FnZW50IiwiU3RvcEFnZW50IiwiRXJyb3IiLCJDb25maWd1cmF0aW9ucyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6ImtKQUlBLGlCQUlFLFdBQVlBLEVBQXFCQyxHQUMvQkMsS0FBS0MsVUFBWUgsRUFDakJFLEtBQUtFLFFBQVVILEVBd0JuQixPQXJCRSxZQUFBSSxLQUFBLFNBQUtDLEdBQ0hKLEtBQUtFLFFBQVFDLEtBQUtDLEVBQU9MLFNBRzNCLFlBQUFNLE9BQUEsU0FBT0MsR0FBUCxXQUVFTixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCQSxFQUFNSCxPQUNKQyxFQUNBLEVBQUtKLFFBQVFPLGdDQUFnQ0QsRUFKckMsU0FPWlIsS0FBS0UsUUFBUUMsS0FBS0gsS0FBS0UsUUFBUVEsV0FHakMsWUFBQUMsS0FBQSxzQkFDRVgsS0FBS0MsVUFBVVcsUUFDZlosS0FBS0UsUUFBUUssU0FBUSxTQUFDQyxHQUNwQixFQUFLUCxVQUFVWSxVQUFVTCxPQUcvQixFQTlCQSxHQ0RBLGFBR0Us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UUFHM0MsSUFBSUMsRUFBU0osRUFBeUJFLEdBQVksQ0FHakRDLFFBQVMsSUFPVixPQUhBRSxFQUFvQkgsR0FBVUUsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0NHLEVBQU9ELFFDakJmLE9DRkFGLEVBQW9CSyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWE4sRUFBb0JRLEVBQUVGLEVBQVlDLEtBQVNQLEVBQW9CUSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU14RSxJQUFLbUUsRUFBV0MsTUNKM0VQLEVBQW9CUSxFQUFJLENBQUNJLEVBQUtDLElBQVNKLE9BQU9LLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGYixFQUFvQmlCLEVBQUtmLElBQ0gsb0JBQVhnQixRQUEwQkEsT0FBT0MsYUFDMUNWLE9BQU9DLGVBQWVSLEVBQVNnQixPQUFPQyxZQUFhLENBQUUzQixNQUFPLFdBRTdEaUIsT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUVWLE9BQU8sS0hGaERRLEVBQW9CLE0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IElDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uIHtcclxuICBfcmVuZGVyZXI6IElSZW5kZXJlcjtcclxuICBfYWdlbnRzOiBJQWdlbnRDb2xsZWN0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogSVJlbmRlcmVyLCBhZ2VudHM6IElBZ2VudENvbGxlY3Rpb24pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBhZ2VudHM7XHJcbiAgfVxyXG5cclxuICBpbml0KGNvbmZpZzogSUNvbmZpZ3VyYXRpb24pIHtcclxuICAgIHRoaXMuX2FnZW50cy5pbml0KGNvbmZpZy5hZ2VudHMpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKSB7XHJcbiAgICBsZXQgcmFuZ2UgPSAyMDA7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgYWdlbnQudXBkYXRlKFxyXG4gICAgICAgIGRlbHRhVCxcclxuICAgICAgICB0aGlzLl9hZ2VudHMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudCwgcmFuZ2UpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2FnZW50cy5pbml0KHRoaXMuX2FnZW50cy5nZXRBbGwoKSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnQoYWdlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICBpZiAoYWdlbnQuZ2V0SXNEb25lKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwRkYwMFwiO1xyXG4gICAgfSBlbHNlIGlmIChhZ2VudC5nZXRJc1N0dWNrKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0ZGMDAwMFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBpZiAoZGlyZWN0aW9uLmR4ICE9PSAwIHx8IGRpcmVjdGlvbi5keSAhPT0gMCkge1xyXG4gICAgICBsZXQgbWFnbml0dWRlID0gTWF0aC5zcXJ0KGRpcmVjdGlvbi5keCAqKiAyICsgZGlyZWN0aW9uLmR5ICoqIDIpO1xyXG5cclxuICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQubGluZVRvKFxyXG4gICAgICAgIHBvc2l0aW9uLnggKyAoYWdlbnQuUmFkaXVzICogZGlyZWN0aW9uLmR4KSAvIG1hZ25pdHVkZSxcclxuICAgICAgICBwb3NpdGlvbi55ICsgKGFnZW50LlJhZGl1cyAqIGRpcmVjdGlvbi5keSkgLyBtYWduaXR1ZGVcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG5cclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IHsgZHg6IDAsIGR5OiAwIH07XHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogeyBkeDogbnVtYmVyOyBkeTogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB7XHJcbiAgICAgIHg6IHRoaXMuX2dvYWxQb3NpdGlvbi54IC0gdGhpcy5fcG9zaXRpb24ueCxcclxuICAgICAgeTogdGhpcy5fZ29hbFBvc2l0aW9uLnkgLSB0aGlzLl9wb3NpdGlvbi55LFxyXG4gICAgfTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBNYXRoLnNxcnQoZ29hbERpcmVjdGlvbi54ICoqIDIgKyBnb2FsRGlyZWN0aW9uLnkgKiogMik7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbi5keCA9IGdvYWxEaXJlY3Rpb24ueCAvIGdvYWxEaXN0YW5jZTtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uLmR5ID0gZ29hbERpcmVjdGlvbi55IC8gZ29hbERpc3RhbmNlO1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi54ICs9ICgoZGVsdGFUICogNjApIC8gMTAwMCkgKiB0aGlzLl9kaXJlY3Rpb24uZHg7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnkgKz0gKChkZWx0YVQgKiA2MCkgLyAxMDAwKSAqIHRoaXMuX2RpcmVjdGlvbi5keTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnggPSB0aGlzLl9nb2FsUG9zaXRpb24ueDtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueSA9IHRoaXMuX2dvYWxQb3NpdGlvbi55O1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9wQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJZDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBSYWRpdXM6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9O1xyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB7IGR4OiAwLCBkeTogMCB9O1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHtcclxuICAgICAgeDogdGhpcy5fZ29hbFBvc2l0aW9uLnggLSB0aGlzLl9wb3NpdGlvbi54LFxyXG4gICAgICB5OiB0aGlzLl9nb2FsUG9zaXRpb24ueSAtIHRoaXMuX3Bvc2l0aW9uLnksXHJcbiAgICB9O1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IE1hdGguc3FydChnb2FsRGlyZWN0aW9uLnggKiogMiArIGdvYWxEaXJlY3Rpb24ueSAqKiAyKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uLmR4ID0gZ29hbERpcmVjdGlvbi54IC8gZ29hbERpc3RhbmNlO1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24uZHkgPSBnb2FsRGlyZWN0aW9uLnkgLyBnb2FsRGlzdGFuY2U7XHJcbiAgICAgIGxldCBoZWFkaW5nWCA9IHRoaXMuX3Bvc2l0aW9uLnggKyAyMCAqIHRoaXMuX2RpcmVjdGlvbi5keDtcclxuICAgICAgbGV0IGhlYWRpbmdZID0gdGhpcy5fcG9zaXRpb24ueSArIDIwICogdGhpcy5fZGlyZWN0aW9uLmR5O1xyXG5cclxuICAgICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBhZ2VudC5JZCAhPSB0aGlzLklkICYmXHJcbiAgICAgICAgICB0aGlzLmNvbGxpZGVzKGFnZW50LCB7IHg6IGhlYWRpbmdYLCB5OiBoZWFkaW5nWSB9KVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5faXNTdHVjaykge1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uLnggKz0gKChkZWx0YVQgKiA2MCkgLyAxMDAwKSAqIHRoaXMuX2RpcmVjdGlvbi5keDtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbi55ICs9ICgoZGVsdGFUICogNjApIC8gMTAwMCkgKiB0aGlzLl9kaXJlY3Rpb24uZHk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnggPSB0aGlzLl9nb2FsUG9zaXRpb24ueDtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueSA9IHRoaXMuX2dvYWxQb3NpdGlvbi55O1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29sbGlkZXMoYWdlbnQ6IElBZ2VudCwgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IGExeCA9IHBvc2l0aW9uLng7XHJcbiAgICBsZXQgYTF5ID0gcG9zaXRpb24ueTtcclxuICAgIGxldCBhMXIgPSB0aGlzLlJhZGl1cztcclxuICAgIGxldCBhMnggPSBhZ2VudC5nZXRQb3NpdGlvbigpLng7XHJcbiAgICBsZXQgYTJ5ID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55O1xyXG4gICAgbGV0IGEyciA9IGFnZW50LlJhZGl1cztcclxuXHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KChhMXggLSBhMngpICoqIDIgKyAoYTF5IC0gYTJ5KSAqKiAyKSA8IGExciArIGEycjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gcmFuZG9tIGdvYWwgcG9zaXRpb25cclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICB7IHg6IHdpZHRoICogTWF0aC5yYW5kb20oKSwgeTogaGVpZ2h0ICogTWF0aC5yYW5kb20oKSB9LFxyXG4gICAgICAgIHsgeDogd2lkdGggKiBNYXRoLnJhbmRvbSgpLCB5OiBoZWlnaHQgKiBNYXRoLnJhbmRvbSgpIH0sXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFJhbmRvbSBzdGFydCBwb3NpdGlvbiB0byBmaXhlZCBwb3NpdGlvbiBvbiBsaW5lXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgeyB4OiB3aWR0aCAqIE1hdGgucmFuZG9tKCksIHk6IGhlaWdodCAqIE1hdGgucmFuZG9tKCkgfSxcclxuICAgICAgICB7IHg6ICgoaSArIDEpIC8gKG4gKyAxKSkgKiB3aWR0aCwgeTogaGVpZ2h0IC8gMiB9LFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFBvc2l0aW9uIG9uIHJhZGl1cyBvZiBjaXJjbGUgdG8gb3Bwb3NpdGUgcG9pbnRcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBjb25zdCBjZW50cmVYID0gd2lkdGggLyAyO1xyXG4gICAgY29uc3QgY2VudHJlWSA9IGhlaWdodCAvIDI7XHJcbiAgICBjb25zdCByYWRpdXMgPSBoZWlnaHQgLyAyIC0gMjU7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYW5nbGUgPSAoMiAqIE1hdGguUEkgKiBpKSAvIG47XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHg6IGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgICAgICB5OiBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgeDogY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICB5OiBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmludGVyZmFjZSBOb2RlIHtcclxuICBhZ2VudDogSUFnZW50O1xyXG4gIGxlZnQ6IE5vZGU7XHJcbiAgcmlnaHQ6IE5vZGU7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZ2VudFRyZWUgaW1wbGVtZW50cyBJQWdlbnRDb2xsZWN0aW9uIHtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX3Jvb3QgPSB0aGlzLmNvbnN0cnVjdChhZ2VudHMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsKCk6IElBZ2VudFtdIHtcclxuICAgIHJldHVybiB0aGlzLmdldCh0aGlzLl9yb290KTtcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBtaW5YID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWluWSA9IGFnZW50LmdldFBvc2l0aW9uKCkueSAtIHJhbmdlO1xyXG4gICAgbGV0IG1heFggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggKyByYW5nZTtcclxuICAgIGxldCBtYXhZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55ICsgcmFuZ2U7XHJcblxyXG4gICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLnJlY3RpbGluZWFyKHRoaXMuX3Jvb3QsIG1pblgsIG1pblksIG1heFgsIG1heFksIHRydWUpO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZXMuZmlsdGVyKChvdGhlcikgPT4gb3RoZXIuSWQgIT09IGFnZW50LklkKTtcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuKGFnZW50OiBJQWdlbnQsIHJhbmdlOiBudW1iZXIpOiBJQWdlbnRbXSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudCwgcmFuZ2UpO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZXMuZmlsdGVyKFxyXG4gICAgICAob3RoZXIpID0+XHJcbiAgICAgICAgKGFnZW50LmdldFBvc2l0aW9uKCkueCAtIG90aGVyLmdldFBvc2l0aW9uKCkueCkgKiogMiArXHJcbiAgICAgICAgICAoYWdlbnQuZ2V0UG9zaXRpb24oKS55IC0gb3RoZXIuZ2V0UG9zaXRpb24oKS55KSAqKiAyIDw9XHJcbiAgICAgICAgcmFuZ2UgKiogMlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZvckVhY2goZnVuOiAoYWdlbnQ6IElBZ2VudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgdGhpcy5hcHBseSh0aGlzLl9yb290LCBmdW4pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3QoYWdlbnRzOiBJQWdlbnRbXSwgeEF4aXM6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGlmIChhZ2VudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtaWQgPSBNYXRoLmZsb29yKGFnZW50cy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBsZXQgc29ydGVkID0geEF4aXNcclxuICAgICAgPyBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnggLSBiLmdldFBvc2l0aW9uKCkueClcclxuICAgICAgOiBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnkgLSBiLmdldFBvc2l0aW9uKCkueSk7XHJcblxyXG4gICAgbGV0IGxlZnQgPSB0aGlzLmNvbnN0cnVjdChzb3J0ZWQuc2xpY2UoMCwgbWlkKSwgIXhBeGlzKTtcclxuICAgIGxldCByaWdodCA9IHRoaXMuY29uc3RydWN0KHNvcnRlZC5zbGljZShtaWQgKyAxLCBhZ2VudHMubGVuZ3RoKSwgIXhBeGlzKTtcclxuXHJcbiAgICByZXR1cm4geyBhZ2VudDogYWdlbnRzW21pZF0sIGxlZnQ6IGxlZnQsIHJpZ2h0OiByaWdodCB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbnNlcnQoYWdlbnQ6IElBZ2VudCwgcm9vdDogTm9kZSwgeEF4aXM6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGlmIChyb290ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIHsgYWdlbnQ6IGFnZW50LCBsZWZ0OiBudWxsLCByaWdodDogbnVsbCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh4QXhpcykge1xyXG4gICAgICBpZiAoYWdlbnQuZ2V0UG9zaXRpb24oKS54IDwgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLngpIHtcclxuICAgICAgICByb290LmxlZnQgPSB0aGlzLmluc2VydChhZ2VudCwgcm9vdC5sZWZ0LCAheEF4aXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvb3QucmlnaHQgPSB0aGlzLmluc2VydChhZ2VudCwgcm9vdC5yaWdodCwgIXhBeGlzKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGFnZW50LmdldFBvc2l0aW9uKCkueSA8IHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55KSB7XHJcbiAgICAgICAgcm9vdC5sZWZ0ID0gdGhpcy5pbnNlcnQoYWdlbnQsIHJvb3QubGVmdCwgIXhBeGlzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByb290LnJpZ2h0ID0gdGhpcy5pbnNlcnQoYWdlbnQsIHJvb3QucmlnaHQsICF4QXhpcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm9vdDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0KHJvb3Q6IE5vZGUpOiBJQWdlbnRbXSB7XHJcbiAgICBpZiAocm9vdCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZXQocm9vdC5sZWZ0KS5jb25jYXQodGhpcy5nZXQocm9vdC5yaWdodCkpLmNvbmNhdChyb290LmFnZW50KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVjdGlsaW5lYXIoXHJcbiAgICByb290OiBOb2RlLFxyXG4gICAgbWluWDogbnVtYmVyLFxyXG4gICAgbWluWTogbnVtYmVyLFxyXG4gICAgbWF4WDogbnVtYmVyLFxyXG4gICAgbWF4WTogbnVtYmVyLFxyXG4gICAgeEF4aXM6IGJvb2xlYW5cclxuICApOiBJQWdlbnRbXSB7XHJcbiAgICBpZiAocm9vdCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgaWYgKHhBeGlzKSB7XHJcbiAgICAgIC8vIElmIHggPD0gbWF4WCBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yZWN0aWxpbmVhcihyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeCA+PSBtaW5YIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmVjdGlsaW5lYXIocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgeSA8PSBtYXhZIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJlY3RpbGluZWFyKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB5ID49IG1pblkgbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yZWN0aWxpbmVhcihyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIGFnZW50IGlzIGluIHJhbmdlIHJhbmdlIGFkZCB0byB0aGUgcmVzdWx0XHJcbiAgICBpZiAoXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFlcclxuICAgICkge1xyXG4gICAgICByZXMgPSByZXMuY29uY2F0KHJvb3QuYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFwcGx5KHJvb3Q6IE5vZGUsIGZ1bjogKGFnZW50OiBJQWdlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIGlmIChyb290ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bihyb290LmFnZW50KTtcclxuICAgIHRoaXMuYXBwbHkocm9vdC5sZWZ0LCBmdW4pO1xyXG4gICAgdGhpcy5hcHBseShyb290LnJpZ2h0LCBmdW4pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSBcIi4vU2ltdWxhdGlvblwiO1xyXG5pbXBvcnQgeyBSZW5kZXJlcjJEIH0gZnJvbSBcIi4vUmVuZGVyZXIyRFwiO1xyXG5cclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgU3RvcEFnZW50IH0gZnJvbSBcIi4vU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25zIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgQWdlbnRMaXN0IH0gZnJvbSBcIi4vQWdlbnRMaXN0XCI7XHJcbmltcG9ydCB7IEFnZW50VHJlZSB9IGZyb20gXCIuL0FnZW50VHJlZVwiO1xyXG5cclxuY29uc3QgY29uZmlnU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maWdcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IGFnZW50VHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWdlbnRUeXBlXCJcclxuKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgbnVtYmVyT2ZBZ2VudHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwibnVtYmVyT2ZBZ2VudHNcIlxyXG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgZnJhbWVyYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXJhdGVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHN0ZXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0ZXBCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKGNhbnZhcyk7XHJcbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihyZW5kZXJlciwgbmV3IEFnZW50VHJlZSgpKTtcclxudmFyIHBsYXkgPSBmYWxzZTtcclxuXHJcbi8vIGluaXRpYWxpc2Ugc2ltdWxhdGlvbiBhbmQgYmVnaW4gdXBkYXRlL3JlbmRlciBsb29wXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xyXG4gIHRoaXMucmVjb25maWd1cmUoKTtcclxuXHJcbiAgbGV0IGxhc3RSZW5kZXIgPSAwO1xyXG4gIGxldCBsYXN0RlBTID0gMDtcclxuICBsZXQgZnJhbWVzID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXA6IG51bWJlcikge1xyXG4gICAgbGV0IGRlbHRhVCA9IHRpbWVzdGFtcCAtIGxhc3RSZW5kZXI7XHJcbiAgICBsYXN0UmVuZGVyID0gdGltZXN0YW1wO1xyXG5cclxuICAgIC8vIHVwZGF0ZVxyXG4gICAgaWYgKHBsYXkpIHtcclxuICAgICAgc2ltdWxhdGlvbi51cGRhdGUoZGVsdGFUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXJcclxuICAgIHNpbXVsYXRpb24uZHJhdygpO1xyXG4gICAgZnJhbWVzKys7XHJcblxyXG4gICAgLy8gcmVjYWxjdWxhdGUgZnJhbWVyYXRlIGV2ZXJ5IDI1MG1zXHJcbiAgICBpZiAodGltZXN0YW1wIC0gbGFzdEZQUyA+PSAyNTApIHtcclxuICAgICAgZnJhbWVyYXRlLnRleHRDb250ZW50ID0gYEZQUzogJHsoXHJcbiAgICAgICAgKDEwMDAgKiBmcmFtZXMpIC9cclxuICAgICAgICAodGltZXN0YW1wIC0gbGFzdEZQUylcclxuICAgICAgKS50b0ZpeGVkKDEpfWA7XHJcblxyXG4gICAgICBmcmFtZXMgPSAwO1xyXG4gICAgICBsYXN0RlBTID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG4vLyB0b2dnbGUgcGxheS9wYXVzZVxyXG5leHBvcnQgZnVuY3Rpb24gcGxheVBhdXNlKCkge1xyXG4gIHBsYXkgPSAhcGxheTtcclxuXHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBhdXNlXCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGxheVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gc3RlcCBzaW11bGF0aW9uIGJ5IDEgZnJhbWVcclxuZXhwb3J0IGZ1bmN0aW9uIHN0ZXAoKSB7XHJcbiAgc2ltdWxhdGlvbi51cGRhdGUoMTAwMCAvIDYwKTsgLy8gQXNzdW1lcyA2MEZQU1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjb25maWd1cmUoKSB7XHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHRoaXMucGxheVBhdXNlKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb25maWcgPSBjb25maWdTZWxlY3QudmFsdWU7XHJcbiAgY29uc3QgYWdlbnRUeXBlID0gYWdlbnRUeXBlU2VsZWN0LnZhbHVlOyAvLyBUT0RPOiB3aXJlIHRoaXMgaW5cclxuICBjb25zdCBuID0gcGFyc2VJbnQobnVtYmVyT2ZBZ2VudHNJbnB1dC52YWx1ZSkgPz8gMDtcclxuXHJcbiAgLy8gU2VsZWN0IGFnZW50IGNvbnN0cnVjdG9yXHJcbiAgbGV0IGFnZW50Q29uc3RydWN0b3I7XHJcbiAgc3dpdGNoIChhZ2VudFR5cGUpIHtcclxuICAgIGNhc2UgXCJCYXNpY0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IEJhc2ljQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIlN0b3BBZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBTdG9wQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZ2VudCBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTZWxlY3QgY29uZmlndXJhdGlvblxyXG4gIHN3aXRjaCAoY29uZmlnKSB7XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9SYW5kb21cIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9SYW5kb20oXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIlJhbmRvbVRvTGluZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub0xpbmUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIkNpcmNsZVRvQ2lyY2xlXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkNpcmNsZVRvQ2lyY2xlKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMzg5KTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==