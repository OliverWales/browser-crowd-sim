var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={775:(t,i,n)=>{n.r(i),n.d(i,{init:()=>v,playPause:()=>P,reconfigure:()=>b,step:()=>w});var e=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(n){n.update(t,i._agents.getNeighboursInRangeRectilinear(n,400))})),this._agents.forEach((function(t){t.finalize()})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),n=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var e=n.magnitude();if(0!==e){this._context.moveTo(i.x,i.y);var o=i.add(n.divide(e).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var n=Math.sqrt(Math.random())*i,e=2*Math.PI*Math.random();return new t(this.x+n*Math.cos(e),this.y+n*Math.sin(e))},t}(),s=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var n=this._goalPosition.subtract(this._position);n.magnitude()>60*t/1e3?(this._nextDirection=n.normalise(),this._nextPosition=this._position.add(this._nextDirection.multiply(60*t/1e3))):(this._nextPosition=this._goalPosition,this._isDone=!0)}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t}(),a=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var n=this;if(!this._isDone){var e=this._goalPosition.subtract(this._position);if(e.magnitude()>60*t/1e3){this._nextDirection=e.normalise();var o=this._position.add(this._nextDirection.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=n.Id&&n.collides(t,o)&&(n._isStuck=!0)})),this._isStuck||(this._nextPosition=this._position.add(this._nextDirection.multiply(60*t/1e3)))}else this._nextPosition=this._goalPosition,this._isDone=!0}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),u=function(){function t(){}return t.RandomToRandom=function(t,i,n,e){for(var o=[],s=0;s<t;s++){var a=e(s,new r(i*Math.random(),n*Math.random()),new r(i*Math.random(),n*Math.random()),20);o.push(a)}return{agents:o}},t.RandomToLine=function(t,i,n,e){for(var o=[],s=0;s<t;s++){var a=e(s,new r(i*Math.random(),n*Math.random()),new r((s+1)/(t+1)*i,n/2),20);o.push(a)}return{agents:o}},t.CircleToCircle=function(t,i,n,e){for(var o=[],s=i/2,a=n/2,u=n/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,g=e(h,new r(s+u*Math.cos(c),a+u*Math.sin(c)),new r(s+u*Math.cos(c+Math.PI),a+u*Math.sin(c+Math.PI)),20);o.push(g)}return{agents:o}},t}(),h=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var n=t.getPosition().x-i,e=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,n,e,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(n){return t.getPosition().subtract(n.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var n=Math.floor(t.length/2),e=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(e.slice(0,n),!i),r=this.constructTree(e.slice(n+1,t.length),!i);return{agent:t[n],left:o,right:r}},t.prototype.rangeSearch=function(t,i,n,e,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=e&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().y>=n&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=n&&t.agent.getPosition().x<=e&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),c=function(){function t(t,i,n,e){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var n,e,o=.5,s=this.getPreferredVelocity(o),a=!0,u=0;u<i.length;u++)if(null==(y=this.getVelocityObstacle(i[u]))||this.isInside(s,y)){a=!1,n=y,e=u;break}if(a)return this._nextDirection=s,this._nextPosition=this._position.add(s),void(this._nextPosition.subtract(this._goalPosition).magnitudeSqrd()<.1&&(this._isDone=!0,this._nextPosition=this._goalPosition,this._nextDirection=new r(0,0)));if(null!=n){var h=this.getClosestPointOnLine(n.vertex,n.tangent1,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++)if(u!=e&&(null==(g=this.getVelocityObstacle(i[u]))||this.isInside(h,g))){a=!1;break}if(a)return this._nextDirection=h,void(this._nextPosition=this._position.add(h))}var c=this.getClosestPointOnLine(n.vertex,n.tangent2,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++){var g;if(u!=e&&(null==(g=this.getVelocityObstacle(i[u]))||this.isInside(c,g))){a=!1;break}}if(a)return this._nextDirection=c,void(this._nextPosition=this._position.add(c))}}var d=1/0,p=new r(0,0);for(u=0;u<150;u++){for(var f=new r(0,0).sample(o),l=1/0,_=0;_<i.length;_++){var y,x=i[_];if(null==(y=this.getVelocityObstacle(x))||this.isInside(f,y)){var m=this.getFirstRayCircleIntersection(x.getPosition(),this.Radius+x.Radius,this._position,f);if(m<l&&0==(l=m))return}}var v=100/l+s.subtract(f).magnitude();v<d&&(d=v,p=f)}0==p.magnitude()&&(this._isStuck=!0),this._nextDirection=p,this._nextPosition=this._position.add(p)}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),n=i.magnitude();return n>t?i.divide(n/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),n=t.getPosition().subtract(this._position).add(i),e=t.Radius+this.Radius,o=i.subtract(n),s=o.magnitude();if(s<e)return null;var a=Math.acos(e/s),u=Math.atan2(o.y,o.x),h=u+a,c=u-a;return{vertex:i,tangent1:new r(n.x+e*Math.cos(h),n.y+e*Math.sin(h)),tangent2:new r(n.x+e*Math.cos(c),n.y+e*Math.sin(c))}},t.prototype.isInside=function(t,i){var n=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),e=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return n>0&&e<0},t.prototype.getClosestPointOnLine=function(t,i,n){var e=i.normalise(),o=n.subtract(t).dot(e);return t.add(e.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,n,e){var o=n.subtract(t),r=e.dot(e),s=2*e.dot(o),a=o.dot(o)-Math.pow(i,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var h=(-s-Math.sqrt(u))/2*r;return h<0?1/0:h},t}(),g=document.getElementById("config"),d=document.getElementById("agentType"),p=document.getElementById("numberOfAgents"),f=document.getElementById("canvas"),l=document.getElementById("framerate"),_=document.getElementById("playButton"),y=document.getElementById("stepButton"),x=new e(new o(f),new h),m=!1;function v(){this.reconfigure();var t=0,i=0,n=0;window.requestAnimationFrame((function e(o){var r=o-t;t=o,m&&x.update(r),x.draw(),n++,o-i>=250&&(l.textContent="FPS: "+(1e3*n/(o-i)).toFixed(1),n=0,i=o),window.requestAnimationFrame(e)}))}function P(){(m=!m)?(_.textContent="Pause",y.disabled=!0):(_.textContent="Play",y.disabled=!1)}function w(){x.update(1e3/60)}function b(){var t;m&&this.playPause();var i,n=g.value,e=d.value,o=null!==(t=parseInt(p.value))&&void 0!==t?t:0;switch(e){case"BasicAgent":i=function(t,i,n,e){return new s(t,i,n,e)};break;case"StopAgent":i=function(t,i,n,e){return new a(t,i,n,e)};break;case"VOAgent":i=function(t,i,n,e){return new c(t,i,n,e)};break;default:throw new Error("Agent not implemented")}switch(n){case"RandomToRandom":x.init(u.RandomToRandom(o,f.width,f.height,i));break;case"RandomToLine":x.init(u.RandomToLine(o,f.width,f.height,i));break;case"CircleToCircle":x.init(u.CircleToCircle(o,f.width,f.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function n(e){if(i[e])return i[e].exports;var o=i[e]={exports:{}};return t[e](o,o.exports,n),o.exports}return n.d=(t,i)=>{for(var e in i)n.o(i,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(775)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJmaW5hbGl6ZSIsImdldEFsbCIsImRyYXciLCJjbGVhciIsImRyYXdBZ2VudCIsImNhbnZhcyIsIl9jb250ZXh0IiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZ2V0RGlyZWN0aW9uIiwiYmVnaW5QYXRoIiwiZ2V0SXNEb25lIiwic3Ryb2tlU3R5bGUiLCJnZXRJc1N0dWNrIiwiYXJjIiwieCIsInkiLCJSYWRpdXMiLCJNYXRoIiwiUEkiLCJtYWduaXR1ZGUiLCJtb3ZlVG8iLCJuZXdQb3MiLCJhZGQiLCJkaXZpZGUiLCJtdWx0aXBseSIsImxpbmVUbyIsInN0cm9rZSIsImNvcHkiLCJ2IiwiVmVjdG9yMmYiLCJzdWJ0cmFjdCIsInMiLCJkb3QiLCJtYWduaXR1ZGVTcXJkIiwic3FydCIsIm5vcm1hbGlzZSIsIm0iLCJzYW1wbGUiLCJtYXhSYWRpdXMiLCJyYWRpdXMiLCJyYW5kb20iLCJhbmdsZSIsImNvcyIsInNpbiIsImlkIiwic3RhcnRQb3NpdGlvbiIsImdvYWxQb3NpdGlvbiIsIklkIiwiX3Bvc2l0aW9uIiwiX2dvYWxQb3NpdGlvbiIsIl9kaXJlY3Rpb24iLCJfbmV4dFBvc2l0aW9uIiwiX25leHREaXJlY3Rpb24iLCJfaXNEb25lIiwiZ29hbERpcmVjdGlvbiIsIl9pc1N0dWNrIiwiY29sbGlkZXMiLCJSYW5kb21Ub1JhbmRvbSIsIm4iLCJhZ2VudENvbnN0cnVjdG9yIiwiaSIsInB1c2giLCJSYW5kb21Ub0xpbmUiLCJDaXJjbGVUb0NpcmNsZSIsImNlbnRyZVgiLCJjZW50cmVZIiwiX3Jvb3QiLCJjb25zdHJ1Y3RUcmVlIiwicmFuZ2UiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwicmFuZ2VTZWFyY2giLCJmaWx0ZXIiLCJvdGhlciIsImdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuIiwiZnVuIiwieEF4aXMiLCJsZW5ndGgiLCJtaWQiLCJmbG9vciIsInNvcnRlZCIsInNvcnQiLCJhIiwiYiIsImxlZnQiLCJzbGljZSIsInJpZ2h0Iiwicm9vdCIsInJlcyIsImNvbmNhdCIsIk1BWF9WRUxPQ0lUWSIsIk1BWF9BQ0NFTEVSQVRJT04iLCJuZWlnaGJvdXJzIiwiY29sbGlzaW9uIiwic3BlZWQiLCJwcmVmZXJyZWRWZWxvY2l0eSIsImdldFByZWZlcnJlZFZlbG9jaXR5Iiwic2FmZSIsIlZPIiwiZ2V0VmVsb2NpdHlPYnN0YWNsZSIsImlzSW5zaWRlIiwiaGFsZnBsYW5lMSIsImdldENsb3Nlc3RQb2ludE9uTGluZSIsInZlcnRleCIsInRhbmdlbnQxIiwidmVsb2NpdHlPYnN0YWNsZSIsImhhbGZQbGFuZTIiLCJ0YW5nZW50MiIsIm1pblBlbmFsdHkiLCJJbmZpbml0eSIsImJlc3RWZWxvY2l0eSIsIm1pblRpbWVUb0NvbGxpc2lvbiIsImoiLCJ0aW1lVG9Db2xsaXNpb24iLCJnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbiIsInBlbmFsdHkiLCJtYXhTcGVlZCIsImdvYWxEaXN0YW5jZSIsInZlbG9jaXR5QiIsImNlbnRyZSIsImRpZmYiLCJkaXN0IiwidGhldGEiLCJhY29zIiwicGhpIiwiYXRhbjIiLCJhbmdsZTEiLCJhbmdsZTIiLCJ2ZWxvY2l0eSIsImRldGVybWluYW50MSIsImRldGVybWluYW50MiIsImxpbmVQb2ludCIsImxpbmVEaXJlY3Rpb24iLCJwb2ludCIsImRpc3RhbmNlIiwib3JpZ2luIiwiZGVsdGEiLCJjIiwiZGlzY3JpbSIsImNvbmZpZ1NlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZ2VudFR5cGVTZWxlY3QiLCJudW1iZXJPZkFnZW50c0lucHV0IiwiZnJhbWVyYXRlIiwicGxheUJ1dHRvbiIsInN0ZXBCdXR0b24iLCJzaW11bGF0aW9uIiwiU2ltdWxhdGlvbiIsIlJlbmRlcmVyMkQiLCJBZ2VudFRyZWUiLCJwbGF5IiwicmVjb25maWd1cmUiLCJsYXN0UmVuZGVyIiwibGFzdEZQUyIsImZyYW1lcyIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJ0aW1lc3RhbXAiLCJ0ZXh0Q29udGVudCIsInRvRml4ZWQiLCJwbGF5UGF1c2UiLCJkaXNhYmxlZCIsInN0ZXAiLCJ2YWx1ZSIsImFnZW50VHlwZSIsInBhcnNlSW50IiwiQmFzaWNBZ2VudCIsIlN0b3BBZ2VudCIsIlZPQWdlbnQiLCJFcnJvciIsIkNvbmZpZ3VyYXRpb25zIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sIm1hcHBpbmdzIjoia0pBSUEsaUJBSUUsV0FBWUEsRUFBcUJDLEdBQy9CQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsUUFBVUgsRUEyQm5CLE9BeEJFLFlBQUFJLEtBQUEsU0FBS0MsR0FDSEosS0FBS0UsUUFBUUMsS0FBS0MsRUFBT0wsU0FHM0IsWUFBQU0sT0FBQSxTQUFPQyxHQUFQLFdBRUVOLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1ILE9BQ0pDLEVBQ0EsRUFBS0osUUFBUU8sZ0NBQWdDRCxFQUpyQyxTQU9aUixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCQSxFQUFNRSxjQUVSVixLQUFLRSxRQUFRQyxLQUFLSCxLQUFLRSxRQUFRUyxXQUdqQyxZQUFBQyxLQUFBLHNCQUNFWixLQUFLQyxVQUFVWSxRQUNmYixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCLEVBQUtQLFVBQVVhLFVBQVVOLE9BRy9CLEVBakNBLEdDREEsYUFHRSxXQUFZTyxHQUNWZixLQUFLZ0IsU0FBV0QsRUFBT0UsV0FBVyxNQTBDdEMsT0F2Q0UsWUFB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QU9LLE1BQ1BMLEVBQU9NLE9BQ1B1RCxJQUdKLE1BRUYsUUFDRSxNQUFNLElBQUlrSCxNQUFNLHFDQy9KbEJFLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixHQUFHRixFQUF5QkUsR0FDM0IsT0FBT0YsRUFBeUJFLEdBQVVDLFFBRzNDLElBQUlDLEVBQVNKLEVBQXlCRSxHQUFZLENBR2pEQyxRQUFTLElBT1YsT0FIQUUsRUFBb0JILEdBQVVFLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9DRyxFQUFPRCxRQ2pCZixPQ0ZBRixFQUFvQkssRUFBSSxDQUFDSCxFQUFTSSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hOLEVBQW9CUSxFQUFFRixFQUFZQyxLQUFTUCxFQUFvQlEsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVAsRUFBb0JRLEVBQUksQ0FBQ0ssRUFBS0MsSUFBU0wsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDakZkLEVBQW9Ca0IsRUFBS2hCLElBQ0gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNYLE9BQU9DLGVBQWVSLEVBQVNpQixPQUFPQyxZQUFhLENBQUU3QixNQUFPLFdBRTdEa0IsT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUVYLE9BQU8sS0hGaERTLEVBQW9CLE0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IElDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uIHtcclxuICBfcmVuZGVyZXI6IElSZW5kZXJlcjtcclxuICBfYWdlbnRzOiBJQWdlbnRDb2xsZWN0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogSVJlbmRlcmVyLCBhZ2VudHM6IElBZ2VudENvbGxlY3Rpb24pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBhZ2VudHM7XHJcbiAgfVxyXG5cclxuICBpbml0KGNvbmZpZzogSUNvbmZpZ3VyYXRpb24pIHtcclxuICAgIHRoaXMuX2FnZW50cy5pbml0KGNvbmZpZy5hZ2VudHMpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKSB7XHJcbiAgICBsZXQgcmFuZ2UgPSA0MDA7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgYWdlbnQudXBkYXRlKFxyXG4gICAgICAgIGRlbHRhVCxcclxuICAgICAgICB0aGlzLl9hZ2VudHMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudCwgcmFuZ2UpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICBhZ2VudC5maW5hbGl6ZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdCh0aGlzLl9hZ2VudHMuZ2V0QWxsKCkpO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIuZHJhd0FnZW50KGFnZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIyRCBpbXBsZW1lbnRzIElSZW5kZXJlciB7XHJcbiAgX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpOiB2b2lkIHtcclxuICAgIHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsUmVjdChcclxuICAgICAgMCxcclxuICAgICAgMCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMud2lkdGgsXHJcbiAgICAgIHRoaXMuX2NvbnRleHQuY2FudmFzLmhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRyYXdBZ2VudChhZ2VudDogSUFnZW50KSB7XHJcbiAgICBsZXQgcG9zaXRpb24gPSBhZ2VudC5nZXRQb3NpdGlvbigpO1xyXG4gICAgbGV0IGRpcmVjdGlvbiA9IGFnZW50LmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgLy8gZHJhdyBhZ2VudFxyXG4gICAgaWYgKGFnZW50LmdldElzRG9uZSgpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMEZGMDBcIjtcclxuICAgIH0gZWxzZSBpZiAoYWdlbnQuZ2V0SXNTdHVjaygpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiNGRjAwMDBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMDAwMDBcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LmFyYyhwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBhZ2VudC5SYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAvLyBkcmF3IGRpcmVjdGlvblxyXG4gICAgbGV0IG1hZ25pdHVkZSA9IGRpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChtYWduaXR1ZGUgIT09IDApIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICAgIGxldCBuZXdQb3MgPSBwb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgZGlyZWN0aW9uLmRpdmlkZShtYWduaXR1ZGUpLm11bHRpcGx5KGFnZW50LlJhZGl1cylcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8obmV3UG9zLngsIG5ld1Bvcy55KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVmVjdG9yMmYge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICB9XHJcblxyXG4gIGNvcHkodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHYueCwgdi55KTtcclxuICB9XHJcblxyXG4gIGFkZCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54ICsgdi54LCB0aGlzLnkgKyB2LnkpO1xyXG4gIH1cclxuXHJcbiAgc3VidHJhY3QodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuICB9XHJcblxyXG4gIG11bHRpcGx5KHM6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54ICogcywgdGhpcy55ICogcyk7XHJcbiAgfVxyXG5cclxuICBkaXZpZGUoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggLyBzLCB0aGlzLnkgLyBzKTtcclxuICB9XHJcblxyXG4gIGRvdCh2OiBWZWN0b3IyZikge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICB9XHJcblxyXG4gIG1hZ25pdHVkZVNxcmQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnggKiogMiArIHRoaXMueSAqKiAyO1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubWFnbml0dWRlU3FyZCgpKTtcclxuICB9XHJcblxyXG4gIG5vcm1hbGlzZSgpOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgbSA9IHRoaXMubWFnbml0dWRlKCk7XHJcbiAgICByZXR1cm4gbSA9PSAwID8gbmV3IFZlY3RvcjJmKDAsIDApIDogdGhpcy5kaXZpZGUobSk7XHJcbiAgfVxyXG5cclxuICBzYW1wbGUobWF4UmFkaXVzOiBudW1iZXIpIHtcclxuICAgIC8vIFVuaWZvcm1seSBzYW1wbGUgdGhlIGNpcmNsZSBjZW50cmVkIGF0IHRoaXMgcG9pbnQgd2l0aCByYWRpdXMgbWF4UmFkaXVzXHJcbiAgICBsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KE1hdGgucmFuZG9tKCkpICogbWF4UmFkaXVzO1xyXG4gICAgbGV0IGFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZihcclxuICAgICAgdGhpcy54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICB0aGlzLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSlcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzaWNBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9uZXh0UG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX25leHREaXJlY3Rpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgX2FnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiAoZGVsdGFUICogNjApIC8gMTAwMCkge1xyXG4gICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKFxyXG4gICAgICAgIHRoaXMuX25leHREaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmaW5hbGl6ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IHRoaXMuX25leHREaXJlY3Rpb247XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX25leHRQb3NpdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9wQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJZDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBSYWRpdXM6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfbmV4dFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9uZXh0RGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IGdvYWxEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICAgIGxldCBoZWFkaW5nID0gdGhpcy5fcG9zaXRpb24uYWRkKHRoaXMuX25leHREaXJlY3Rpb24ubXVsdGlwbHkoMjApKTtcclxuXHJcbiAgICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICAgICAgYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGFnZW50LklkICE9IHRoaXMuSWQgJiYgdGhpcy5jb2xsaWRlcyhhZ2VudCwgaGVhZGluZykpIHtcclxuICAgICAgICAgIHRoaXMuX2lzU3R1Y2sgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuX2lzU3R1Y2spIHtcclxuICAgICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uLm11bHRpcGx5KChkZWx0YVQgKiA2MCkgLyAxMDAwKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmFsaXplKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gdGhpcy5fbmV4dERpcmVjdGlvbjtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fbmV4dFBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgY29sbGlkZXMoYWdlbnQ6IElBZ2VudCwgcG9zaXRpb246IFZlY3RvcjJmKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHBvc2l0aW9uKS5tYWduaXR1ZGUoKSA8XHJcbiAgICAgIGFnZW50LlJhZGl1cyArIHRoaXMuUmFkaXVzXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29uZmlndXJhdGlvbiB7XHJcbiAgYWdlbnRzOiBJQWdlbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb25zIHtcclxuICBzdGF0aWMgUmFuZG9tVG9SYW5kb20oXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFJhbmRvbSBzdGFydCBwb3NpdGlvbiB0byByYW5kb20gZ29hbCBwb3NpdGlvblxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZih3aWR0aCAqIE1hdGgucmFuZG9tKCksIGhlaWdodCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZih3aWR0aCAqIE1hdGgucmFuZG9tKCksIGhlaWdodCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIFJhbmRvbVRvTGluZShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIGZpeGVkIHBvc2l0aW9uIG9uIGxpbmVcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYod2lkdGggKiBNYXRoLnJhbmRvbSgpLCBoZWlnaHQgKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoKChpICsgMSkgLyAobiArIDEpKSAqIHdpZHRoLCBoZWlnaHQgLyAyKSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBDaXJjbGVUb0NpcmNsZShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUG9zaXRpb24gb24gcmFkaXVzIG9mIGNpcmNsZSB0byBvcHBvc2l0ZSBwb2ludFxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGNvbnN0IGNlbnRyZVggPSB3aWR0aCAvIDI7XHJcbiAgICBjb25zdCBjZW50cmVZID0gaGVpZ2h0IC8gMjtcclxuICAgIGNvbnN0IHJhZGl1cyA9IGhlaWdodCAvIDIgLSAyNTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhbmdsZSA9ICgyICogTWF0aC5QSSAqIGkpIC8gbjtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSxcclxuICAgICAgICAgIGNlbnRyZVkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSlcclxuICAgICAgICApLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZihcclxuICAgICAgICAgIGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSlcclxuICAgICAgICApLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuXHJcbmludGVyZmFjZSBOb2RlIHtcclxuICBhZ2VudDogSUFnZW50O1xyXG4gIGxlZnQ6IE5vZGU7XHJcbiAgcmlnaHQ6IE5vZGU7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZ2VudFRyZWUgaW1wbGVtZW50cyBJQWdlbnRDb2xsZWN0aW9uIHtcclxuICBwcml2YXRlIF9hZ2VudHM6IElBZ2VudFtdO1xyXG4gIHByaXZhdGUgX3Jvb3Q6IE5vZGU7XHJcblxyXG4gIGluaXQoYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgdGhpcy5fYWdlbnRzID0gYWdlbnRzO1xyXG4gICAgdGhpcy5fcm9vdCA9IHRoaXMuY29uc3RydWN0VHJlZSh0aGlzLl9hZ2VudHMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsKCk6IElBZ2VudFtdIHtcclxuICAgIHJldHVybiB0aGlzLl9hZ2VudHM7XHJcbiAgfVxyXG5cclxuICBnZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50OiBJQWdlbnQsIHJhbmdlOiBudW1iZXIpOiBJQWdlbnRbXSB7XHJcbiAgICBsZXQgbWluWCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCAtIHJhbmdlO1xyXG4gICAgbGV0IG1pblkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgLSByYW5nZTtcclxuICAgIGxldCBtYXhYID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54ICsgcmFuZ2U7XHJcbiAgICBsZXQgbWF4WSA9IGFnZW50LmdldFBvc2l0aW9uKCkueSArIHJhbmdlO1xyXG5cclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5yYW5nZVNlYXJjaCh0aGlzLl9yb290LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCB0cnVlKTtcclxuICAgIHJldHVybiBjYW5kaWRhdGVzLmZpbHRlcigob3RoZXIpID0+IG90aGVyLklkICE9PSBhZ2VudC5JZCk7XHJcbiAgfVxyXG5cclxuICBnZXROZWlnaGJvdXJzSW5SYW5nZUV1Y2xpZGVhbihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLmdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQsIHJhbmdlKTtcclxuICAgIHJldHVybiBjYW5kaWRhdGVzLmZpbHRlcihcclxuICAgICAgKG90aGVyKSA9PlxyXG4gICAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3Qob3RoZXIuZ2V0UG9zaXRpb24oKSkubWFnbml0dWRlU3FyZCgpIDw9XHJcbiAgICAgICAgcmFuZ2UgKiogMlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZvckVhY2goZnVuOiAoYWdlbnQ6IElBZ2VudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goZnVuKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0VHJlZShhZ2VudHM6IElBZ2VudFtdLCB4QXhpczogYm9vbGVhbik6IE5vZGUge1xyXG4gICAgaWYgKGFnZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1pZCA9IE1hdGguZmxvb3IoYWdlbnRzLmxlbmd0aCAvIDIpO1xyXG5cclxuICAgIGxldCBzb3J0ZWQgPSB4QXhpc1xyXG4gICAgICA/IGFnZW50cy5zb3J0KChhLCBiKSA9PiBhLmdldFBvc2l0aW9uKCkueCAtIGIuZ2V0UG9zaXRpb24oKS54KVxyXG4gICAgICA6IGFnZW50cy5zb3J0KChhLCBiKSA9PiBhLmdldFBvc2l0aW9uKCkueSAtIGIuZ2V0UG9zaXRpb24oKS55KTtcclxuXHJcbiAgICBsZXQgbGVmdCA9IHRoaXMuY29uc3RydWN0VHJlZShzb3J0ZWQuc2xpY2UoMCwgbWlkKSwgIXhBeGlzKTtcclxuICAgIGxldCByaWdodCA9IHRoaXMuY29uc3RydWN0VHJlZShcclxuICAgICAgc29ydGVkLnNsaWNlKG1pZCArIDEsIGFnZW50cy5sZW5ndGgpLFxyXG4gICAgICAheEF4aXNcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnQ6IGFnZW50c1ttaWRdLCBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmFuZ2VTZWFyY2goXHJcbiAgICByb290OiBOb2RlLFxyXG4gICAgbWluWDogbnVtYmVyLFxyXG4gICAgbWluWTogbnVtYmVyLFxyXG4gICAgbWF4WDogbnVtYmVyLFxyXG4gICAgbWF4WTogbnVtYmVyLFxyXG4gICAgeEF4aXM6IGJvb2xlYW5cclxuICApOiBJQWdlbnRbXSB7XHJcbiAgICBpZiAocm9vdCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgaWYgKHhBeGlzKSB7XHJcbiAgICAgIC8vIElmIHggPD0gbWF4WCBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeCA+PSBtaW5YIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgeSA8PSBtYXhZIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB5ID49IG1pblkgbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIGFnZW50IGlzIGluIHJhbmdlIHJhbmdlIGFkZCB0byB0aGUgcmVzdWx0XHJcbiAgICBpZiAoXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFlcclxuICAgICkge1xyXG4gICAgICByZXMucHVzaChyb290LmFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuaW50ZXJmYWNlIFZlbG9jaXR5T2JzdGFjbGUge1xyXG4gIC8vIFZlbG9jaXR5IG9iamVjdCBkZWZpbmVkIGJ5IGEgcG9pbnQgYW5kIHR3byBkaXJlY3Rpb24gdmVjdG9yc1xyXG4gIHZlcnRleDogVmVjdG9yMmY7XHJcbiAgdGFuZ2VudDE6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQyOiBWZWN0b3IyZjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZPQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIFJhZGl1czogbnVtYmVyO1xyXG4gIElkOiBudW1iZXI7XHJcblxyXG4gIE1BWF9WRUxPQ0lUWSA9IDEuMDtcclxuICBNQVhfQUNDRUxFUkFUSU9OID0gMC41O1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9uZXh0UG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX25leHREaXJlY3Rpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XHJcbiAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIG5laWdoYm91cnM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICBsZXQgc3BlZWQgPSAwLjU7XHJcbiAgICBsZXQgcHJlZmVycmVkVmVsb2NpdHkgPSB0aGlzLmdldFByZWZlcnJlZFZlbG9jaXR5KHNwZWVkKTtcclxuXHJcbiAgICBsZXQgc2FmZSA9IHRydWU7XHJcbiAgICBsZXQgY29sbGlzaW9uO1xyXG4gICAgbGV0IGFnZW50O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBWTyA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgaWYgKFZPID09IG51bGwgfHwgdGhpcy5pc0luc2lkZShwcmVmZXJyZWRWZWxvY2l0eSwgVk8pKSB7XHJcbiAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgIGNvbGxpc2lvbiA9IFZPO1xyXG4gICAgICAgIGFnZW50ID0gaTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHByZWZlcnJlZCB2ZWxvY2l0eSBpcyBzYWZlLCBnbyBpbiB0aGF0IGRpcmVjdGlvblxyXG4gICAgaWYgKHNhZmUpIHtcclxuICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IHByZWZlcnJlZFZlbG9jaXR5O1xyXG4gICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQocHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2dvYWxQb3NpdGlvbikubWFnbml0dWRlU3FyZCgpIDwgMC4xXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb2xsaXNpb24gIT0gbnVsbCkge1xyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIGZpcnN0IGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhhbGZwbGFuZTEgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MSxcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgdGhpcy5pc0luc2lkZShoYWxmcGxhbmUxLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYWZlKSB7XHJcbiAgICAgICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gaGFsZnBsYW5lMTtcclxuICAgICAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmcGxhbmUxKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEVsc2UsIGNvbnNpZGVyIGNsb3Nlc3QgcG9pbnQgb24gc2Vjb25kIGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhhbGZQbGFuZTIgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MixcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgdGhpcy5pc0luc2lkZShoYWxmUGxhbmUyLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYWZlKSB7XHJcbiAgICAgICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gaGFsZlBsYW5lMjtcclxuICAgICAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmUGxhbmUyKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbHNlLCBzYW1wbGUgcmFuZG9tIHZlbG9jaXRpZXMgYW5kIHNlbGVjdCB0aGUgb25lIHdpdGggdGhlIGxlYXN0IHBlbmFsdHlcclxuICAgIGxldCBzYW1wbGVzID0gMTUwOyAvLyBudW1iZXIgb2YgdmVsb2NpdGllcyB0byB0cnlcclxuICAgIGxldCB3ID0gMTAwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGxldCBtaW5QZW5hbHR5ID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFZlbG9jaXR5ID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XHJcbiAgICAgIC8vIFNhbXBsZSB2ZWxvY2l0eSBmcm9tIGVudGlyZSBhbGxvd2VkIHZlbG9jaXR5IHNwYWNlXHJcbiAgICAgIGxldCBzYW1wbGUgPSBuZXcgVmVjdG9yMmYoMCwgMCkuc2FtcGxlKHNwZWVkKTtcclxuICAgICAgbGV0IG1pblRpbWVUb0NvbGxpc2lvbiA9IEluZmluaXR5O1xyXG5cclxuICAgICAgLy8gRmluZCB0aW1lIHRvIGZpcnN0IGNvbGxpc2lvblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBsZXQgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgbGV0IFZPID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKGIpO1xyXG4gICAgICAgIGlmIChWTyA9PSBudWxsIHx8IHRoaXMuaXNJbnNpZGUoc2FtcGxlLCBWTykpIHtcclxuICAgICAgICAgIGxldCB0aW1lVG9Db2xsaXNpb24gPSB0aGlzLmdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgICAgICBiLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIHRoaXMuUmFkaXVzICsgYi5SYWRpdXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLFxyXG4gICAgICAgICAgICBzYW1wbGVcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgaWYgKHRpbWVUb0NvbGxpc2lvbiA8IG1pblRpbWVUb0NvbGxpc2lvbikge1xyXG4gICAgICAgICAgICBtaW5UaW1lVG9Db2xsaXNpb24gPSB0aW1lVG9Db2xsaXNpb247XHJcbiAgICAgICAgICAgIGlmIChtaW5UaW1lVG9Db2xsaXNpb24gPT0gMCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHlcclxuICAgICAgbGV0IHBlbmFsdHkgPVxyXG4gICAgICAgIHcgLyBtaW5UaW1lVG9Db2xsaXNpb24gKyBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpOyAvLyBUUyBjb3JyZWN0bHkgaGFuZGxlcyBkaXZpZGUgYnkgemVybyBvciBpbmZpbml0eVxyXG4gICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICBiZXN0VmVsb2NpdHkgPSBzYW1wbGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmVzdFZlbG9jaXR5Lm1hZ25pdHVkZSgpID09IDApIHtcclxuICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IGJlc3RWZWxvY2l0eTtcclxuICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChiZXN0VmVsb2NpdHkpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgZmluYWxpemUoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB0aGlzLl9uZXh0RGlyZWN0aW9uO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9uZXh0UG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFByZWZlcnJlZFZlbG9jaXR5KG1heFNwZWVkOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gbWF4U3BlZWQpIHtcclxuICAgICAgcmV0dXJuIGdvYWxEaXJlY3Rpb24uZGl2aWRlKGdvYWxEaXN0YW5jZSAvIG1heFNwZWVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnb2FsRGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRWZWxvY2l0eU9ic3RhY2xlKGI6IElBZ2VudCk6IFZlbG9jaXR5T2JzdGFjbGUgfCBudWxsIHtcclxuICAgIGxldCB2ZWxvY2l0eUIgPSBiLmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIC8vIFRyYW5zbGF0ZSBvcmlnaW4gdG8gdGhpcyBhZ2VudCdzIHBvc2l0aW9uXHJcbiAgICBsZXQgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBsZXQgY2VudHJlID0gcG9zaXRpb25CLmFkZCh2ZWxvY2l0eUIpO1xyXG4gICAgbGV0IHJhZGl1cyA9IGIuUmFkaXVzICsgdGhpcy5SYWRpdXM7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGFuZ2xlc1xyXG4gICAgbGV0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGxldCBkaXN0ID0gZGlmZi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChkaXN0IDwgcmFkaXVzKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aGV0YSA9IE1hdGguYWNvcyhyYWRpdXMgLyBkaXN0KTtcclxuICAgIGxldCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBsZXQgYW5nbGUxID0gcGhpICsgdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDEgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUxKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTEpXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGxldCB0YW5nZW50MiA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTIpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHZlbG9jaXR5IG9ic3RhY2xlXHJcbiAgICByZXR1cm4geyB2ZXJ0ZXg6IHZlbG9jaXR5QiwgdGFuZ2VudDE6IHRhbmdlbnQxLCB0YW5nZW50MjogdGFuZ2VudDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUodmVsb2NpdHk6IFZlY3RvcjJmLCBWTzogVmVsb2NpdHlPYnN0YWNsZSk6IGJvb2xlYW4ge1xyXG4gICAgLy8gRmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MSA9XHJcbiAgICAgIChWTy50YW5nZW50MS54IC0gVk8udmVydGV4LngpICogKHZlbG9jaXR5LnkgLSBWTy52ZXJ0ZXgueSkgLVxyXG4gICAgICAoVk8udGFuZ2VudDEueSAtIFZPLnZlcnRleC55KSAqICh2ZWxvY2l0eS54IC0gVk8udmVydGV4LngpO1xyXG5cclxuICAgIC8vIFNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQyID1cclxuICAgICAgKFZPLnRhbmdlbnQyLnggLSBWTy52ZXJ0ZXgueCkgKiAodmVsb2NpdHkueSAtIFZPLnZlcnRleC55KSAtXHJcbiAgICAgIChWTy50YW5nZW50Mi55IC0gVk8udmVydGV4LnkpICogKHZlbG9jaXR5LnggLSBWTy52ZXJ0ZXgueCk7XHJcblxyXG4gICAgcmV0dXJuIGRldGVybWluYW50MSA+IDAgJiYgZGV0ZXJtaW5hbnQyIDwgMDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgbGluZVBvaW50OiBWZWN0b3IyZixcclxuICAgIGxpbmVEaXJlY3Rpb246IFZlY3RvcjJmLFxyXG4gICAgcG9pbnQ6IFZlY3RvcjJmXHJcbiAgKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IGRpcmVjdGlvbiA9IGxpbmVEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICBsZXQgdmVjdG9yID0gcG9pbnQuc3VidHJhY3QobGluZVBvaW50KTtcclxuICAgIGxldCBkaXN0YW5jZSA9IHZlY3Rvci5kb3QoZGlyZWN0aW9uKTtcclxuICAgIHJldHVybiBsaW5lUG9pbnQuYWRkKGRpcmVjdGlvbi5tdWx0aXBseShkaXN0YW5jZSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgIGNlbnRyZTogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlcixcclxuICAgIG9yaWdpbjogVmVjdG9yMmYsXHJcbiAgICBkaXJlY3Rpb246IFZlY3RvcjJmXHJcbiAgKTogbnVtYmVyIHtcclxuICAgIGxldCBkZWx0YSA9IG9yaWdpbi5zdWJ0cmFjdChjZW50cmUpO1xyXG5cclxuICAgIGxldCBhID0gZGlyZWN0aW9uLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgbGV0IGIgPSAyICogZGlyZWN0aW9uLmRvdChkZWx0YSk7XHJcbiAgICBsZXQgYyA9IGRlbHRhLmRvdChkZWx0YSkgLSByYWRpdXMgKiogMjtcclxuXHJcbiAgICBsZXQgZGlzY3JpbSA9IGIgKiogMiAtIDQgKiBhICogYztcclxuXHJcbiAgICBpZiAoZGlzY3JpbSA8IDApIHtcclxuICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZGlzdGFuY2UgPSAoKC1iIC0gTWF0aC5zcXJ0KGRpc2NyaW0pKSAvIDIpICogYTtcclxuXHJcbiAgICBpZiAoZGlzdGFuY2UgPCAwKSB7XHJcbiAgICAgIC8vIEludGVyc2VjdGlvbiBiZWhpbmRcclxuICAgICAgcmV0dXJuIEluZmluaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkaXN0YW5jZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2ltdWxhdGlvbiB9IGZyb20gXCIuL1NpbXVsYXRpb25cIjtcclxuaW1wb3J0IHsgUmVuZGVyZXIyRCB9IGZyb20gXCIuL1JlbmRlcmVyMkRcIjtcclxuXHJcbmltcG9ydCB7IEJhc2ljQWdlbnQgfSBmcm9tIFwiLi9CYXNpY0FnZW50XCI7XHJcbmltcG9ydCB7IFN0b3BBZ2VudCB9IGZyb20gXCIuL1N0b3BBZ2VudFwiO1xyXG5pbXBvcnQgeyBDb25maWd1cmF0aW9ucyB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25zXCI7XHJcbmltcG9ydCB7IEFnZW50VHJlZSB9IGZyb20gXCIuL0FnZW50VHJlZVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcbmltcG9ydCB7IFZPQWdlbnQgfSBmcm9tIFwiLi9WT0FnZW50XCI7XHJcblxyXG5jb25zdCBjb25maWdTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpZ1wiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgYWdlbnRUeXBlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJhZ2VudFR5cGVcIlxyXG4pIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBudW1iZXJPZkFnZW50c0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJudW1iZXJPZkFnZW50c1wiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBmcmFtZXJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYW1lcmF0ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheUJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgc3RlcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RlcEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQoY2FudmFzKTtcclxuY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHJlbmRlcmVyLCBuZXcgQWdlbnRUcmVlKCkpO1xyXG52YXIgcGxheSA9IGZhbHNlO1xyXG5cclxuLy8gaW5pdGlhbGlzZSBzaW11bGF0aW9uIGFuZCBiZWdpbiB1cGRhdGUvcmVuZGVyIGxvb3BcclxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgdGhpcy5yZWNvbmZpZ3VyZSgpO1xyXG5cclxuICBsZXQgbGFzdFJlbmRlciA9IDA7XHJcbiAgbGV0IGxhc3RGUFMgPSAwO1xyXG4gIGxldCBmcmFtZXMgPSAwO1xyXG5cclxuICBmdW5jdGlvbiBsb29wKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBsZXQgZGVsdGFUID0gdGltZXN0YW1wIC0gbGFzdFJlbmRlcjtcclxuICAgIGxhc3RSZW5kZXIgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgLy8gdXBkYXRlXHJcbiAgICBpZiAocGxheSkge1xyXG4gICAgICBzaW11bGF0aW9uLnVwZGF0ZShkZWx0YVQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbmRlclxyXG4gICAgc2ltdWxhdGlvbi5kcmF3KCk7XHJcbiAgICBmcmFtZXMrKztcclxuXHJcbiAgICAvLyByZWNhbGN1bGF0ZSBmcmFtZXJhdGUgZXZlcnkgMjUwbXNcclxuICAgIGlmICh0aW1lc3RhbXAgLSBsYXN0RlBTID49IDI1MCkge1xyXG4gICAgICBmcmFtZXJhdGUudGV4dENvbnRlbnQgPSBgRlBTOiAkeyhcclxuICAgICAgICAoMTAwMCAqIGZyYW1lcykgL1xyXG4gICAgICAgICh0aW1lc3RhbXAgLSBsYXN0RlBTKVxyXG4gICAgICApLnRvRml4ZWQoMSl9YDtcclxuXHJcbiAgICAgIGZyYW1lcyA9IDA7XHJcbiAgICAgIGxhc3RGUFMgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuXHJcbi8vIHRvZ2dsZSBwbGF5L3BhdXNlXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5UGF1c2UoKSB7XHJcbiAgcGxheSA9ICFwbGF5O1xyXG5cclxuICBpZiAocGxheSkge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGF1c2VcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQbGF5XCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBzdGVwIHNpbXVsYXRpb24gYnkgMSBmcmFtZVxyXG5leHBvcnQgZnVuY3Rpb24gc3RlcCgpIHtcclxuICBzaW11bGF0aW9uLnVwZGF0ZSgxMDAwIC8gNjApOyAvLyBBc3N1bWVzIDYwRlBTXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvbmZpZ3VyZSgpIHtcclxuICBpZiAocGxheSkge1xyXG4gICAgdGhpcy5wbGF5UGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ1NlbGVjdC52YWx1ZTtcclxuICBjb25zdCBhZ2VudFR5cGUgPSBhZ2VudFR5cGVTZWxlY3QudmFsdWU7IC8vIFRPRE86IHdpcmUgdGhpcyBpblxyXG4gIGNvbnN0IG4gPSBwYXJzZUludChudW1iZXJPZkFnZW50c0lucHV0LnZhbHVlKSA/PyAwO1xyXG5cclxuICAvLyBTZWxlY3QgYWdlbnQgY29uc3RydWN0b3JcclxuICBsZXQgYWdlbnRDb25zdHJ1Y3RvcjtcclxuICBzd2l0Y2ggKGFnZW50VHlwZSkge1xyXG4gICAgY2FzZSBcIkJhc2ljQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IEJhc2ljQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIlN0b3BBZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgU3RvcEFnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJWT0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBWT0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWdlbnQgbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VsZWN0IGNvbmZpZ3VyYXRpb25cclxuICBzd2l0Y2ggKGNvbmZpZykge1xyXG4gICAgY2FzZSBcIlJhbmRvbVRvUmFuZG9tXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvUmFuZG9tKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJSYW5kb21Ub0xpbmVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9MaW5lKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJDaXJjbGVUb0NpcmNsZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5DaXJjbGVUb0NpcmNsZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3NSk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=