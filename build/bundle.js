var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={240:(t,n,e)=>{e.r(n),e.d(n,{init:()=>f,playPause:()=>y,reconfigure:()=>l,step:()=>x});var o=function(){function t(t){this._renderer=t,this._agents=[]}return t.prototype.init=function(t){this._agents=t.agents},t.prototype.update=function(t){this._agents.forEach((function(n){n.update(t)}))},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(n){t._renderer.drawAgent(n)}))},t}(),i=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var n=t.getPosition(),e=t.getDirection();if(this._context.beginPath(),this._context.arc(n.x,n.y,t.Radius,0,2*Math.PI),0!==e.dx||0!==e.dy){var o=Math.sqrt(Math.pow(e.dx,2)+Math.pow(e.dy,2));this._context.moveTo(n.x,n.y),this._context.lineTo(n.x+t.Radius*e.dx/o,n.y+t.Radius*e.dy/o)}this._context.stroke()},t}(),r=function(){function t(t,n,e){this._position=t,this._goalPosition=n,this.Radius=e,this._direction={dx:0,dy:0}}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.update=function(t){var n={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},e=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));e>t/16?(this._direction.dx=n.x/e,this._direction.dy=n.y/e,this._position.x+=t/16*this._direction.dx,this._position.y+=t/16*this._direction.dy):(this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y)},t}(),a=function(){function t(){}return t.RandomToRandom=function(t,n,e,o){for(var i=[],r=0;r<t;r++){var a=o({x:n*Math.random(),y:e*Math.random()},{x:n*Math.random(),y:e*Math.random()},20);i.push(a)}return{agents:i}},t.RandomToLine=function(t,n,e,o){for(var i=[],r=0;r<t;r++){var a=o({x:n*Math.random(),y:e*Math.random()},{x:(r+1)/(t+1)*n,y:e/2},20);i.push(a)}return{agents:i}},t.CircleToCircle=function(t,n,e,o){for(var i=[],r=n/2,a=e/2,s=e/2-25,h=0;h<t;h++){var u=2*Math.PI*h/t,c=o({x:r+s*Math.cos(u),y:a+s*Math.sin(u)},{x:r+s*Math.cos(u+Math.PI),y:a+s*Math.sin(u+Math.PI)},20);i.push(c)}return{agents:i}},t}(),s=document.getElementById("canvas"),h=document.getElementById("framerate"),u=document.getElementById("playButton"),c=document.getElementById("stepButton"),d=new o(new i(s)),p=!1;function f(){this.reconfigure(0);var t=0,n=0,e=0;window.requestAnimationFrame((function o(i){var r=i-t;t=i,p&&d.update(r),d.draw(),e++,i-n>=250&&(h.textContent="FPS: "+(1e3*e/(i-n)).toFixed(1),e=0,n=i),window.requestAnimationFrame(o)}))}function y(){(p=!p)?(u.textContent="Pause",c.disabled=!0):(u.textContent="Play",c.disabled=!1)}function x(){d.update(1e3/60)}function l(t){switch(p&&this.playPause(),t){case 0:d.init(a.RandomToRandom(25,s.width,s.height,(function(t,n,e){return new r(t,n,e)})));break;case 1:d.init(a.RandomToLine(25,s.width,s.height,(function(t,n,e){return new r(t,n,e)})));break;case 2:d.init(a.CircleToCircle(25,s.width,s.height,(function(t,n,e){return new r(t,n,e)})));break;default:throw new Error("Configuration not implemented")}}}},n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{}};return t[o](i,i.exports,e),i.exports}return e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(240)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9Db25maWd1cmF0aW9ucy50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9tYWluLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sIm5hbWVzIjpbInJlbmRlcmVyIiwidGhpcyIsIl9yZW5kZXJlciIsIl9hZ2VudHMiLCJpbml0IiwiY29uZmlnIiwiYWdlbnRzIiwidXBkYXRlIiwiZGVsdGFUIiwiZm9yRWFjaCIsImFnZW50IiwiZHJhdyIsImNsZWFyIiwiZHJhd0FnZW50IiwiY2FudmFzIiwiX2NvbnRleHQiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJkaXJlY3Rpb24iLCJnZXREaXJlY3Rpb24iLCJiZWdpblBhdGgiLCJhcmMiLCJ4IiwieSIsIlJhZGl1cyIsIk1hdGgiLCJQSSIsImR4IiwiZHkiLCJtYWduaXR1ZGUiLCJzcXJ0IiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiZ29hbFBvc2l0aW9uIiwicmFkaXVzIiwiX3Bvc2l0aW9uIiwiX2dvYWxQb3NpdGlvbiIsIl9kaXJlY3Rpb24iLCJnb2FsRGlyZWN0aW9uIiwiZ29hbERpc3RhbmNlIiwiUmFuZG9tVG9SYW5kb20iLCJuIiwiYWdlbnRDb25zdHJ1Y3RvciIsImkiLCJyYW5kb20iLCJwdXNoIiwiUmFuZG9tVG9MaW5lIiwiQ2lyY2xlVG9DaXJjbGUiLCJjZW50cmVYIiwiY2VudHJlWSIsImFuZ2xlIiwiY29zIiwic2luIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZyYW1lcmF0ZSIsInBsYXlCdXR0b24iLCJzdGVwQnV0dG9uIiwic2ltdWxhdGlvbiIsIlNpbXVsYXRpb24iLCJSZW5kZXJlcjJEIiwicGxheSIsInJlY29uZmlndXJlIiwibGFzdFJlbmRlciIsImxhc3RGUFMiLCJmcmFtZXMiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wIiwidGltZXN0YW1wIiwidGV4dENvbnRlbnQiLCJ0b0ZpeGVkIiwicGxheVBhdXNlIiwiZGlzYWJsZWQiLCJzdGVwIiwiaW5kZXgiLCJDb25maWd1cmF0aW9ucyIsInMiLCJnIiwiciIsIkJhc2ljQWdlbnQiLCJFcnJvciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiXSwibWFwcGluZ3MiOiJrSkFJQSxpQkFJRSxXQUFZQSxHQUNWQyxLQUFLQyxVQUFZRixFQUNqQkMsS0FBS0UsUUFBVSxHQW1CbkIsT0FoQkUsWUFBQUMs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QyxFQUFHQyxHQUFNLFdBQUlDLEVBQVdILEVBQUdDLEVBQUdDLE9BR3RDLE1BRUYsUUFDRSxNQUFNLElBQUlFLE1BQU0scUNDL0dsQkMsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLEdBQUdGLEVBQXlCRSxHQUMzQixPQUFPRixFQUF5QkUsR0FBVUMsUUFHM0MsSUFBSUMsRUFBU0osRUFBeUJFLEdBQVksQ0FHakRDLFFBQVMsSUFPVixPQUhBRSxFQUFvQkgsR0FBVUUsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0NHLEVBQU9ELFFDakJmLE9DRkFGLEVBQW9CSyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWE4sRUFBb0JRLEVBQUVGLEVBQVlDLEtBQVNQLEVBQW9CUSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NqRmQsRUFBb0JKLEVBQUtNLElBQ0gsb0JBQVhnQixRQUEwQkEsT0FBT0MsYUFDMUNWLE9BQU9DLGVBQWVSLEVBQVNnQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RYLE9BQU9DLGVBQWVSLEVBQVMsYUFBYyxDQUFFa0IsT0FBTyxLSEZoRHBCLEVBQW9CLE0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5pbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgX3JlbmRlcmVyOiBJUmVuZGVyZXI7XHJcbiAgX2FnZW50czogSUFnZW50W107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBbXTtcclxuICB9XHJcblxyXG4gIGluaXQoY29uZmlnOiBJQ29uZmlndXJhdGlvbikge1xyXG4gICAgdGhpcy5fYWdlbnRzID0gY29uZmlnLmFnZW50cztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIGFnZW50LnVwZGF0ZShkZWx0YVQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnQoYWdlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICB0aGlzLl9jb250ZXh0LmFyYyhwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBhZ2VudC5SYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAvLyBkcmF3IGRpcmVjdGlvblxyXG4gICAgaWYgKGRpcmVjdGlvbi5keCAhPT0gMCB8fCBkaXJlY3Rpb24uZHkgIT09IDApIHtcclxuICAgICAgbGV0IG1hZ25pdHVkZSA9IE1hdGguc3FydChkaXJlY3Rpb24uZHggKiogMiArIGRpcmVjdGlvbi5keSAqKiAyKTtcclxuXHJcbiAgICAgIHRoaXMuX2NvbnRleHQubW92ZVRvKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhcclxuICAgICAgICBwb3NpdGlvbi54ICsgKGFnZW50LlJhZGl1cyAqIGRpcmVjdGlvbi5keCkgLyBtYWduaXR1ZGUsXHJcbiAgICAgICAgcG9zaXRpb24ueSArIChhZ2VudC5SYWRpdXMgKiBkaXJlY3Rpb24uZHkpIC8gbWFnbml0dWRlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5zdHJva2UoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzaWNBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogeyBkeDogbnVtYmVyOyBkeTogbnVtYmVyIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB7IGR4OiAwLCBkeTogMCB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHtcclxuICAgICAgeDogdGhpcy5fZ29hbFBvc2l0aW9uLnggLSB0aGlzLl9wb3NpdGlvbi54LFxyXG4gICAgICB5OiB0aGlzLl9nb2FsUG9zaXRpb24ueSAtIHRoaXMuX3Bvc2l0aW9uLnksXHJcbiAgICB9O1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IE1hdGguc3FydChnb2FsRGlyZWN0aW9uLnggKiogMiArIGdvYWxEaXJlY3Rpb24ueSAqKiAyKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gZGVsdGFUIC8gMTYpIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uLmR4ID0gZ29hbERpcmVjdGlvbi54IC8gZ29hbERpc3RhbmNlO1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24uZHkgPSBnb2FsRGlyZWN0aW9uLnkgLyBnb2FsRGlzdGFuY2U7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnggKz0gKGRlbHRhVCAvIDE2KSAqIHRoaXMuX2RpcmVjdGlvbi5keDtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueSArPSAoZGVsdGFUIC8gMTYpICogdGhpcy5fZGlyZWN0aW9uLmR5O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueCA9IHRoaXMuX2dvYWxQb3NpdGlvbi54O1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi55ID0gdGhpcy5fZ29hbFBvc2l0aW9uLnk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29uZmlndXJhdGlvbiB7XHJcbiAgYWdlbnRzOiBJQWdlbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb25zIHtcclxuICBzdGF0aWMgUmFuZG9tVG9SYW5kb20oXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIHsgeDogd2lkdGggKiBNYXRoLnJhbmRvbSgpLCB5OiBoZWlnaHQgKiBNYXRoLnJhbmRvbSgpIH0sXHJcbiAgICAgICAgeyB4OiB3aWR0aCAqIE1hdGgucmFuZG9tKCksIHk6IGhlaWdodCAqIE1hdGgucmFuZG9tKCkgfSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBSYW5kb21Ub0xpbmUoXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIGZpeGVkIHBvc2l0aW9uIG9uIGxpbmVcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgeyB4OiB3aWR0aCAqIE1hdGgucmFuZG9tKCksIHk6IGhlaWdodCAqIE1hdGgucmFuZG9tKCkgfSxcclxuICAgICAgICB7IHg6ICgoaSArIDEpIC8gKG4gKyAxKSkgKiB3aWR0aCwgeTogaGVpZ2h0IC8gMiB9LFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFBvc2l0aW9uIG9uIHJhZGl1cyBvZiBjaXJjbGUgdG8gb3Bwb3NpdGUgcG9pbnRcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBjb25zdCBjZW50cmVYID0gd2lkdGggLyAyO1xyXG4gICAgY29uc3QgY2VudHJlWSA9IGhlaWdodCAvIDI7XHJcbiAgICBjb25zdCByYWRpdXMgPSBoZWlnaHQgLyAyIC0gMjU7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYW5nbGUgPSAoMiAqIE1hdGguUEkgKiBpKSAvIG47XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICB7XHJcbiAgICAgICAgICB4OiBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgeTogY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHg6IGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkpLFxyXG4gICAgICAgICAgeTogY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2ltdWxhdGlvbiB9IGZyb20gXCIuL1NpbXVsYXRpb25cIjtcclxuaW1wb3J0IHsgUmVuZGVyZXIyRCB9IGZyb20gXCIuL1JlbmRlcmVyMkRcIjtcclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbnMsIElDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBmcmFtZXJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYW1lcmF0ZVwiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheUJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgc3RlcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RlcEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQoY2FudmFzKTtcclxuY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHJlbmRlcmVyKTtcclxudmFyIHBsYXkgPSBmYWxzZTtcclxuXHJcbi8vIGluaXRpYWxpc2Ugc2ltdWxhdGlvbiBhbmQgYmVnaW4gdXBkYXRlL3JlbmRlciBsb29wXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xyXG4gIHRoaXMucmVjb25maWd1cmUoMCk7XHJcblxyXG4gIGxldCBsYXN0UmVuZGVyID0gMDtcclxuICBsZXQgbGFzdEZQUyA9IDA7XHJcbiAgbGV0IGZyYW1lcyA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIGxvb3AodGltZXN0YW1wOiBudW1iZXIpIHtcclxuICAgIGxldCBkZWx0YVQgPSB0aW1lc3RhbXAgLSBsYXN0UmVuZGVyO1xyXG4gICAgbGFzdFJlbmRlciA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICAvLyB1cGRhdGVcclxuICAgIGlmIChwbGF5KSB7XHJcbiAgICAgIHNpbXVsYXRpb24udXBkYXRlKGRlbHRhVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyXHJcbiAgICBzaW11bGF0aW9uLmRyYXcoKTtcclxuICAgIGZyYW1lcysrO1xyXG5cclxuICAgIC8vIHJlY2FsY3VsYXRlIGZyYW1lcmF0ZSBldmVyeSAyNTBtc1xyXG4gICAgaWYgKHRpbWVzdGFtcCAtIGxhc3RGUFMgPj0gMjUwKSB7XHJcbiAgICAgIGZyYW1lcmF0ZS50ZXh0Q29udGVudCA9IGBGUFM6ICR7KFxyXG4gICAgICAgICgxMDAwICogZnJhbWVzKSAvXHJcbiAgICAgICAgKHRpbWVzdGFtcCAtIGxhc3RGUFMpXHJcbiAgICAgICkudG9GaXhlZCgxKX1gO1xyXG5cclxuICAgICAgZnJhbWVzID0gMDtcclxuICAgICAgbGFzdEZQUyA9IHRpbWVzdGFtcDtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG4gIH1cclxuXHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxufVxyXG5cclxuLy8gdG9nZ2xlIHBsYXkvcGF1c2VcclxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQYXVzZSgpIHtcclxuICBwbGF5ID0gIXBsYXk7XHJcblxyXG4gIGlmIChwbGF5KSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQYXVzZVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBsYXlcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHN0ZXAgc2ltdWxhdGlvbiBieSAxIGZyYW1lXHJcbmV4cG9ydCBmdW5jdGlvbiBzdGVwKCkge1xyXG4gIHNpbXVsYXRpb24udXBkYXRlKDEwMDAgLyA2MCk7IC8vIEFzc3VtZXMgNjBGUFNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlY29uZmlndXJlKGluZGV4OiBudW1iZXIpIHtcclxuICBpZiAocGxheSkge1xyXG4gICAgdGhpcy5wbGF5UGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IG4gPSAyNTtcclxuXHJcbiAgc3dpdGNoIChpbmRleCkge1xyXG4gICAgY2FzZSAwOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub1JhbmRvbShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgKHMsIGcsIHIpID0+IG5ldyBCYXNpY0FnZW50KHMsIGcsIHIpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgMToge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9MaW5lKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICAocywgZywgcikgPT4gbmV3IEJhc2ljQWdlbnQocywgZywgcilcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSAyOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5DaXJjbGVUb0NpcmNsZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgKHMsIGcsIHIpID0+IG5ldyBCYXNpY0FnZW50KHMsIGcsIHIpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMjQwKTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==