var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={775:(t,i,e)=>{e.r(i),e.d(i,{init:()=>x,playPause:()=>w,reconfigure:()=>b,step:()=>P});var n=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(e){e.update(t,i._agents.getNeighboursInRangeRectilinear(e,300))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),e=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var n=e.magnitude();if(0!==n){this._context.moveTo(i.x,i.y);var o=i.add(e.divide(n).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var e=Math.sqrt(Math.random())*i,n=2*Math.PI*Math.random();return new t(this.x+e*Math.cos(n),this.y+e*Math.sin(n))},t}(),s=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var e=this._goalPosition.subtract(this._position);e.magnitude()>60*t/1e3?(this._direction=e.normalise(),this._position=this._position.add(this._direction.multiply(60*t/1e3))):(this._position=this._goalPosition,this._isDone=!0)}},t}(),a=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var e=this;if(!this._isDone){var n=this._goalPosition.subtract(this._position);if(n.magnitude()>60*t/1e3){this._direction=n.normalise();var o=this._position.add(this._direction.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=e.Id&&e.collides(t,o)&&(e._isStuck=!0)})),this._isStuck||(this._position=this._position.add(this._direction.multiply(60*t/1e3)))}else this._position=this._goalPosition,this._isDone=!0}},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),u=function(){function t(){}return t.RandomToRandom=function(t,i,e,n){for(var o=[],r=this.poissonDiskSample(i,e,t,50),s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var u=n(a,r[a],s[a],20);o.push(u)}return{agents:o}},t.RandomToLine=function(t,i,e,n){for(var o=[],s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var u=n(a,s[a],new r((a+1)/(t+1)*i,e/2),20);o.push(u)}return{agents:o}},t.CircleToCircle=function(t,i,e,n){for(var o=[],s=i/2,a=e/2,u=e/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,d=n(h,new r(s+u*Math.cos(c),a+u*Math.sin(c)),new r(s+u*Math.cos(c+Math.PI),a+u*Math.sin(c+Math.PI)),20);o.push(d)}return{agents:o}},t.GridToGrid=function(t,i,e,n){for(var o=[],s=Math.ceil(t/8),a=i-50-80*(s-1),u=e/2-120,h=0,c=0;c<s;c++){for(var d=0;d<4;d++){var g=new r(50+80*c,u+80*d),p=new r(a+80*c,u+80*d);if(o.push(n(h,g,p,20)),++h>=t)break;if(o.push(n(h,p,g,20)),++h>=t)break}if(h>=t)break}return{agents:o}},t.poissonDiskSample=function(t,i,e,n){for(var o=[],s=function(){for(var e,s=!0;s;)s=!1,e=new r(t*Math.random(),i*Math.random()),o.forEach((function(t){e.subtract(t).magnitudeSqrd()<Math.pow(n,2)&&(s=!0)}));o.push(e)},a=0;a<e;a++)s();return o},t}(),h=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var e=t.getPosition().x-i,n=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,e,n,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(e){return t.getPosition().subtract(e.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var e=Math.floor(t.length/2),n=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(n.slice(0,e),!i),r=this.constructTree(n.slice(e+1,t.length),!i);return{agent:t[e],left:o,right:r}},t.prototype.rangeSearch=function(t,i,e,n,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=n&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().y>=e&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=e&&t.agent.getPosition().x<=n&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),c=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var e,n,o=.5,s=this.getPreferredVelocity(o),a=!0,u=0;u<i.length;u++)if(null==(_=this.getVelocityObstacle(i[u]))||this.isInside(s,_)){a=!1,e=_,n=u;break}if(a)return this._direction=s,this._position=this._position.add(s),void(this._position.subtract(this._goalPosition).magnitudeSqrd()<.1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0)));if(null!=e){var h=this.getClosestPointOnLine(e.vertex,e.tangent1,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++)if(u!=n&&(null==(d=this.getVelocityObstacle(i[u]))||this.isInside(h,d))){a=!1;break}if(a)return this._direction=h,void(this._position=this._position.add(h))}var c=this.getClosestPointOnLine(e.vertex,e.tangent2,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++){var d;if(u!=n&&(null==(d=this.getVelocityObstacle(i[u]))||this.isInside(c,d))){a=!1;break}}if(a)return this._direction=c,void(this._position=this._position.add(c))}}var g=1/0,p=new r(0,0);for(u=0;u<100;u++){for(var f=new r(0,0).sample(o),l=1/0,y=0;y<i.length;y++){var _,v=i[y];if(null==(_=this.getVelocityObstacle(v))||this.isInside(f,_)){var m=this.getFirstRayCircleIntersection(v.getPosition(),this.Radius+v.Radius,this._position,f);if(m<l&&0==(l=m))return}}var x=50/l+s.subtract(f).magnitude();x<g&&(g=x,p=f)}0==p.magnitude()&&(this._isStuck=!0),this._direction=p,this._position=this._position.add(p)}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),e=t.getPosition().subtract(this._position).add(i),n=t.Radius+this.Radius,o=i.subtract(e),s=o.magnitude();if(s<n)return null;var a=Math.acos(n/s),u=Math.atan2(o.y,o.x),h=u+a,c=u-a;return{vertex:i,tangent1:new r(e.x+n*Math.cos(h),e.y+n*Math.sin(h)),tangent2:new r(e.x+n*Math.cos(c),e.y+n*Math.sin(c))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var h=(-s-Math.sqrt(u))/2*r;return h<0?1/0:h},t}(),d=document.getElementById("config"),g=document.getElementById("agentType"),p=document.getElementById("numberOfAgents"),f=document.getElementById("canvas"),l=document.getElementById("framerate"),y=document.getElementById("playButton"),_=document.getElementById("stepButton"),v=new n(new o(f),new h),m=!1;function x(){this.reconfigure();var t=0,i=0,e=0;window.requestAnimationFrame((function n(o){var r=o-t;t=o,m&&v.update(r),v.draw(),e++,o-i>=250&&(l.textContent="FPS: "+(1e3*e/(o-i)).toFixed(1),e=0,i=o),window.requestAnimationFrame(n)}))}function w(){(m=!m)?(y.textContent="Pause",_.disabled=!0):(y.textContent="Play",_.disabled=!1)}function P(){v.update(1e3/60)}function b(){var t;m&&this.playPause();var i,e=d.value,n=g.value,o=null!==(t=parseInt(p.value))&&void 0!==t?t:0;switch(n){case"BasicAgent":i=function(t,i,e,n){return new s(t,i,e,n)};break;case"StopAgent":i=function(t,i,e,n){return new a(t,i,e,n)};break;case"VOAgent":i=function(t,i,e,n){return new c(t,i,e,n)};break;default:throw new Error("Agent not implemented")}switch(e){case"RandomToRandom":v.init(u.RandomToRandom(o,f.width,f.height,i));break;case"RandomToLine":v.init(u.RandomToLine(o,f.width,f.height,i));break;case"CircleToCircle":v.init(u.CircleToCircle(o,f.width,f.height,i));break;case"GridToGrid":v.init(u.GridToGrid(o,f.width,f.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}return e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(775)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJnZXRBbGwiLCJkcmF3IiwiY2xlYXIiLCJkcmF3QWdlbnQiLCJjYW52YXMiLCJfY29udGV4dCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsImRpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsImJlZ2luUGF0aCIsImdldElzRG9uZSIsInN0cm9rZVN0eWxlIiwiZ2V0SXNTdHVjayIsImFyYyIsIngiLCJ5IiwiUmFkaXVzIiwiTWF0aCIsIlBJIiwibWFnbml0dWRlIiwibW92ZVRvIiwibmV3UG9zIiwiYWRkIiwiZGl2aWRlIiwibXVsdGlwbHkiLCJsaW5lVG8iLCJzdHJva2UiLCJjb3B5IiwidiIsIlZlY3RvcjJmIiwic3VidHJhY3QiLCJzIiwiZG90IiwibWFnbml0dWRlU3FyZCIsInNxcnQiLCJub3JtYWxpc2UiLCJtIiwic2FtcGxlIiwibWF4UmFkaXVzIiwicmFkaXVzIiwicmFuZG9tIiwiYW5nbGUiLCJjb3MiLCJzaW4iLCJpZCIsInN0YXJ0UG9zaXRpb24iLCJnb2FsUG9zaXRpb24iLCJJZCIsIl9wb3NpdGlvbiIsIl9nb2FsUG9zaXRpb24iLCJfZGlyZWN0aW9uIiwiX2lzRG9uZSIsImdvYWxEaXJlY3Rpb24iLCJfaXNTdHVjayIsImNvbGxpZGVzIiwiUmFuZG9tVG9SYW5kb20iLCJuIiwiYWdlbnRDb25zdHJ1Y3RvciIsInN0YXJ0UG9zaXRpb25zIiwicG9pc3NvbkRpc2tTYW1wbGUiLCJnb2FsUG9zaXRpb25zIiwiaSIsInB1c2giLCJSYW5kb21Ub0xpbmUiLCJDaXJjbGVUb0NpcmNsZSIsImNlbnRyZVgiLCJjZW50cmVZIiwiR3JpZFRvR3JpZCIsImNvbHMiLCJjZWlsIiwicmlnaHQiLCJ0b3AiLCJqIiwiYSIsImIiLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJ0aHJlc2hvbGQiLCJzYW1wbGVzIiwicG9zIiwicmVzYW1wbGUiLCJfcm9vdCIsImNvbnN0cnVjdFRyZWUiLCJyYW5nZSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJyYW5nZVNlYXJjaCIsImZpbHRlciIsIm90aGVyIiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4iLCJmdW4iLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImxlZnQiLCJzbGljZSIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJNQVhfVkVMT0NJVFkiLCJNQVhfQUNDRUxFUkFUSU9OIiwibmVpZ2hib3VycyIsImNvbGxpc2lvbiIsInNwZWVkIiwicHJlZmVycmVkVmVsb2NpdHkiLCJnZXRQcmVmZXJyZWRWZWxvY2l0eSIsInNhZmUiLCJWTyIsImdldFZlbG9jaXR5T2JzdGFjbGUiLCJpc0luc2lkZSIsImhhbGZwbGFuZTEiLCJnZXRDbG9zZXN0UG9pbnRPbkxpbmUiLCJ2ZXJ0ZXgiLCJ0YW5nZW50MSIsInZlbG9jaXR5T2JzdGFjbGUiLCJoYWxmUGxhbmUyIiwidGFuZ2VudDIiLCJtaW5QZW5hbHR5IiwiSW5maW5pdHkiLCJiZXN0VmVsb2NpdHkiLCJtaW5UaW1lVG9Db2xsaXNpb24iLCJ0aW1lVG9Db2xsaXNpb24iLCJnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbiIsInBlbmFsdHkiLCJtYXhTcGVlZCIsImdvYWxEaXN0YW5jZSIsInZlbG9jaXR5QiIsImNlbnRyZSIsImRpZmYiLCJkaXN0IiwidGhldGEiLCJhY29zIiwicGhpIiwiYXRhbjIiLCJhbmdsZTEiLCJhbmdsZTIiLCJ2ZWxvY2l0eSIsImRldGVybWluYW50MSIsImRldGVybWluYW50MiIsImxpbmVQb2ludCIsImxpbmVEaXJlY3Rpb24iLCJwb2ludCIsImRpc3RhbmNlIiwib3JpZ2luIiwiZGVsdGEiLCJjIiwiZGlzY3JpbSIsImNvbmZpZ1NlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZ2VudFR5cGVTZWxlY3QiLCJudW1iZXJPZkFnZW50c0lucHV0IiwiZnJhbWVyYXRlIiwicGxheUJ1dHRvbiIsInN0ZXBCdXR0b24iLCJzaW11bGF0aW9uIiwiU2ltdWxhdGlvbiIsIlJlbmRlcmVyMkQiLCJBZ2VudFRyZWUiLCJwbGF5IiwicmVjb25maWd1cmUiLCJsYXN0UmVuZGVyIiwibGFzdEZQUyIsImZyYW1lcyIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJ0aW1lc3RhbXAiLCJ0ZXh0Q29udGVudCIsInRvRml4ZWQiLCJwbGF5UGF1c2UiLCJkaXNhYmxlZCIsInN0ZXAiLCJ2YWx1ZSIsImFnZW50VHlwZSIsInBhcnNlSW50IiwiQmFzaWNBZ2VudCIsIlN0b3BBZ2VudCIsIlZPQWdlbnQiLCJFcnJvciIsIkNvbmZpZ3VyYXRpb25zIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sIm1hcHBpbmdzIjoia0pBSUEsaUJBSUUsV0FBWUEsRUFBcUJDLEdBQy9CQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsUUFBVUgsRUF5Qm5CLE9BdEJFLFlBQUFJLEtBQUEsU0FBS0MsR0FDSEosS0FBS0UsUUFBUUMsS0FBS0MsRUFBT0wsU0FHM0IsWUFBQU0sT0FBQSxTQUFPQyxHQUFQLFdBRUVOLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1ILE9BQ0pDLEVBQ0EsRUFBS0osUUFBUU8sZ0NBQWdDRCxFQUpyQyxTQVFaUixLQUFLRSxRQUFRQyxLQUFLSCxLQUFLRSxRQUFRUSxXQUdqQyxZQUFBQyxLQUFBLHNCQUNFWCxLQUFLQyxVQUFVVyxRQUNmWixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCLEVBQUtQLFVBQVVZLFVBQVVMLE9BRy9CLEVBL0JBLEdDREEs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LEtBQVNQLEVBQW9CUSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NqRmQsRUFBb0JrQixFQUFLaEIsSUFDSCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ1gsT0FBT0MsZUFBZVIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRTdCLE1BQU8sV0FFN0RrQixPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRVgsT0FBTyxLSEZoRFMsRUFBb0IsTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gIF9yZW5kZXJlcjogSVJlbmRlcmVyO1xyXG4gIF9hZ2VudHM6IElBZ2VudENvbGxlY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIsIGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICB9XHJcblxyXG4gIGluaXQoY29uZmlnOiBJQ29uZmlndXJhdGlvbikge1xyXG4gICAgdGhpcy5fYWdlbnRzLmluaXQoY29uZmlnLmFnZW50cyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpIHtcclxuICAgIGxldCByYW5nZSA9IDMwMDtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICBhZ2VudC51cGRhdGUoXHJcbiAgICAgICAgZGVsdGFULFxyXG4gICAgICAgIHRoaXMuX2FnZW50cy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2FnZW50cy5pbml0KHRoaXMuX2FnZW50cy5nZXRBbGwoKSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnQoYWdlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICBpZiAoYWdlbnQuZ2V0SXNEb25lKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwRkYwMFwiO1xyXG4gICAgfSBlbHNlIGlmIChhZ2VudC5nZXRJc1N0dWNrKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0ZGMDAwMFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBsZXQgbWFnbml0dWRlID0gZGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKG1hZ25pdHVkZSAhPT0gMCkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvc2l0aW9uLmFkZChcclxuICAgICAgICBkaXJlY3Rpb24uZGl2aWRlKG1hZ25pdHVkZSkubXVsdGlwbHkoYWdlbnQuUmFkaXVzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhuZXdQb3MueCwgbmV3UG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBWZWN0b3IyZiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gIH1cclxuXHJcbiAgY29weSh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodi54LCB2LnkpO1xyXG4gIH1cclxuXHJcbiAgYWRkKHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBzdWJ0cmFjdCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG4gIH1cclxuXHJcbiAgbXVsdGlwbHkoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuICB9XHJcblxyXG4gIGRpdmlkZShzOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAvIHMsIHRoaXMueSAvIHMpO1xyXG4gIH1cclxuXHJcbiAgZG90KHY6IFZlY3RvcjJmKSB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlU3FyZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDI7XHJcbiAgfVxyXG5cclxuICBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5tYWduaXR1ZGVTcXJkKCkpO1xyXG4gIH1cclxuXHJcbiAgbm9ybWFsaXNlKCk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBtID0gdGhpcy5tYWduaXR1ZGUoKTtcclxuICAgIHJldHVybiBtID09IDAgPyBuZXcgVmVjdG9yMmYoMCwgMCkgOiB0aGlzLmRpdmlkZShtKTtcclxuICB9XHJcblxyXG4gIHNhbXBsZShtYXhSYWRpdXM6IG51bWJlcikge1xyXG4gICAgLy8gVW5pZm9ybWx5IHNhbXBsZSB0aGUgY2lyY2xlIGNlbnRyZWQgYXQgdGhpcyBwb2ludCB3aXRoIHJhZGl1cyBtYXhSYWRpdXNcclxuICAgIGxldCByYWRpdXMgPSBNYXRoLnNxcnQoTWF0aC5yYW5kb20oKSkgKiBtYXhSYWRpdXM7XHJcbiAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKFxyXG4gICAgICB0aGlzLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgIHRoaXMueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIC8vIFRoaXMgYWdlbnQgY2Fubm90IGdldCBzdHVja1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGdvYWxEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKFxyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbi5tdWx0aXBseSgoZGVsdGFUICogNjApIC8gMTAwMClcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3BBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fZGlyZWN0aW9uLm11bHRpcGx5KDIwKSk7XHJcblxyXG4gICAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICAgIGlmIChhZ2VudC5JZCAhPSB0aGlzLklkICYmIHRoaXMuY29sbGlkZXMoYWdlbnQsIGhlYWRpbmcpKSB7XHJcbiAgICAgICAgICB0aGlzLl9pc1N0dWNrID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLl9pc1N0dWNrKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlcyhhZ2VudDogSUFnZW50LCBwb3NpdGlvbjogVmVjdG9yMmYpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3QocG9zaXRpb24pLm1hZ25pdHVkZSgpIDxcclxuICAgICAgYWdlbnQuUmFkaXVzICsgdGhpcy5SYWRpdXNcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZSh3aWR0aCwgaGVpZ2h0LCBuLCA1MCk7XHJcbiAgICBsZXQgZ29hbFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGxldCBzdGFydFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZigoKGkgKyAxKSAvIChuICsgMSkpICogd2lkdGgsIGhlaWdodCAvIDIpLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBQb3NpdGlvbiBvbiByYWRpdXMgb2YgY2lyY2xlIHRvIG9wcG9zaXRlIHBvaW50XHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3QgY2VudHJlWCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGNlbnRyZVkgPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzID0gaGVpZ2h0IC8gMiAtIDI1O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuZ2xlID0gKDIgKiBNYXRoLlBJICogaSkgLyBuO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoXHJcbiAgICAgICAgICBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgR3JpZFRvR3JpZChcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gVHdvIG9wcG9zaW5nIGdyaWRzIG9mIGFnZW50cyBwYXNzaW5nIHRocm91Z2ggZWFjaG90aGVyXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHJvd3MgPSA0O1xyXG4gICAgbGV0IGNvbHMgPSBNYXRoLmNlaWwobiAvICgyICogcm93cykpO1xyXG4gICAgbGV0IHNwYWNpbmcgPSA4MDtcclxuICAgIGxldCBsZWZ0ID0gNTA7XHJcbiAgICBsZXQgcmlnaHQgPSB3aWR0aCAtIGxlZnQgLSBzcGFjaW5nICogKGNvbHMgLSAxKTtcclxuICAgIGxldCB0b3AgPSBoZWlnaHQgLyAyIC0gKHNwYWNpbmcgLyAyKSAqIChyb3dzIC0gMSk7XHJcblxyXG4gICAgbGV0IGlkID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93czsgaisrKSB7XHJcbiAgICAgICAgbGV0IGEgPSBuZXcgVmVjdG9yMmYobGVmdCArIHNwYWNpbmcgKiBpLCB0b3AgKyBzcGFjaW5nICogaik7XHJcbiAgICAgICAgbGV0IGIgPSBuZXcgVmVjdG9yMmYocmlnaHQgKyBzcGFjaW5nICogaSwgdG9wICsgc3BhY2luZyAqIGopO1xyXG5cclxuICAgICAgICAvLyBMZWZ0IGdyaWRcclxuICAgICAgICBhZ2VudHMucHVzaChhZ2VudENvbnN0cnVjdG9yKGlkLCBhLCBiLCAyMCkpO1xyXG4gICAgICAgIGlkKys7XHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmlnaHQgZ3JpZFxyXG4gICAgICAgIGFnZW50cy5wdXNoKGFnZW50Q29uc3RydWN0b3IoaWQsIGIsIGEsIDIwKSk7XHJcbiAgICAgICAgaWQrKztcclxuXHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaWQgPj0gbikge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHBvaXNzb25EaXNrU2FtcGxlKFxyXG4gICAgeFJhbmdlOiBudW1iZXIsXHJcbiAgICB5UmFuZ2U6IG51bWJlcixcclxuICAgIG46IG51bWJlcixcclxuICAgIHRocmVzaG9sZDogbnVtYmVyXHJcbiAgKTogVmVjdG9yMmZbXSB7XHJcbiAgICBsZXQgc2FtcGxlczogVmVjdG9yMmZbXSA9IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGxldCByZXNhbXBsZSA9IHRydWU7XHJcbiAgICAgIGxldCBwb3M6IFZlY3RvcjJmO1xyXG5cclxuICAgICAgd2hpbGUgKHJlc2FtcGxlKSB7XHJcbiAgICAgICAgcmVzYW1wbGUgPSBmYWxzZTtcclxuICAgICAgICBwb3MgPSBuZXcgVmVjdG9yMmYoeFJhbmdlICogTWF0aC5yYW5kb20oKSwgeVJhbmdlICogTWF0aC5yYW5kb20oKSk7XHJcblxyXG4gICAgICAgIHNhbXBsZXMuZm9yRWFjaCgoc2FtcGxlKSA9PiB7XHJcbiAgICAgICAgICBpZiAocG9zLnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlU3FyZCgpIDwgdGhyZXNob2xkICoqIDIpIHtcclxuICAgICAgICAgICAgcmVzYW1wbGUgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzYW1wbGVzLnB1c2gocG9zKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2FtcGxlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5pbnRlcmZhY2UgTm9kZSB7XHJcbiAgYWdlbnQ6IElBZ2VudDtcclxuICBsZWZ0OiBOb2RlO1xyXG4gIHJpZ2h0OiBOb2RlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWdlbnRUcmVlIGltcGxlbWVudHMgSUFnZW50Q29sbGVjdGlvbiB7XHJcbiAgcHJpdmF0ZSBfYWdlbnRzOiBJQWdlbnRbXTtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICAgIHRoaXMuX3Jvb3QgPSB0aGlzLmNvbnN0cnVjdFRyZWUodGhpcy5fYWdlbnRzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldEFsbCgpOiBJQWdlbnRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IG1pblggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggLSByYW5nZTtcclxuICAgIGxldCBtaW5ZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWF4WCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCArIHJhbmdlO1xyXG4gICAgbGV0IG1heFkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgKyByYW5nZTtcclxuXHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMucmFuZ2VTZWFyY2godGhpcy5fcm9vdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoKG90aGVyKSA9PiBvdGhlci5JZCAhPT0gYWdlbnQuSWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4oYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoXHJcbiAgICAgIChvdGhlcikgPT5cclxuICAgICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KG90aGVyLmdldFBvc2l0aW9uKCkpLm1hZ25pdHVkZVNxcmQoKSA8PVxyXG4gICAgICAgIHJhbmdlICoqIDJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGZ1bjogKGFnZW50OiBJQWdlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKGZ1bik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdFRyZWUoYWdlbnRzOiBJQWdlbnRbXSwgeEF4aXM6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGlmIChhZ2VudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtaWQgPSBNYXRoLmZsb29yKGFnZW50cy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBsZXQgc29ydGVkID0geEF4aXNcclxuICAgICAgPyBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnggLSBiLmdldFBvc2l0aW9uKCkueClcclxuICAgICAgOiBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnkgLSBiLmdldFBvc2l0aW9uKCkueSk7XHJcblxyXG4gICAgbGV0IGxlZnQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoc29ydGVkLnNsaWNlKDAsIG1pZCksICF4QXhpcyk7XHJcbiAgICBsZXQgcmlnaHQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoXHJcbiAgICAgIHNvcnRlZC5zbGljZShtaWQgKyAxLCBhZ2VudHMubGVuZ3RoKSxcclxuICAgICAgIXhBeGlzXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB7IGFnZW50OiBhZ2VudHNbbWlkXSwgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJhbmdlU2VhcmNoKFxyXG4gICAgcm9vdDogTm9kZSxcclxuICAgIG1pblg6IG51bWJlcixcclxuICAgIG1pblk6IG51bWJlcixcclxuICAgIG1heFg6IG51bWJlcixcclxuICAgIG1heFk6IG51bWJlcixcclxuICAgIHhBeGlzOiBib29sZWFuXHJcbiAgKTogSUFnZW50W10ge1xyXG4gICAgaWYgKHJvb3QgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlczogSUFnZW50W10gPSBbXTtcclxuICAgIGlmICh4QXhpcykge1xyXG4gICAgICAvLyBJZiB4IDw9IG1heFggbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHggPj0gbWluWCBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIHkgPD0gbWF4WSBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeSA+PSBtaW5ZIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBhZ2VudCBpcyBpbiByYW5nZSByYW5nZSBhZGQgdG8gdGhlIHJlc3VsdFxyXG4gICAgaWYgKFxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkgJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZXHJcbiAgICApIHtcclxuICAgICAgcmVzLnB1c2gocm9vdC5hZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmludGVyZmFjZSBWZWxvY2l0eU9ic3RhY2xlIHtcclxuICAvLyBWZWxvY2l0eSBvYmplY3QgZGVmaW5lZCBieSBhIHBvaW50IGFuZCB0d28gZGlyZWN0aW9uIHZlY3RvcnNcclxuICB2ZXJ0ZXg6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQxOiBWZWN0b3IyZjtcclxuICB0YW5nZW50MjogVmVjdG9yMmY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWT0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBSYWRpdXM6IG51bWJlcjtcclxuICBJZDogbnVtYmVyO1xyXG5cclxuICBNQVhfVkVMT0NJVFkgPSAxLjA7XHJcbiAgTUFYX0FDQ0VMRVJBVElPTiA9IDAuNTtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX2lzU3R1Y2s6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNTdHVjaztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgbmVpZ2hib3VyczogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICAgIGxldCBzcGVlZCA9IDAuNTtcclxuICAgIGxldCBwcmVmZXJyZWRWZWxvY2l0eSA9IHRoaXMuZ2V0UHJlZmVycmVkVmVsb2NpdHkoc3BlZWQpO1xyXG5cclxuICAgIGxldCBzYWZlID0gdHJ1ZTtcclxuICAgIGxldCBjb2xsaXNpb247XHJcbiAgICBsZXQgYWdlbnQ7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IFZPID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICBpZiAoVk8gPT0gbnVsbCB8fCB0aGlzLmlzSW5zaWRlKHByZWZlcnJlZFZlbG9jaXR5LCBWTykpIHtcclxuICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgY29sbGlzaW9uID0gVk87XHJcbiAgICAgICAgYWdlbnQgPSBpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgcHJlZmVycmVkIHZlbG9jaXR5IGlzIHNhZmUsIGdvIGluIHRoYXQgZGlyZWN0aW9uXHJcbiAgICBpZiAoc2FmZSkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBwcmVmZXJyZWRWZWxvY2l0eTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQocHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgICBpZiAodGhpcy5fcG9zaXRpb24uc3VidHJhY3QodGhpcy5fZ29hbFBvc2l0aW9uKS5tYWduaXR1ZGVTcXJkKCkgPCAwLjEpIHtcclxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbGxpc2lvbiAhPSBudWxsKSB7XHJcbiAgICAgIC8vIEVsc2UsIGNvbnNpZGVyIGNsb3Nlc3QgcG9pbnQgb24gZmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgICBsZXQgaGFsZnBsYW5lMSA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQxLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFsZnBsYW5lMS5tYWduaXR1ZGUoKSA8PSBzcGVlZCkge1xyXG4gICAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgIT0gYWdlbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlID09IG51bGwgfHxcclxuICAgICAgICAgICAgICB0aGlzLmlzSW5zaWRlKGhhbGZwbGFuZTEsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGhhbGZwbGFuZTE7XHJcbiAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmcGxhbmUxKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEVsc2UsIGNvbnNpZGVyIGNsb3Nlc3QgcG9pbnQgb24gc2Vjb25kIGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhhbGZQbGFuZTIgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MixcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgdGhpcy5pc0luc2lkZShoYWxmUGxhbmUyLCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYWZlKSB7XHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBoYWxmUGxhbmUyO1xyXG4gICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoaGFsZlBsYW5lMik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRWxzZSwgc2FtcGxlIHJhbmRvbSB2ZWxvY2l0aWVzIGFuZCBzZWxlY3QgdGhlIG9uZSB3aXRoIHRoZSBsZWFzdCBwZW5hbHR5XHJcbiAgICBsZXQgc2FtcGxlcyA9IDEwMDsgLy8gbnVtYmVyIG9mIHZlbG9jaXRpZXMgdG8gdHJ5XHJcbiAgICBsZXQgdyA9IDUwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGxldCBtaW5QZW5hbHR5ID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFZlbG9jaXR5ID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XHJcbiAgICAgIC8vIFNhbXBsZSB2ZWxvY2l0eSBmcm9tIGVudGlyZSBhbGxvd2VkIHZlbG9jaXR5IHNwYWNlXHJcbiAgICAgIGxldCBzYW1wbGUgPSBuZXcgVmVjdG9yMmYoMCwgMCkuc2FtcGxlKHNwZWVkKTtcclxuICAgICAgbGV0IG1pblRpbWVUb0NvbGxpc2lvbiA9IEluZmluaXR5O1xyXG5cclxuICAgICAgLy8gRmluZCB0aW1lIHRvIGZpcnN0IGNvbGxpc2lvblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBsZXQgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgbGV0IFZPID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKGIpO1xyXG4gICAgICAgIGlmIChWTyA9PSBudWxsIHx8IHRoaXMuaXNJbnNpZGUoc2FtcGxlLCBWTykpIHtcclxuICAgICAgICAgIGxldCB0aW1lVG9Db2xsaXNpb24gPSB0aGlzLmdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgICAgICBiLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIHRoaXMuUmFkaXVzICsgYi5SYWRpdXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLFxyXG4gICAgICAgICAgICBzYW1wbGVcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgaWYgKHRpbWVUb0NvbGxpc2lvbiA8IG1pblRpbWVUb0NvbGxpc2lvbikge1xyXG4gICAgICAgICAgICBtaW5UaW1lVG9Db2xsaXNpb24gPSB0aW1lVG9Db2xsaXNpb247XHJcbiAgICAgICAgICAgIGlmIChtaW5UaW1lVG9Db2xsaXNpb24gPT0gMCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHlcclxuICAgICAgbGV0IHBlbmFsdHkgPVxyXG4gICAgICAgIHcgLyBtaW5UaW1lVG9Db2xsaXNpb24gKyBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpOyAvLyBUUyBjb3JyZWN0bHkgaGFuZGxlcyBkaXZpZGUgYnkgemVybyBvciBpbmZpbml0eVxyXG4gICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICBiZXN0VmVsb2NpdHkgPSBzYW1wbGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmVzdFZlbG9jaXR5Lm1hZ25pdHVkZSgpID09IDApIHtcclxuICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gYmVzdFZlbG9jaXR5O1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoYmVzdFZlbG9jaXR5KTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UHJlZmVycmVkVmVsb2NpdHkobWF4U3BlZWQ6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiBtYXhTcGVlZCkge1xyXG4gICAgICByZXR1cm4gZ29hbERpcmVjdGlvbi5kaXZpZGUoZ29hbERpc3RhbmNlIC8gbWF4U3BlZWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdvYWxEaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFZlbG9jaXR5T2JzdGFjbGUoYjogSUFnZW50KTogVmVsb2NpdHlPYnN0YWNsZSB8IG51bGwge1xyXG4gICAgbGV0IHZlbG9jaXR5QiA9IGIuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgLy8gVHJhbnNsYXRlIG9yaWdpbiB0byB0aGlzIGFnZW50J3MgcG9zaXRpb25cclxuICAgIGxldCBwb3NpdGlvbkIgPSBiLmdldFBvc2l0aW9uKCkuc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG5cclxuICAgIC8vIEZpbmQgTWlua293c2tpIHN1bSBvZiBhZ2VudHNcclxuICAgIGxldCBjZW50cmUgPSBwb3NpdGlvbkIuYWRkKHZlbG9jaXR5Qik7XHJcbiAgICBsZXQgcmFkaXVzID0gYi5SYWRpdXMgKyB0aGlzLlJhZGl1cztcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgYW5nbGVzXHJcbiAgICBsZXQgZGlmZiA9IHZlbG9jaXR5Qi5zdWJ0cmFjdChjZW50cmUpO1xyXG4gICAgbGV0IGRpc3QgPSBkaWZmLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKGRpc3QgPCByYWRpdXMpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRoZXRhID0gTWF0aC5hY29zKHJhZGl1cyAvIGRpc3QpO1xyXG4gICAgbGV0IHBoaSA9IE1hdGguYXRhbjIoZGlmZi55LCBkaWZmLngpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0YW5nZW50IHZlY3RvcnNcclxuICAgIGxldCBhbmdsZTEgPSBwaGkgKyB0aGV0YTtcclxuICAgIGxldCB0YW5nZW50MSA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTEpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMSlcclxuICAgICk7XHJcblxyXG4gICAgbGV0IGFuZ2xlMiA9IHBoaSAtIHRoZXRhO1xyXG4gICAgbGV0IHRhbmdlbnQyID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMiksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUyKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdmVsb2NpdHkgb2JzdGFjbGVcclxuICAgIHJldHVybiB7IHZlcnRleDogdmVsb2NpdHlCLCB0YW5nZW50MTogdGFuZ2VudDEsIHRhbmdlbnQyOiB0YW5nZW50MiB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc0luc2lkZSh2ZWxvY2l0eTogVmVjdG9yMmYsIFZPOiBWZWxvY2l0eU9ic3RhY2xlKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGaXJzdCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQxID1cclxuICAgICAgKFZPLnRhbmdlbnQxLnggLSBWTy52ZXJ0ZXgueCkgKiAodmVsb2NpdHkueSAtIFZPLnZlcnRleC55KSAtXHJcbiAgICAgIChWTy50YW5nZW50MS55IC0gVk8udmVydGV4LnkpICogKHZlbG9jaXR5LnggLSBWTy52ZXJ0ZXgueCk7XHJcblxyXG4gICAgLy8gU2Vjb25kIGhhbGYtcGxhbmVcclxuICAgIGxldCBkZXRlcm1pbmFudDIgPVxyXG4gICAgICAoVk8udGFuZ2VudDIueCAtIFZPLnZlcnRleC54KSAqICh2ZWxvY2l0eS55IC0gVk8udmVydGV4LnkpIC1cclxuICAgICAgKFZPLnRhbmdlbnQyLnkgLSBWTy52ZXJ0ZXgueSkgKiAodmVsb2NpdHkueCAtIFZPLnZlcnRleC54KTtcclxuXHJcbiAgICByZXR1cm4gZGV0ZXJtaW5hbnQxID4gMCAmJiBkZXRlcm1pbmFudDIgPCAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICBsaW5lUG9pbnQ6IFZlY3RvcjJmLFxyXG4gICAgbGluZURpcmVjdGlvbjogVmVjdG9yMmYsXHJcbiAgICBwb2ludDogVmVjdG9yMmZcclxuICApOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gbGluZURpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgIGxldCB2ZWN0b3IgPSBwb2ludC5zdWJ0cmFjdChsaW5lUG9pbnQpO1xyXG4gICAgbGV0IGRpc3RhbmNlID0gdmVjdG9yLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgcmV0dXJuIGxpbmVQb2ludC5hZGQoZGlyZWN0aW9uLm11bHRpcGx5KGRpc3RhbmNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgY2VudHJlOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgb3JpZ2luOiBWZWN0b3IyZixcclxuICAgIGRpcmVjdGlvbjogVmVjdG9yMmZcclxuICApOiBudW1iZXIge1xyXG4gICAgbGV0IGRlbHRhID0gb3JpZ2luLnN1YnRyYWN0KGNlbnRyZSk7XHJcblxyXG4gICAgbGV0IGEgPSBkaXJlY3Rpb24uZG90KGRpcmVjdGlvbik7XHJcbiAgICBsZXQgYiA9IDIgKiBkaXJlY3Rpb24uZG90KGRlbHRhKTtcclxuICAgIGxldCBjID0gZGVsdGEuZG90KGRlbHRhKSAtIHJhZGl1cyAqKiAyO1xyXG5cclxuICAgIGxldCBkaXNjcmltID0gYiAqKiAyIC0gNCAqIGEgKiBjO1xyXG5cclxuICAgIGlmIChkaXNjcmltIDwgMCkge1xyXG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cclxuICAgICAgcmV0dXJuIEluZmluaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkaXN0YW5jZSA9ICgoLWIgLSBNYXRoLnNxcnQoZGlzY3JpbSkpIC8gMikgKiBhO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IDApIHtcclxuICAgICAgLy8gSW50ZXJzZWN0aW9uIGJlaGluZFxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSBcIi4vU2ltdWxhdGlvblwiO1xyXG5pbXBvcnQgeyBSZW5kZXJlcjJEIH0gZnJvbSBcIi4vUmVuZGVyZXIyRFwiO1xyXG5cclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgU3RvcEFnZW50IH0gZnJvbSBcIi4vU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25zIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgQWdlbnRUcmVlIH0gZnJvbSBcIi4vQWdlbnRUcmVlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuaW1wb3J0IHsgVk9BZ2VudCB9IGZyb20gXCIuL1ZPQWdlbnRcIjtcclxuXHJcbmNvbnN0IGNvbmZpZ1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlnXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBhZ2VudFR5cGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImFnZW50VHlwZVwiXHJcbikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IG51bWJlck9mQWdlbnRzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcIm51bWJlck9mQWdlbnRzXCJcclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmNvbnN0IGZyYW1lcmF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnJhbWVyYXRlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5jb25zdCBwbGF5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5QnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBzdGVwQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGVwQnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuY29uc3QgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIyRChjYW52YXMpO1xyXG5jb25zdCBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24ocmVuZGVyZXIsIG5ldyBBZ2VudFRyZWUoKSk7XHJcbnZhciBwbGF5ID0gZmFsc2U7XHJcblxyXG4vLyBpbml0aWFsaXNlIHNpbXVsYXRpb24gYW5kIGJlZ2luIHVwZGF0ZS9yZW5kZXIgbG9vcFxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcclxuICB0aGlzLnJlY29uZmlndXJlKCk7XHJcblxyXG4gIGxldCBsYXN0UmVuZGVyID0gMDtcclxuICBsZXQgbGFzdEZQUyA9IDA7XHJcbiAgbGV0IGZyYW1lcyA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIGxvb3AodGltZXN0YW1wOiBudW1iZXIpIHtcclxuICAgIGxldCBkZWx0YVQgPSB0aW1lc3RhbXAgLSBsYXN0UmVuZGVyO1xyXG4gICAgbGFzdFJlbmRlciA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICAvLyB1cGRhdGVcclxuICAgIGlmIChwbGF5KSB7XHJcbiAgICAgIHNpbXVsYXRpb24udXBkYXRlKGRlbHRhVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyXHJcbiAgICBzaW11bGF0aW9uLmRyYXcoKTtcclxuICAgIGZyYW1lcysrO1xyXG5cclxuICAgIC8vIHJlY2FsY3VsYXRlIGZyYW1lcmF0ZSBldmVyeSAyNTBtc1xyXG4gICAgaWYgKHRpbWVzdGFtcCAtIGxhc3RGUFMgPj0gMjUwKSB7XHJcbiAgICAgIGZyYW1lcmF0ZS50ZXh0Q29udGVudCA9IGBGUFM6ICR7KFxyXG4gICAgICAgICgxMDAwICogZnJhbWVzKSAvXHJcbiAgICAgICAgKHRpbWVzdGFtcCAtIGxhc3RGUFMpXHJcbiAgICAgICkudG9GaXhlZCgxKX1gO1xyXG5cclxuICAgICAgZnJhbWVzID0gMDtcclxuICAgICAgbGFzdEZQUyA9IHRpbWVzdGFtcDtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG4gIH1cclxuXHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxufVxyXG5cclxuLy8gdG9nZ2xlIHBsYXkvcGF1c2VcclxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQYXVzZSgpIHtcclxuICBwbGF5ID0gIXBsYXk7XHJcblxyXG4gIGlmIChwbGF5KSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQYXVzZVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBsYXlcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHN0ZXAgc2ltdWxhdGlvbiBieSAxIGZyYW1lXHJcbmV4cG9ydCBmdW5jdGlvbiBzdGVwKCkge1xyXG4gIHNpbXVsYXRpb24udXBkYXRlKDEwMDAgLyA2MCk7IC8vIEFzc3VtZXMgNjBGUFNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlY29uZmlndXJlKCkge1xyXG4gIGlmIChwbGF5KSB7XHJcbiAgICB0aGlzLnBsYXlQYXVzZSgpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29uZmlnID0gY29uZmlnU2VsZWN0LnZhbHVlO1xyXG4gIGNvbnN0IGFnZW50VHlwZSA9IGFnZW50VHlwZVNlbGVjdC52YWx1ZTsgLy8gVE9ETzogd2lyZSB0aGlzIGluXHJcbiAgY29uc3QgbiA9IHBhcnNlSW50KG51bWJlck9mQWdlbnRzSW5wdXQudmFsdWUpID8/IDA7XHJcblxyXG4gIC8vIFNlbGVjdCBhZ2VudCBjb25zdHJ1Y3RvclxyXG4gIGxldCBhZ2VudENvbnN0cnVjdG9yO1xyXG4gIHN3aXRjaCAoYWdlbnRUeXBlKSB7XHJcbiAgICBjYXNlIFwiQmFzaWNBZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgQmFzaWNBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiU3RvcEFnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBTdG9wQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIlZPQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFZPQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZ2VudCBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTZWxlY3QgY29uZmlndXJhdGlvblxyXG4gIHN3aXRjaCAoY29uZmlnKSB7XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9SYW5kb21cIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9SYW5kb20oXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIlJhbmRvbVRvTGluZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub0xpbmUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIkNpcmNsZVRvQ2lyY2xlXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkNpcmNsZVRvQ2lyY2xlKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJHcmlkVG9HcmlkXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkdyaWRUb0dyaWQoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg3NzUpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9