var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={354:(t,i,e)=>{e.r(i),e.d(i,{init:()=>P,playPause:()=>b,reconfigure:()=>I,step:()=>w});var n=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(e){e.update(t,i._agents.getNeighboursInRangeRectilinear(e,300))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),e=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var n=e.magnitude();if(0!==n){this._context.moveTo(i.x,i.y);var o=i.add(e.divide(n).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var e=Math.sqrt(Math.random())*i,n=2*Math.PI*Math.random();return new t(this.x+e*Math.cos(n),this.y+e*Math.sin(n))},t}(),s=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var e=this._goalPosition.subtract(this._position);e.magnitude()>60*t/1e3?(this._direction=e.normalise(),this._position=this._position.add(this._direction.multiply(60*t/1e3))):(this._position=this._goalPosition,this._isDone=!0)}},t}(),a=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var e=this;if(!this._isDone){var n=this._goalPosition.subtract(this._position);if(n.magnitude()>60*t/1e3){this._direction=n.normalise();var o=this._position.add(this._direction.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=e.Id&&e.collides(t,o)&&(e._isStuck=!0)})),this._isStuck||(this._position=this._position.add(this._direction.multiply(60*t/1e3)))}else this._position=this._goalPosition,this._isDone=!0}},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),c=function(){function t(){}return t.RandomToRandom=function(t,i,e,n){for(var o=[],r=this.poissonDiskSample(i,e,t,50),s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var c=n(a,r[a],s[a],20);o.push(c)}return{agents:o}},t.RandomToLine=function(t,i,e,n){for(var o=[],s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var c=n(a,s[a],new r((a+1)/(t+1)*i,e/2),20);o.push(c)}return{agents:o}},t.CircleToCircle=function(t,i,e,n){for(var o=[],s=i/2,a=e/2,c=e/2-25,u=0;u<t;u++){var h=2*Math.PI*u/t,d=n(u,new r(s+c*Math.cos(h),a+c*Math.sin(h)),new r(s+c*Math.cos(h+Math.PI),a+c*Math.sin(h+Math.PI)),20);o.push(d)}return{agents:o}},t.GridToGrid=function(t,i,e,n){for(var o=[],s=Math.ceil(t/8),a=i-50-90*(s-1),c=e/2-135,u=0,h=0;h<s;h++){for(var d=0;d<4;d++){var p=new r(50+90*h,c+90*d),g=new r(a+90*h,c+90*d);if(o.push(n(u,p,g,20)),++u>=t)break;if(o.push(n(u,g,p,20)),++u>=t)break}if(u>=t)break}return{agents:o}},t.poissonDiskSample=function(t,i,e,n){for(var o=[],s=function(){for(var e,s=!0;s;)s=!1,e=new r(t*Math.random(),i*Math.random()),o.forEach((function(t){e.subtract(t).magnitudeSqrd()<Math.pow(n,2)&&(s=!0)}));o.push(e)},a=0;a<e;a++)s();return o},t}(),u=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var e=t.getPosition().x-i,n=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,e,n,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(e){return t.getPosition().subtract(e.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var e=Math.floor(t.length/2),n=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(n.slice(0,e),!i),r=this.constructTree(n.slice(e+1,t.length),!i);return{agent:t[e],left:o,right:r}},t.prototype.rangeSearch=function(t,i,e,n,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=n&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().y>=e&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=e&&t.agent.getPosition().x<=n&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),h=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var e,n,o=.5,s=this.getPreferredVelocity(o),a=!0,c=0;c<i.length;c++)if(null!=(y=this.getVelocityObstacle(i[c]))&&this.isInside(s,y)){a=!1,e=y,n=c;break}if(a)return this._direction=s,this._position=this._position.add(s),void this.checkIfDone();if(null!=e){var u=this.getClosestPointOnLine(e.vertex,e.tangent1,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getVelocityObstacle(i[c]))&&this.isInside(u,y)){a=!1;break}if(a)return this._direction=u,this._position=this._position.add(u),void this.checkIfDone()}var h=this.getClosestPointOnLine(e.vertex,e.tangent2,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getVelocityObstacle(i[c]))&&this.isInside(h,y)){a=!1;break}if(a)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}}var d=1/0,p=new r(0,0);for(c=0;c<100;c++){for(var g=new r(0,0).sample(o),f=1/0,l=0;l<i.length;l++){var y,_=i[l];if(null==(y=this.getVelocityObstacle(_))||this.isInside(g,y)){var v=this.getFirstRayCircleIntersection(_.getPosition().add(_.getDirection()),this.Radius+_.Radius,this._position,g.subtract(_.getDirection()));if(v<f&&0==(f=v))return void this.checkIfDone()}}var x=100/f+s.subtract(g).magnitude();x<d&&(d=x,p=g)}0==p.magnitude()&&(this._isStuck=!0),this._direction=p,this._position=this._position.add(p),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),e=t.getPosition().subtract(this._position).add(i),n=t.Radius+this.Radius,o=i.subtract(e),s=o.magnitude();if(s<n)return null;var a=Math.acos(n/s),c=Math.atan2(o.y,o.x),u=c+a,h=c-a;return{vertex:i,tangent1:new r(e.x+n*Math.cos(u),e.y+n*Math.sin(u)),tangent2:new r(e.x+n*Math.cos(h),e.y+n*Math.sin(h))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),c=Math.pow(s,2)-4*r*a;if(c<0)return 1/0;var u=(-s-Math.sqrt(c))/2*r;return u<0?1/0:u},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),d=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var e,n,o=.5,s=this.getPreferredVelocity(o),a=!0,c=0;c<i.length;c++)if(null!=(y=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(s,y)){a=!1,e=y,n=c;break}if(a)return this._direction=s,this._position=this._position.add(s),void this.checkIfDone();if(null!=e){var u=this.getClosestPointOnLine(e.vertex,e.tangent1,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(u,y)){a=!1;break}if(a)return this._direction=u,this._position=this._position.add(u),void this.checkIfDone()}var h=this.getClosestPointOnLine(e.vertex,e.tangent2,s);if(u.magnitude()<=o){for(a=!0,c=0;c<i.length;c++)if(c!=n&&null!=(y=this.getReciprocalVelocityObstacle(i[c]))&&this.isInside(h,y)){a=!1;break}if(a)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}}var d=1/0,p=new r(0,0);for(c=0;c<100;c++){for(var g=new r(0,0).sample(o),f=1/0,l=0;l<i.length;l++){var y,_=i[l];if(null!=(y=this.getReciprocalVelocityObstacle(_))&&this.isInside(g,y)){var v=this.getFirstRayCircleIntersection(_.getPosition().add(_.getDirection()),this.Radius+_.Radius,this._position,g.multiply(2).subtract(this.getDirection()).subtract(_.getDirection()));if(v<f&&0==(f=v))return void this.checkIfDone()}}var x=100/f+s.subtract(g).magnitude();x<d&&(d=x,p=g)}0==p.magnitude()&&(this._isStuck=!0),this._direction=p,this._position=this._position.add(p),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getReciprocalVelocityObstacle=function(t){var i=this.getDirection(),e=t.getDirection(),n=i.add(e).divide(2),o=t.getPosition().subtract(this._position).add(e),s=t.Radius+this.Radius,a=e.subtract(o),c=a.magnitude();if(c<s)return null;var u=Math.acos(s/c),h=Math.atan2(a.y,a.x),d=h+u,p=h-u;return{vertex:n,tangent1:new r(o.x+s*Math.cos(d),o.y+s*Math.sin(d)),tangent2:new r(o.x+s*Math.cos(p),o.y+s*Math.sin(p))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),c=Math.pow(s,2)-4*r*a;if(c<0)return 1/0;var u=(-s-Math.sqrt(c))/2*r;return u<0?1/0:u},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),p=document.getElementById("config"),g=document.getElementById("agentType"),f=document.getElementById("numberOfAgents"),l=document.getElementById("canvas"),y=document.getElementById("framerate"),_=document.getElementById("playButton"),v=document.getElementById("stepButton"),x=new n(new o(l),new u),m=!1;function P(){this.reconfigure();var t=0,i=0,e=0;window.requestAnimationFrame((function n(o){var r=o-t;t=o,m&&x.update(r),x.draw(),e++,o-i>=250&&(y.textContent="FPS: "+(1e3*e/(o-i)).toFixed(1),e=0,i=o),window.requestAnimationFrame(n)}))}function b(){(m=!m)?(_.textContent="Pause",v.disabled=!0):(_.textContent="Play",v.disabled=!1)}function w(){x.update(1e3/60)}function I(){var t;m&&this.playPause();var i,e=p.value,n=g.value,o=null!==(t=parseInt(f.value))&&void 0!==t?t:0;switch(n){case"BasicAgent":i=function(t,i,e,n){return new s(t,i,e,n)};break;case"StopAgent":i=function(t,i,e,n){return new a(t,i,e,n)};break;case"VOAgent":i=function(t,i,e,n){return new h(t,i,e,n)};break;case"RVOAgent":i=function(t,i,e,n){return new d(t,i,e,n)};break;default:throw new Error("Agent not implemented")}switch(e){case"RandomToRandom":x.init(c.RandomToRandom(o,l.width,l.height,i));break;case"RandomToLine":x.init(c.RandomToLine(o,l.width,l.height,i));break;case"CircleToCircle":x.init(c.CircleToCircle(o,l.width,l.height,i));break;case"GridToGrid":x.init(c.GridToGrid(o,l.width,l.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}return e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(354)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvUlZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJnZXRBbGwiLCJkcmF3IiwiY2xlYXIiLCJkcmF3QWdlbnQiLCJjYW52YXMiLCJfY29udGV4dCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsImRpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsImJlZ2luUGF0aCIsImdldElzRG9uZSIsInN0cm9rZVN0eWxlIiwiZ2V0SXNTdHVjayIsImFyYyIsIngiLCJ5IiwiUmFkaXVzIiwiTWF0aCIsIlBJIiwibWFnbml0dWRlIiwibW92ZVRvIiwibmV3UG9zIiwiYWRkIiwiZGl2aWRlIiwibXVsdGlwbHkiLCJsaW5lVG8iLCJzdHJva2UiLCJjb3B5IiwidiIsIlZlY3RvcjJmIiwic3VidHJhY3QiLCJzIiwiZG90IiwibWFnbml0dWRlU3FyZCIsInNxcnQiLCJub3JtYWxpc2UiLCJtIiwic2FtcGxlIiwibWF4UmFkaXVzIiwicmFkaXVzIiwicmFuZG9tIiwiYW5nbGUiLCJjb3MiLCJzaW4iLCJpZCIsInN0YXJ0UG9zaXRpb24iLCJnb2FsUG9zaXRpb24iLCJJZCIsIl9wb3NpdGlvbiIsIl9nb2FsUG9zaXRpb24iLCJfZGlyZWN0aW9uIiwiX2lzRG9uZSIsImdvYWxEaXJlY3Rpb24iLCJfaXNTdHVjayIsImNvbGxpZGVzIiwiUmFuZG9tVG9SYW5kb20iLCJuIiwiYWdlbnRDb25zdHJ1Y3RvciIsInN0YXJ0UG9zaXRpb25zIiwicG9pc3NvbkRpc2tTYW1wbGUiLCJnb2FsUG9zaXRpb25zIiwiaSIsInB1c2giLCJSYW5kb21Ub0xpbmUiLCJDaXJjbGVUb0NpcmNsZSIsImNlbnRyZVgiLCJjZW50cmVZIiwiR3JpZFRvR3JpZCIsImNvbHMiLCJjZWlsIiwicmlnaHQiLCJ0b3AiLCJqIiwiYSIsImIiLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJ0aHJlc2hvbGQiLCJzYW1wbGVzIiwicG9zIiwicmVzYW1wbGUiLCJfcm9vdCIsImNvbnN0cnVjdFRyZWUiLCJyYW5nZSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJyYW5nZVNlYXJjaCIsImZpbHRlciIsIm90aGVyIiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4iLCJmdW4iLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImxlZnQiLCJzbGljZSIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJNQVhfVkVMT0NJVFkiLCJNQVhfQUNDRUxFUkFUSU9OIiwibmVpZ2hib3VycyIsImNvbGxpc2lvbiIsInNwZWVkIiwicHJlZmVycmVkVmVsb2NpdHkiLCJnZXRQcmVmZXJyZWRWZWxvY2l0eSIsInNhZmUiLCJ2ZWxvY2l0eU9ic3RhY2xlIiwiZ2V0VmVsb2NpdHlPYnN0YWNsZSIsImlzSW5zaWRlIiwiY2hlY2tJZkRvbmUiLCJoYWxmcGxhbmUxIiwiZ2V0Q2xvc2VzdFBvaW50T25MaW5lIiwidmVydGV4IiwidGFuZ2VudDEiLCJoYWxmUGxhbmUyIiwidGFuZ2VudDIiLCJtaW5QZW5hbHR5IiwiSW5maW5pdHkiLCJiZXN0VmVsb2NpdHkiLCJtaW5UaW1lVG9Db2xsaXNpb24iLCJ0aW1lVG9Db2xsaXNpb24iLCJnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbiIsInBlbmFsdHkiLCJtYXhTcGVlZCIsImdvYWxEaXN0YW5jZSIsInZlbG9jaXR5QiIsImNlbnRyZSIsImRpZmYiLCJkaXN0IiwidGhldGEiLCJhY29zIiwicGhpIiwiYXRhbjIiLCJhbmdsZTEiLCJhbmdsZTIiLCJ2ZWxvY2l0eSIsImRldGVybWluYW50MSIsImRldGVybWluYW50MiIsImxpbmVQb2ludCIsImxpbmVEaXJlY3Rpb24iLCJwb2ludCIsImRpc3RhbmNlIiwib3JpZ2luIiwiZGVsdGEiLCJjIiwiZGlzY3JpbSIsImdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlIiwidmVsb2NpdHlBIiwiY29uZmlnU2VsZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFnZW50VHlwZVNlbGVjdCIsIm51bWJlck9mQWdlbnRzSW5wdXQiLCJmcmFtZXJhdGUiLCJwbGF5QnV0dG9uIiwic3RlcEJ1dHRvbiIsInNpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwiUmVuZGVyZXIyRCIsIkFnZW50VHJlZSIsInBsYXkiLCJyZWNvbmZpZ3VyZSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsInZhbHVlIiwiYWdlbnRUeXBlIiwicGFyc2VJbnQiLCJCYXNpY0FnZW50IiwiU3RvcEFnZW50IiwiVk9BZ2VudCIsIlJWT0FnZW50IiwiRXJyb3IiLCJDb25maWd1cmF0aW9ucyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJtYXBwaW5ncyI6ImtKQUlBLGlCQUlFLFdBQVlBLEVBQXFCQyxHQUMvQkMsS0FBS0MsVUFBWUgsRUFDakJFLEtBQUtFLFFBQVVILEVBeUJuQixPQXRCRSxZQUFBSSxLQUFBLFNBQUtDLEdBQ0hKLEtBQUtFLFFBQVFDLEtBQUtDLEVBQU9MLFNBRzNCLFlBQUFNLE9BQUEsU0FBT0MsR0FBUCxXQUVFTixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCQSxFQUFNSCxPQUNKQyxFQUNBLEVBQUtKLFFBQVFPLGdDQUFnQ0QsRUFKckMsU0FRWlIsS0FBS0UsUUFBUUMsS0FBS0gsS0FBS0UsUUFB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RUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVAsRUFBb0JRLEVBQUksQ0FBQ0ssRUFBS0MsSUFBU0wsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDakZkLEVBQW9Ca0IsRUFBS2hCLElBQ0gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNYLE9BQU9DLGVBQWVSLEVBQVNpQixPQUFPQyxZQUFhLENBQUU5QixNQUFPLFdBRTdEbUIsT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUVaLE9BQU8sS0hGaERVLEVBQW9CLE0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IElDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uIHtcclxuICBfcmVuZGVyZXI6IElSZW5kZXJlcjtcclxuICBfYWdlbnRzOiBJQWdlbnRDb2xsZWN0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogSVJlbmRlcmVyLCBhZ2VudHM6IElBZ2VudENvbGxlY3Rpb24pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBhZ2VudHM7XHJcbiAgfVxyXG5cclxuICBpbml0KGNvbmZpZzogSUNvbmZpZ3VyYXRpb24pIHtcclxuICAgIHRoaXMuX2FnZW50cy5pbml0KGNvbmZpZy5hZ2VudHMpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKSB7XHJcbiAgICBsZXQgcmFuZ2UgPSAzMDA7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgYWdlbnQudXBkYXRlKFxyXG4gICAgICAgIGRlbHRhVCxcclxuICAgICAgICB0aGlzLl9hZ2VudHMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudCwgcmFuZ2UpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdCh0aGlzLl9hZ2VudHMuZ2V0QWxsKCkpO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIuZHJhd0FnZW50KGFnZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIyRCBpbXBsZW1lbnRzIElSZW5kZXJlciB7XHJcbiAgX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpOiB2b2lkIHtcclxuICAgIHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsUmVjdChcclxuICAgICAgMCxcclxuICAgICAgMCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMud2lkdGgsXHJcbiAgICAgIHRoaXMuX2NvbnRleHQuY2FudmFzLmhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRyYXdBZ2VudChhZ2VudDogSUFnZW50KSB7XHJcbiAgICBsZXQgcG9zaXRpb24gPSBhZ2VudC5nZXRQb3NpdGlvbigpO1xyXG4gICAgbGV0IGRpcmVjdGlvbiA9IGFnZW50LmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgLy8gZHJhdyBhZ2VudFxyXG4gICAgaWYgKGFnZW50LmdldElzRG9uZSgpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMEZGMDBcIjtcclxuICAgIH0gZWxzZSBpZiAoYWdlbnQuZ2V0SXNTdHVjaygpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiNGRjAwMDBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMDAwMDBcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LmFyYyhwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBhZ2VudC5SYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAvLyBkcmF3IGRpcmVjdGlvblxyXG4gICAgbGV0IG1hZ25pdHVkZSA9IGRpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChtYWduaXR1ZGUgIT09IDApIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICAgIGxldCBuZXdQb3MgPSBwb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgZGlyZWN0aW9uLmRpdmlkZShtYWduaXR1ZGUpLm11bHRpcGx5KGFnZW50LlJhZGl1cylcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8obmV3UG9zLngsIG5ld1Bvcy55KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVmVjdG9yMmYge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICB9XHJcblxyXG4gIGNvcHkodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHYueCwgdi55KTtcclxuICB9XHJcblxyXG4gIGFkZCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54ICsgdi54LCB0aGlzLnkgKyB2LnkpO1xyXG4gIH1cclxuXHJcbiAgc3VidHJhY3QodjogVmVjdG9yMmYpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuICB9XHJcblxyXG4gIG11bHRpcGx5KHM6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54ICogcywgdGhpcy55ICogcyk7XHJcbiAgfVxyXG5cclxuICBkaXZpZGUoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggLyBzLCB0aGlzLnkgLyBzKTtcclxuICB9XHJcblxyXG4gIGRvdCh2OiBWZWN0b3IyZikge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICB9XHJcblxyXG4gIG1hZ25pdHVkZVNxcmQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnggKiogMiArIHRoaXMueSAqKiAyO1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubWFnbml0dWRlU3FyZCgpKTtcclxuICB9XHJcblxyXG4gIG5vcm1hbGlzZSgpOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgbSA9IHRoaXMubWFnbml0dWRlKCk7XHJcbiAgICByZXR1cm4gbSA9PSAwID8gbmV3IFZlY3RvcjJmKDAsIDApIDogdGhpcy5kaXZpZGUobSk7XHJcbiAgfVxyXG5cclxuICBzYW1wbGUobWF4UmFkaXVzOiBudW1iZXIpIHtcclxuICAgIC8vIFVuaWZvcm1seSBzYW1wbGUgdGhlIGNpcmNsZSBjZW50cmVkIGF0IHRoaXMgcG9pbnQgd2l0aCByYWRpdXMgbWF4UmFkaXVzXHJcbiAgICBsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KE1hdGgucmFuZG9tKCkpICogbWF4UmFkaXVzO1xyXG4gICAgbGV0IGFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZihcclxuICAgICAgdGhpcy54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICB0aGlzLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSlcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzaWNBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICAvLyBUaGlzIGFnZW50IGNhbm5vdCBnZXQgc3R1Y2tcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgX2FnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiAoZGVsdGFUICogNjApIC8gMTAwMCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBnb2FsRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9wQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIHB1YmxpYyByZWFkb25seSBJZDogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBSYWRpdXM6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX2lzU3R1Y2s6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNTdHVjaztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGdvYWxEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICAgIGxldCBoZWFkaW5nID0gdGhpcy5fcG9zaXRpb24uYWRkKHRoaXMuX2RpcmVjdGlvbi5tdWx0aXBseSgyMCkpO1xyXG5cclxuICAgICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgICBpZiAoYWdlbnQuSWQgIT0gdGhpcy5JZCAmJiB0aGlzLmNvbGxpZGVzKGFnZW50LCBoZWFkaW5nKSkge1xyXG4gICAgICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5faXNTdHVjaykge1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKFxyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uLm11bHRpcGx5KChkZWx0YVQgKiA2MCkgLyAxMDAwKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29sbGlkZXMoYWdlbnQ6IElBZ2VudCwgcG9zaXRpb246IFZlY3RvcjJmKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHBvc2l0aW9uKS5tYWduaXR1ZGUoKSA8XHJcbiAgICAgIGFnZW50LlJhZGl1cyArIHRoaXMuUmFkaXVzXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29uZmlndXJhdGlvbiB7XHJcbiAgYWdlbnRzOiBJQWdlbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb25zIHtcclxuICBzdGF0aWMgUmFuZG9tVG9SYW5kb20oXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFJhbmRvbSBzdGFydCBwb3NpdGlvbiB0byByYW5kb20gZ29hbCBwb3NpdGlvblxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGxldCBzdGFydFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG4gICAgbGV0IGdvYWxQb3NpdGlvbnMgPSB0aGlzLnBvaXNzb25EaXNrU2FtcGxlKHdpZHRoLCBoZWlnaHQsIG4sIDUwKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBzdGFydFBvc2l0aW9uc1tpXSxcclxuICAgICAgICBnb2FsUG9zaXRpb25zW2ldLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIFJhbmRvbVRvTGluZShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIGZpeGVkIHBvc2l0aW9uIG9uIGxpbmVcclxuICAgIGxldCBhZ2VudHM6IElBZ2VudFtdID0gW107XHJcbiAgICBsZXQgc3RhcnRQb3NpdGlvbnMgPSB0aGlzLnBvaXNzb25EaXNrU2FtcGxlKHdpZHRoLCBoZWlnaHQsIG4sIDUwKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBzdGFydFBvc2l0aW9uc1tpXSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoKChpICsgMSkgLyAobiArIDEpKSAqIHdpZHRoLCBoZWlnaHQgLyAyKSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBDaXJjbGVUb0NpcmNsZShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUG9zaXRpb24gb24gcmFkaXVzIG9mIGNpcmNsZSB0byBvcHBvc2l0ZSBwb2ludFxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGNvbnN0IGNlbnRyZVggPSB3aWR0aCAvIDI7XHJcbiAgICBjb25zdCBjZW50cmVZID0gaGVpZ2h0IC8gMjtcclxuICAgIGNvbnN0IHJhZGl1cyA9IGhlaWdodCAvIDIgLSAyNTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBjb25zdCBhbmdsZSA9ICgyICogTWF0aC5QSSAqIGkpIC8gbjtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSxcclxuICAgICAgICAgIGNlbnRyZVkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSlcclxuICAgICAgICApLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZihcclxuICAgICAgICAgIGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSlcclxuICAgICAgICApLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIEdyaWRUb0dyaWQoXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgKSA9PiBJQWdlbnRcclxuICApIHtcclxuICAgIC8vIFR3byBvcHBvc2luZyBncmlkcyBvZiBhZ2VudHMgcGFzc2luZyB0aHJvdWdoIGVhY2hvdGhlclxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGxldCByb3dzID0gNDtcclxuICAgIGxldCBjb2xzID0gTWF0aC5jZWlsKG4gLyAoMiAqIHJvd3MpKTtcclxuICAgIGxldCBzcGFjaW5nID0gOTA7XHJcbiAgICBsZXQgbGVmdCA9IDUwO1xyXG4gICAgbGV0IHJpZ2h0ID0gd2lkdGggLSBsZWZ0IC0gc3BhY2luZyAqIChjb2xzIC0gMSk7XHJcbiAgICBsZXQgdG9wID0gaGVpZ2h0IC8gMiAtIChzcGFjaW5nIC8gMikgKiAocm93cyAtIDEpO1xyXG5cclxuICAgIGxldCBpZCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHM7IGkrKykge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJvd3M7IGorKykge1xyXG4gICAgICAgIGxldCBhID0gbmV3IFZlY3RvcjJmKGxlZnQgKyBzcGFjaW5nICogaSwgdG9wICsgc3BhY2luZyAqIGopO1xyXG4gICAgICAgIGxldCBiID0gbmV3IFZlY3RvcjJmKHJpZ2h0ICsgc3BhY2luZyAqIGksIHRvcCArIHNwYWNpbmcgKiBqKTtcclxuXHJcbiAgICAgICAgLy8gTGVmdCBncmlkXHJcbiAgICAgICAgYWdlbnRzLnB1c2goYWdlbnRDb25zdHJ1Y3RvcihpZCwgYSwgYiwgMjApKTtcclxuICAgICAgICBpZCsrO1xyXG4gICAgICAgIGlmIChpZCA+PSBuKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJpZ2h0IGdyaWRcclxuICAgICAgICBhZ2VudHMucHVzaChhZ2VudENvbnN0cnVjdG9yKGlkLCBiLCBhLCAyMCkpO1xyXG4gICAgICAgIGlkKys7XHJcblxyXG4gICAgICAgIGlmIChpZCA+PSBuKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBwb2lzc29uRGlza1NhbXBsZShcclxuICAgIHhSYW5nZTogbnVtYmVyLFxyXG4gICAgeVJhbmdlOiBudW1iZXIsXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB0aHJlc2hvbGQ6IG51bWJlclxyXG4gICk6IFZlY3RvcjJmW10ge1xyXG4gICAgbGV0IHNhbXBsZXM6IFZlY3RvcjJmW10gPSBbXTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICBsZXQgcmVzYW1wbGUgPSB0cnVlO1xyXG4gICAgICBsZXQgcG9zOiBWZWN0b3IyZjtcclxuXHJcbiAgICAgIHdoaWxlIChyZXNhbXBsZSkge1xyXG4gICAgICAgIHJlc2FtcGxlID0gZmFsc2U7XHJcbiAgICAgICAgcG9zID0gbmV3IFZlY3RvcjJmKHhSYW5nZSAqIE1hdGgucmFuZG9tKCksIHlSYW5nZSAqIE1hdGgucmFuZG9tKCkpO1xyXG5cclxuICAgICAgICBzYW1wbGVzLmZvckVhY2goKHNhbXBsZSkgPT4ge1xyXG4gICAgICAgICAgaWYgKHBvcy5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZVNxcmQoKSA8IHRocmVzaG9sZCAqKiAyKSB7XHJcbiAgICAgICAgICAgIHJlc2FtcGxlID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2FtcGxlcy5wdXNoKHBvcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNhbXBsZXM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5cclxuaW50ZXJmYWNlIE5vZGUge1xyXG4gIGFnZW50OiBJQWdlbnQ7XHJcbiAgbGVmdDogTm9kZTtcclxuICByaWdodDogTm9kZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFnZW50VHJlZSBpbXBsZW1lbnRzIElBZ2VudENvbGxlY3Rpb24ge1xyXG4gIHByaXZhdGUgX2FnZW50czogSUFnZW50W107XHJcbiAgcHJpdmF0ZSBfcm9vdDogTm9kZTtcclxuXHJcbiAgaW5pdChhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBhZ2VudHM7XHJcbiAgICB0aGlzLl9yb290ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKHRoaXMuX2FnZW50cywgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBbGwoKTogSUFnZW50W10ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FnZW50cztcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBtaW5YID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWluWSA9IGFnZW50LmdldFBvc2l0aW9uKCkueSAtIHJhbmdlO1xyXG4gICAgbGV0IG1heFggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggKyByYW5nZTtcclxuICAgIGxldCBtYXhZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55ICsgcmFuZ2U7XHJcblxyXG4gICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLnJhbmdlU2VhcmNoKHRoaXMuX3Jvb3QsIG1pblgsIG1pblksIG1heFgsIG1heFksIHRydWUpO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZXMuZmlsdGVyKChvdGhlcikgPT4gb3RoZXIuSWQgIT09IGFnZW50LklkKTtcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuKGFnZW50OiBJQWdlbnQsIHJhbmdlOiBudW1iZXIpOiBJQWdlbnRbXSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudCwgcmFuZ2UpO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZXMuZmlsdGVyKFxyXG4gICAgICAob3RoZXIpID0+XHJcbiAgICAgICAgYWdlbnQuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdChvdGhlci5nZXRQb3NpdGlvbigpKS5tYWduaXR1ZGVTcXJkKCkgPD1cclxuICAgICAgICByYW5nZSAqKiAyXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZm9yRWFjaChmdW46IChhZ2VudDogSUFnZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaChmdW4pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RUcmVlKGFnZW50czogSUFnZW50W10sIHhBeGlzOiBib29sZWFuKTogTm9kZSB7XHJcbiAgICBpZiAoYWdlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbWlkID0gTWF0aC5mbG9vcihhZ2VudHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgbGV0IHNvcnRlZCA9IHhBeGlzXHJcbiAgICAgID8gYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS54IC0gYi5nZXRQb3NpdGlvbigpLngpXHJcbiAgICAgIDogYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS55IC0gYi5nZXRQb3NpdGlvbigpLnkpO1xyXG5cclxuICAgIGxldCBsZWZ0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKHNvcnRlZC5zbGljZSgwLCBtaWQpLCAheEF4aXMpO1xyXG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKFxyXG4gICAgICBzb3J0ZWQuc2xpY2UobWlkICsgMSwgYWdlbnRzLmxlbmd0aCksXHJcbiAgICAgICF4QXhpc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4geyBhZ2VudDogYWdlbnRzW21pZF0sIGxlZnQ6IGxlZnQsIHJpZ2h0OiByaWdodCB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByYW5nZVNlYXJjaChcclxuICAgIHJvb3Q6IE5vZGUsXHJcbiAgICBtaW5YOiBudW1iZXIsXHJcbiAgICBtaW5ZOiBudW1iZXIsXHJcbiAgICBtYXhYOiBudW1iZXIsXHJcbiAgICBtYXhZOiBudW1iZXIsXHJcbiAgICB4QXhpczogYm9vbGVhblxyXG4gICk6IElBZ2VudFtdIHtcclxuICAgIGlmIChyb290ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXM6IElBZ2VudFtdID0gW107XHJcbiAgICBpZiAoeEF4aXMpIHtcclxuICAgICAgLy8gSWYgeCA8PSBtYXhYIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB4ID49IG1pblggbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJZiB5IDw9IG1heFkgbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHkgPj0gbWluWSBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgYWdlbnQgaXMgaW4gcmFuZ2UgcmFuZ2UgYWRkIHRvIHRoZSByZXN1bHRcclxuICAgIGlmIChcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WVxyXG4gICAgKSB7XHJcbiAgICAgIHJlcy5wdXNoKHJvb3QuYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5pbnRlcmZhY2UgVmVsb2NpdHlPYnN0YWNsZSB7XHJcbiAgLy8gVmVsb2NpdHkgb2JqZWN0IGRlZmluZWQgYnkgYSBwb2ludCBhbmQgdHdvIGRpcmVjdGlvbiB2ZWN0b3JzXHJcbiAgdmVydGV4OiBWZWN0b3IyZjtcclxuICB0YW5nZW50MTogVmVjdG9yMmY7XHJcbiAgdGFuZ2VudDI6IFZlY3RvcjJmO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVk9BZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgUmFkaXVzOiBudW1iZXI7XHJcbiAgSWQ6IG51bWJlcjtcclxuXHJcbiAgTUFYX1ZFTE9DSVRZID0gMS4wO1xyXG4gIE1BWF9BQ0NFTEVSQVRJT04gPSAwLjU7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIG5laWdoYm91cnM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICBsZXQgc3BlZWQgPSAwLjU7XHJcbiAgICBsZXQgcHJlZmVycmVkVmVsb2NpdHkgPSB0aGlzLmdldFByZWZlcnJlZFZlbG9jaXR5KHNwZWVkKTtcclxuXHJcbiAgICBsZXQgc2FmZSA9IHRydWU7XHJcbiAgICBsZXQgY29sbGlzaW9uO1xyXG4gICAgbGV0IGFnZW50O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSAhPSBudWxsICYmXHJcbiAgICAgICAgdGhpcy5pc0luc2lkZShwcmVmZXJyZWRWZWxvY2l0eSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgIGNvbGxpc2lvbiA9IHZlbG9jaXR5T2JzdGFjbGU7XHJcbiAgICAgICAgYWdlbnQgPSBpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgcHJlZmVycmVkIHZlbG9jaXR5IGlzIHNhZmUsIGdvIGluIHRoYXQgZGlyZWN0aW9uXHJcbiAgICBpZiAoc2FmZSkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBwcmVmZXJyZWRWZWxvY2l0eTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQocHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29sbGlzaW9uICE9IG51bGwpIHtcclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBmaXJzdCBoYWxmLXBsYW5lXHJcbiAgICAgIGxldCBoYWxmcGxhbmUxID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udGFuZ2VudDEsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYWxmcGxhbmUxLm1hZ25pdHVkZSgpIDw9IHNwZWVkKSB7XHJcbiAgICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZnBsYW5lMSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gaGFsZnBsYW5lMTtcclxuICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhhbGZwbGFuZTEpO1xyXG4gICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBzZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgICBsZXQgaGFsZlBsYW5lMiA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQyLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFsZnBsYW5lMS5tYWduaXR1ZGUoKSA8PSBzcGVlZCkge1xyXG4gICAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgIT0gYWdlbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICB0aGlzLmlzSW5zaWRlKGhhbGZQbGFuZTIsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGhhbGZQbGFuZTI7XHJcbiAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmUGxhbmUyKTtcclxuICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbHNlLCBzYW1wbGUgcmFuZG9tIHZlbG9jaXRpZXMgYW5kIHNlbGVjdCB0aGUgb25lIHdpdGggdGhlIGxlYXN0IHBlbmFsdHlcclxuICAgIGxldCBzYW1wbGVzID0gMTAwOyAvLyBudW1iZXIgb2YgdmVsb2NpdGllcyB0byB0cnlcclxuICAgIGxldCB3ID0gMTAwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGxldCBtaW5QZW5hbHR5ID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFZlbG9jaXR5ID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XHJcbiAgICAgIC8vIFNhbXBsZSB2ZWxvY2l0eSBmcm9tIGVudGlyZSBhbGxvd2VkIHZlbG9jaXR5IHNwYWNlXHJcbiAgICAgIGxldCBzYW1wbGUgPSBuZXcgVmVjdG9yMmYoMCwgMCkuc2FtcGxlKHNwZWVkKTtcclxuICAgICAgbGV0IG1pblRpbWVUb0NvbGxpc2lvbiA9IEluZmluaXR5O1xyXG5cclxuICAgICAgLy8gRmluZCB0aW1lIHRvIGZpcnN0IGNvbGxpc2lvblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBsZXQgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUoYik7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdmVsb2NpdHlPYnN0YWNsZSA9PSBudWxsIHx8XHJcbiAgICAgICAgICB0aGlzLmlzSW5zaWRlKHNhbXBsZSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGxldCB0aW1lVG9Db2xsaXNpb24gPSB0aGlzLmdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgICAgICBiLmdldFBvc2l0aW9uKCkuYWRkKGIuZ2V0RGlyZWN0aW9uKCkpLFxyXG4gICAgICAgICAgICB0aGlzLlJhZGl1cyArIGIuUmFkaXVzLFxyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbixcclxuICAgICAgICAgICAgc2FtcGxlLnN1YnRyYWN0KGIuZ2V0RGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGlmICh0aW1lVG9Db2xsaXNpb24gPCBtaW5UaW1lVG9Db2xsaXNpb24pIHtcclxuICAgICAgICAgICAgbWluVGltZVRvQ29sbGlzaW9uID0gdGltZVRvQ29sbGlzaW9uO1xyXG4gICAgICAgICAgICBpZiAobWluVGltZVRvQ29sbGlzaW9uID09IDApIHtcclxuICAgICAgICAgICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgcGVuYWx0eVxyXG4gICAgICBsZXQgcGVuYWx0eSA9XHJcbiAgICAgICAgdyAvIG1pblRpbWVUb0NvbGxpc2lvbiArIHByZWZlcnJlZFZlbG9jaXR5LnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlKCk7IC8vIFRTIGNvcnJlY3RseSBoYW5kbGVzIGRpdmlkZSBieSB6ZXJvIG9yIGluZmluaXR5XHJcbiAgICAgIGlmIChwZW5hbHR5IDwgbWluUGVuYWx0eSkge1xyXG4gICAgICAgIG1pblBlbmFsdHkgPSBwZW5hbHR5O1xyXG4gICAgICAgIGJlc3RWZWxvY2l0eSA9IHNhbXBsZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChiZXN0VmVsb2NpdHkubWFnbml0dWRlKCkgPT0gMCkge1xyXG4gICAgICB0aGlzLl9pc1N0dWNrID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBiZXN0VmVsb2NpdHk7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChiZXN0VmVsb2NpdHkpO1xyXG4gICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQcmVmZXJyZWRWZWxvY2l0eShtYXhTcGVlZDogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IG1heFNwZWVkKSB7XHJcbiAgICAgIHJldHVybiBnb2FsRGlyZWN0aW9uLmRpdmlkZShnb2FsRGlzdGFuY2UgLyBtYXhTcGVlZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ29hbERpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VmVsb2NpdHlPYnN0YWNsZShiOiBJQWdlbnQpOiBWZWxvY2l0eU9ic3RhY2xlIHwgbnVsbCB7XHJcbiAgICBsZXQgdmVsb2NpdHlCID0gYi5nZXREaXJlY3Rpb24oKTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGUgb3JpZ2luIHRvIHRoaXMgYWdlbnQncyBwb3NpdGlvblxyXG4gICAgbGV0IHBvc2l0aW9uQiA9IGIuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcblxyXG4gICAgLy8gRmluZCBNaW5rb3dza2kgc3VtIG9mIGFnZW50c1xyXG4gICAgbGV0IGNlbnRyZSA9IHBvc2l0aW9uQi5hZGQodmVsb2NpdHlCKTtcclxuICAgIGxldCByYWRpdXMgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGxldCBkaWZmID0gdmVsb2NpdHlCLnN1YnRyYWN0KGNlbnRyZSk7XHJcbiAgICBsZXQgZGlzdCA9IGRpZmYubWFnbml0dWRlKCk7XHJcbiAgICBpZiAoZGlzdCA8IHJhZGl1cykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGhldGEgPSBNYXRoLmFjb3MocmFkaXVzIC8gZGlzdCk7XHJcbiAgICBsZXQgcGhpID0gTWF0aC5hdGFuMihkaWZmLnksIGRpZmYueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhbmdlbnQgdmVjdG9yc1xyXG4gICAgbGV0IGFuZ2xlMSA9IHBoaSArIHRoZXRhO1xyXG4gICAgbGV0IHRhbmdlbnQxID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMSksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUxKVxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgYW5nbGUyID0gcGhpIC0gdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDIgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUyKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJldHVybiB2ZWxvY2l0eSBvYnN0YWNsZVxyXG4gICAgcmV0dXJuIHsgdmVydGV4OiB2ZWxvY2l0eUIsIHRhbmdlbnQxOiB0YW5nZW50MSwgdGFuZ2VudDI6IHRhbmdlbnQyIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzSW5zaWRlKFxyXG4gICAgdmVsb2NpdHk6IFZlY3RvcjJmLFxyXG4gICAgdmVsb2NpdHlPYnN0YWNsZTogVmVsb2NpdHlPYnN0YWNsZVxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgLy8gRmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MSA9XHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQxLnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAtXHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQxLnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KTtcclxuXHJcbiAgICAvLyBTZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MiA9XHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAtXHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KTtcclxuXHJcbiAgICByZXR1cm4gZGV0ZXJtaW5hbnQxID4gMCAmJiBkZXRlcm1pbmFudDIgPCAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICBsaW5lUG9pbnQ6IFZlY3RvcjJmLFxyXG4gICAgbGluZURpcmVjdGlvbjogVmVjdG9yMmYsXHJcbiAgICBwb2ludDogVmVjdG9yMmZcclxuICApOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gbGluZURpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgIGxldCB2ZWN0b3IgPSBwb2ludC5zdWJ0cmFjdChsaW5lUG9pbnQpO1xyXG4gICAgbGV0IGRpc3RhbmNlID0gdmVjdG9yLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgcmV0dXJuIGxpbmVQb2ludC5hZGQoZGlyZWN0aW9uLm11bHRpcGx5KGRpc3RhbmNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgY2VudHJlOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgb3JpZ2luOiBWZWN0b3IyZixcclxuICAgIGRpcmVjdGlvbjogVmVjdG9yMmZcclxuICApOiBudW1iZXIge1xyXG4gICAgbGV0IGRlbHRhID0gb3JpZ2luLnN1YnRyYWN0KGNlbnRyZSk7XHJcblxyXG4gICAgbGV0IGEgPSBkaXJlY3Rpb24uZG90KGRpcmVjdGlvbik7XHJcbiAgICBsZXQgYiA9IDIgKiBkaXJlY3Rpb24uZG90KGRlbHRhKTtcclxuICAgIGxldCBjID0gZGVsdGEuZG90KGRlbHRhKSAtIHJhZGl1cyAqKiAyO1xyXG5cclxuICAgIGxldCBkaXNjcmltID0gYiAqKiAyIC0gNCAqIGEgKiBjO1xyXG5cclxuICAgIGlmIChkaXNjcmltIDwgMCkge1xyXG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cclxuICAgICAgcmV0dXJuIEluZmluaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkaXN0YW5jZSA9ICgoLWIgLSBNYXRoLnNxcnQoZGlzY3JpbSkpIC8gMikgKiBhO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IDApIHtcclxuICAgICAgLy8gSW50ZXJzZWN0aW9uIGJlaGluZFxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja0lmRG9uZSgpIHtcclxuICAgIGxldCBmaW5pc2hUaHJlc2hvbGQgPSAxLjA7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLl9wb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9nb2FsUG9zaXRpb24pLm1hZ25pdHVkZVNxcmQoKSA8XHJcbiAgICAgIGZpbmlzaFRocmVzaG9sZFxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5pbnRlcmZhY2UgVmVsb2NpdHlPYnN0YWNsZSB7XHJcbiAgLy8gVmVsb2NpdHkgb2JqZWN0IGRlZmluZWQgYnkgYSBwb2ludCBhbmQgdHdvIGRpcmVjdGlvbiB2ZWN0b3JzXHJcbiAgdmVydGV4OiBWZWN0b3IyZjtcclxuICB0YW5nZW50MTogVmVjdG9yMmY7XHJcbiAgdGFuZ2VudDI6IFZlY3RvcjJmO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUlZPQWdlbnQgaW1wbGVtZW50cyBJQWdlbnQge1xyXG4gIFJhZGl1czogbnVtYmVyO1xyXG4gIElkOiBudW1iZXI7XHJcblxyXG4gIE1BWF9WRUxPQ0lUWSA9IDEuMDtcclxuICBNQVhfQUNDRUxFUkFUSU9OID0gMC41O1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBuZWlnaGJvdXJzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgbGV0IHNwZWVkID0gMC41O1xyXG4gICAgbGV0IHByZWZlcnJlZFZlbG9jaXR5ID0gdGhpcy5nZXRQcmVmZXJyZWRWZWxvY2l0eShzcGVlZCk7XHJcblxyXG4gICAgbGV0IHNhZmUgPSB0cnVlO1xyXG4gICAgbGV0IGNvbGxpc2lvbjtcclxuICAgIGxldCBhZ2VudDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0UmVjaXByb2NhbFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICB0aGlzLmlzSW5zaWRlKHByZWZlcnJlZFZlbG9jaXR5LCB2ZWxvY2l0eU9ic3RhY2xlKVxyXG4gICAgICApIHtcclxuICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgY29sbGlzaW9uID0gdmVsb2NpdHlPYnN0YWNsZTtcclxuICAgICAgICBhZ2VudCA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcmVmZXJyZWQgdmVsb2NpdHkgaXMgc2FmZSwgZ28gaW4gdGhhdCBkaXJlY3Rpb25cclxuICAgIGlmIChzYWZlKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IHByZWZlcnJlZFZlbG9jaXR5O1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChwcmVmZXJyZWRWZWxvY2l0eSk7XHJcbiAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb2xsaXNpb24gIT0gbnVsbCkge1xyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIGZpcnN0IGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhhbGZwbGFuZTEgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MSxcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRSZWNpcHJvY2FsVmVsb2NpdHlPYnN0YWNsZShcclxuICAgICAgICAgICAgICBuZWlnaGJvdXJzW2ldXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICB0aGlzLmlzSW5zaWRlKGhhbGZwbGFuZTEsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGhhbGZwbGFuZTE7XHJcbiAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmcGxhbmUxKTtcclxuICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEVsc2UsIGNvbnNpZGVyIGNsb3Nlc3QgcG9pbnQgb24gc2Vjb25kIGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhhbGZQbGFuZTIgPSB0aGlzLmdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgICAgICBjb2xsaXNpb24udmVydGV4LFxyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50MixcclxuICAgICAgICBwcmVmZXJyZWRWZWxvY2l0eVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhbGZwbGFuZTEubWFnbml0dWRlKCkgPD0gc3BlZWQpIHtcclxuICAgICAgICBzYWZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eU9ic3RhY2xlID0gdGhpcy5nZXRSZWNpcHJvY2FsVmVsb2NpdHlPYnN0YWNsZShcclxuICAgICAgICAgICAgICBuZWlnaGJvdXJzW2ldXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICB0aGlzLmlzSW5zaWRlKGhhbGZQbGFuZTIsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGhhbGZQbGFuZTI7XHJcbiAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmUGxhbmUyKTtcclxuICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbHNlLCBzYW1wbGUgcmFuZG9tIHZlbG9jaXRpZXMgYW5kIHNlbGVjdCB0aGUgb25lIHdpdGggdGhlIGxlYXN0IHBlbmFsdHlcclxuICAgIGxldCBzYW1wbGVzID0gMTAwOyAvLyBudW1iZXIgb2YgdmVsb2NpdGllcyB0byB0cnlcclxuICAgIGxldCB3ID0gMTAwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGxldCBtaW5QZW5hbHR5ID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFZlbG9jaXR5ID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XHJcbiAgICAgIC8vIFNhbXBsZSB2ZWxvY2l0eSBmcm9tIGVudGlyZSBhbGxvd2VkIHZlbG9jaXR5IHNwYWNlXHJcbiAgICAgIGxldCBzYW1wbGUgPSBuZXcgVmVjdG9yMmYoMCwgMCkuc2FtcGxlKHNwZWVkKTtcclxuICAgICAgbGV0IG1pblRpbWVUb0NvbGxpc2lvbiA9IEluZmluaXR5O1xyXG5cclxuICAgICAgLy8gRmluZCB0aW1lIHRvIGZpcnN0IGNvbGxpc2lvblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBsZXQgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlKGIpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgdGhpcy5pc0luc2lkZShzYW1wbGUsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBsZXQgdGltZVRvQ29sbGlzaW9uID0gdGhpcy5nZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgICAgICAgICAgYi5nZXRQb3NpdGlvbigpLmFkZChiLmdldERpcmVjdGlvbigpKSxcclxuICAgICAgICAgICAgdGhpcy5SYWRpdXMgKyBiLlJhZGl1cyxcclxuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24sXHJcbiAgICAgICAgICAgIHNhbXBsZVxyXG4gICAgICAgICAgICAgIC5tdWx0aXBseSgyKVxyXG4gICAgICAgICAgICAgIC5zdWJ0cmFjdCh0aGlzLmdldERpcmVjdGlvbigpKVxyXG4gICAgICAgICAgICAgIC5zdWJ0cmFjdChiLmdldERpcmVjdGlvbigpKVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpZiAodGltZVRvQ29sbGlzaW9uIDwgbWluVGltZVRvQ29sbGlzaW9uKSB7XHJcbiAgICAgICAgICAgIG1pblRpbWVUb0NvbGxpc2lvbiA9IHRpbWVUb0NvbGxpc2lvbjtcclxuICAgICAgICAgICAgaWYgKG1pblRpbWVUb0NvbGxpc2lvbiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHlcclxuICAgICAgbGV0IHBlbmFsdHkgPVxyXG4gICAgICAgIHcgLyBtaW5UaW1lVG9Db2xsaXNpb24gKyBwcmVmZXJyZWRWZWxvY2l0eS5zdWJ0cmFjdChzYW1wbGUpLm1hZ25pdHVkZSgpOyAvLyBUUyBjb3JyZWN0bHkgaGFuZGxlcyBkaXZpZGUgYnkgemVybyBvciBpbmZpbml0eVxyXG4gICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICBiZXN0VmVsb2NpdHkgPSBzYW1wbGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmVzdFZlbG9jaXR5Lm1hZ25pdHVkZSgpID09IDApIHtcclxuICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gYmVzdFZlbG9jaXR5O1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoYmVzdFZlbG9jaXR5KTtcclxuICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UHJlZmVycmVkVmVsb2NpdHkobWF4U3BlZWQ6IG51bWJlcik6IFZlY3RvcjJmIHtcclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiBtYXhTcGVlZCkge1xyXG4gICAgICByZXR1cm4gZ29hbERpcmVjdGlvbi5kaXZpZGUoZ29hbERpc3RhbmNlIC8gbWF4U3BlZWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdvYWxEaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFJlY2lwcm9jYWxWZWxvY2l0eU9ic3RhY2xlKGI6IElBZ2VudCk6IFZlbG9jaXR5T2JzdGFjbGUgfCBudWxsIHtcclxuICAgIGxldCB2ZWxvY2l0eUEgPSB0aGlzLmdldERpcmVjdGlvbigpO1xyXG4gICAgbGV0IHZlbG9jaXR5QiA9IGIuZ2V0RGlyZWN0aW9uKCk7XHJcbiAgICBsZXQgdmVydGV4ID0gdmVsb2NpdHlBLmFkZCh2ZWxvY2l0eUIpLmRpdmlkZSgyKTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGUgb3JpZ2luIHRvIHRoaXMgYWdlbnQncyBwb3NpdGlvblxyXG4gICAgbGV0IHBvc2l0aW9uQiA9IGIuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcblxyXG4gICAgLy8gRmluZCBNaW5rb3dza2kgc3VtIG9mIGFnZW50c1xyXG4gICAgbGV0IGNlbnRyZSA9IHBvc2l0aW9uQi5hZGQodmVsb2NpdHlCKTtcclxuICAgIGxldCByYWRpdXMgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGxldCBkaWZmID0gdmVsb2NpdHlCLnN1YnRyYWN0KGNlbnRyZSk7XHJcbiAgICBsZXQgZGlzdCA9IGRpZmYubWFnbml0dWRlKCk7XHJcbiAgICBpZiAoZGlzdCA8IHJhZGl1cykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGhldGEgPSBNYXRoLmFjb3MocmFkaXVzIC8gZGlzdCk7XHJcbiAgICBsZXQgcGhpID0gTWF0aC5hdGFuMihkaWZmLnksIGRpZmYueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhbmdlbnQgdmVjdG9yc1xyXG4gICAgbGV0IGFuZ2xlMSA9IHBoaSArIHRoZXRhO1xyXG4gICAgbGV0IHRhbmdlbnQxID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMSksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUxKVxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgYW5nbGUyID0gcGhpIC0gdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDIgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUyKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJldHVybiB2ZWxvY2l0eSBvYnN0YWNsZVxyXG4gICAgcmV0dXJuIHsgdmVydGV4OiB2ZXJ0ZXgsIHRhbmdlbnQxOiB0YW5nZW50MSwgdGFuZ2VudDI6IHRhbmdlbnQyIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzSW5zaWRlKFxyXG4gICAgdmVsb2NpdHk6IFZlY3RvcjJmLFxyXG4gICAgdmVsb2NpdHlPYnN0YWNsZTogVmVsb2NpdHlPYnN0YWNsZVxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgLy8gRmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MSA9XHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQxLnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAtXHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQxLnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KTtcclxuXHJcbiAgICAvLyBTZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MiA9XHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAtXHJcbiAgICAgICh2ZWxvY2l0eU9ic3RhY2xlLnRhbmdlbnQyLnkgLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC55KSAqXHJcbiAgICAgICAgKHZlbG9jaXR5LnggLSB2ZWxvY2l0eU9ic3RhY2xlLnZlcnRleC54KTtcclxuXHJcbiAgICByZXR1cm4gZGV0ZXJtaW5hbnQxID4gMCAmJiBkZXRlcm1pbmFudDIgPCAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICBsaW5lUG9pbnQ6IFZlY3RvcjJmLFxyXG4gICAgbGluZURpcmVjdGlvbjogVmVjdG9yMmYsXHJcbiAgICBwb2ludDogVmVjdG9yMmZcclxuICApOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gbGluZURpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgIGxldCB2ZWN0b3IgPSBwb2ludC5zdWJ0cmFjdChsaW5lUG9pbnQpO1xyXG4gICAgbGV0IGRpc3RhbmNlID0gdmVjdG9yLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgcmV0dXJuIGxpbmVQb2ludC5hZGQoZGlyZWN0aW9uLm11bHRpcGx5KGRpc3RhbmNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgY2VudHJlOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyLFxyXG4gICAgb3JpZ2luOiBWZWN0b3IyZixcclxuICAgIGRpcmVjdGlvbjogVmVjdG9yMmZcclxuICApOiBudW1iZXIge1xyXG4gICAgbGV0IGRlbHRhID0gb3JpZ2luLnN1YnRyYWN0KGNlbnRyZSk7XHJcblxyXG4gICAgbGV0IGEgPSBkaXJlY3Rpb24uZG90KGRpcmVjdGlvbik7XHJcbiAgICBsZXQgYiA9IDIgKiBkaXJlY3Rpb24uZG90KGRlbHRhKTtcclxuICAgIGxldCBjID0gZGVsdGEuZG90KGRlbHRhKSAtIHJhZGl1cyAqKiAyO1xyXG5cclxuICAgIGxldCBkaXNjcmltID0gYiAqKiAyIC0gNCAqIGEgKiBjO1xyXG5cclxuICAgIGlmIChkaXNjcmltIDwgMCkge1xyXG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cclxuICAgICAgcmV0dXJuIEluZmluaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkaXN0YW5jZSA9ICgoLWIgLSBNYXRoLnNxcnQoZGlzY3JpbSkpIC8gMikgKiBhO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IDApIHtcclxuICAgICAgLy8gSW50ZXJzZWN0aW9uIGJlaGluZFxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja0lmRG9uZSgpIHtcclxuICAgIGxldCBmaW5pc2hUaHJlc2hvbGQgPSAxLjA7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLl9wb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9nb2FsUG9zaXRpb24pLm1hZ25pdHVkZVNxcmQoKSA8XHJcbiAgICAgIGZpbmlzaFRocmVzaG9sZFxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNpbXVsYXRpb24gfSBmcm9tIFwiLi9TaW11bGF0aW9uXCI7XHJcbmltcG9ydCB7IFJlbmRlcmVyMkQgfSBmcm9tIFwiLi9SZW5kZXJlcjJEXCI7XHJcblxyXG5pbXBvcnQgeyBCYXNpY0FnZW50IH0gZnJvbSBcIi4vQmFzaWNBZ2VudFwiO1xyXG5pbXBvcnQgeyBTdG9wQWdlbnQgfSBmcm9tIFwiLi9TdG9wQWdlbnRcIjtcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbnMgfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5pbXBvcnQgeyBBZ2VudFRyZWUgfSBmcm9tIFwiLi9BZ2VudFRyZWVcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5pbXBvcnQgeyBWT0FnZW50IH0gZnJvbSBcIi4vVk9BZ2VudFwiO1xyXG5pbXBvcnQgeyBSVk9BZ2VudCB9IGZyb20gXCIuL1JWT0FnZW50XCI7XHJcblxyXG5jb25zdCBjb25maWdTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpZ1wiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgYWdlbnRUeXBlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJhZ2VudFR5cGVcIlxyXG4pIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBudW1iZXJPZkFnZW50c0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJudW1iZXJPZkFnZW50c1wiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBmcmFtZXJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYW1lcmF0ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheUJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgc3RlcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RlcEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQoY2FudmFzKTtcclxuY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHJlbmRlcmVyLCBuZXcgQWdlbnRUcmVlKCkpO1xyXG52YXIgcGxheSA9IGZhbHNlO1xyXG5cclxuLy8gaW5pdGlhbGlzZSBzaW11bGF0aW9uIGFuZCBiZWdpbiB1cGRhdGUvcmVuZGVyIGxvb3BcclxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgdGhpcy5yZWNvbmZpZ3VyZSgpO1xyXG5cclxuICBsZXQgbGFzdFJlbmRlciA9IDA7XHJcbiAgbGV0IGxhc3RGUFMgPSAwO1xyXG4gIGxldCBmcmFtZXMgPSAwO1xyXG5cclxuICBmdW5jdGlvbiBsb29wKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBsZXQgZGVsdGFUID0gdGltZXN0YW1wIC0gbGFzdFJlbmRlcjtcclxuICAgIGxhc3RSZW5kZXIgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgLy8gdXBkYXRlXHJcbiAgICBpZiAocGxheSkge1xyXG4gICAgICBzaW11bGF0aW9uLnVwZGF0ZShkZWx0YVQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbmRlclxyXG4gICAgc2ltdWxhdGlvbi5kcmF3KCk7XHJcbiAgICBmcmFtZXMrKztcclxuXHJcbiAgICAvLyByZWNhbGN1bGF0ZSBmcmFtZXJhdGUgZXZlcnkgMjUwbXNcclxuICAgIGlmICh0aW1lc3RhbXAgLSBsYXN0RlBTID49IDI1MCkge1xyXG4gICAgICBmcmFtZXJhdGUudGV4dENvbnRlbnQgPSBgRlBTOiAkeyhcclxuICAgICAgICAoMTAwMCAqIGZyYW1lcykgL1xyXG4gICAgICAgICh0aW1lc3RhbXAgLSBsYXN0RlBTKVxyXG4gICAgICApLnRvRml4ZWQoMSl9YDtcclxuXHJcbiAgICAgIGZyYW1lcyA9IDA7XHJcbiAgICAgIGxhc3RGUFMgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuXHJcbi8vIHRvZ2dsZSBwbGF5L3BhdXNlXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5UGF1c2UoKSB7XHJcbiAgcGxheSA9ICFwbGF5O1xyXG5cclxuICBpZiAocGxheSkge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGF1c2VcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQbGF5XCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBzdGVwIHNpbXVsYXRpb24gYnkgMSBmcmFtZVxyXG5leHBvcnQgZnVuY3Rpb24gc3RlcCgpIHtcclxuICBzaW11bGF0aW9uLnVwZGF0ZSgxMDAwIC8gNjApOyAvLyBBc3N1bWVzIDYwRlBTXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvbmZpZ3VyZSgpIHtcclxuICBpZiAocGxheSkge1xyXG4gICAgdGhpcy5wbGF5UGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ1NlbGVjdC52YWx1ZTtcclxuICBjb25zdCBhZ2VudFR5cGUgPSBhZ2VudFR5cGVTZWxlY3QudmFsdWU7IC8vIFRPRE86IHdpcmUgdGhpcyBpblxyXG4gIGNvbnN0IG4gPSBwYXJzZUludChudW1iZXJPZkFnZW50c0lucHV0LnZhbHVlKSA/PyAwO1xyXG5cclxuICAvLyBTZWxlY3QgYWdlbnQgY29uc3RydWN0b3JcclxuICBsZXQgYWdlbnRDb25zdHJ1Y3RvcjtcclxuICBzd2l0Y2ggKGFnZW50VHlwZSkge1xyXG4gICAgY2FzZSBcIkJhc2ljQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IEJhc2ljQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIlN0b3BBZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgU3RvcEFnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJWT0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBWT0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJSVk9BZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgUlZPQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZ2VudCBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTZWxlY3QgY29uZmlndXJhdGlvblxyXG4gIHN3aXRjaCAoY29uZmlnKSB7XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9SYW5kb21cIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9SYW5kb20oXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIlJhbmRvbVRvTGluZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub0xpbmUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIkNpcmNsZVRvQ2lyY2xlXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkNpcmNsZVRvQ2lyY2xlKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJHcmlkVG9HcmlkXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkdyaWRUb0dyaWQoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygzNTQpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9