var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={999:(t,e,n)=>{n.r(e),n.d(e,{init:()=>p,playPause:()=>y,step:()=>f});var o=function(){function t(t){this._renderer=t,this._agents=[]}return t.prototype.addAgent=function(t){this._agents.push(t)},t.prototype.update=function(t){this._agents.forEach((function(e){e.update(t)}))},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(e){t._renderer.drawAgent(e)}))},t}(),i=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var e=t.getPosition(),n=t.getDirection();if(this._context.beginPath(),this._context.arc(e.x,e.y,20,0,2*Math.PI),0!==n.dx||0!==n.dy){var o=Math.sqrt(n.dx*n.dx+n.dy*n.dy);this._context.moveTo(e.x,e.y),this._context.lineTo(e.x+20*n.dx/o,e.y+20*n.dy/o)}this._context.stroke()},t}(),r=function(){function t(t,e){this._position=t,this._direction=e}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.update=function(t){this._position.x+=this._direction.dx,this._position.y+=this._direction.dy,this._position.x>1280&&(this._position.x=0),this._position.y>720&&(this._position.y=0),this._position.x<0&&(this._position.x=1280),this._position.y<0&&(this._position.y=720)},t}(),s=document.getElementById("canvas"),a=document.getElementById("framerate"),d=document.getElementById("playButton"),c=document.getElementById("stepButton"),u=new o(new i(s)),h=!1;function p(){for(var t=0;t<25;t++){var e=new r({x:s.width*Math.random(),y:s.height*Math.random()},{dx:2*Math.random()-1,dy:2*Math.random()-1});u.addAgent(e)}var n=0,o=0,i=0;window.requestAnimationFrame((function t(e){var r=e-n;n=e,h&&u.update(r),u.draw(),i++,e-o>=250&&(a.textContent="FPS: "+(1e3*i/(e-o)).toFixed(1),i=0,o=e),window.requestAnimationFrame(t)}))}function y(){(h=!h)?(d.textContent="Pause",c.disabled=!0):(d.textContent="Play",c.disabled=!1)}function f(){u.update(1e3/60)}}},e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(999)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9tYWluLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sIm5hbWVzIjpbInJlbmRlcmVyIiwidGhpcyIsIl9yZW5kZXJlciIsIl9hZ2VudHMiLCJhZGRBZ2VudCIsImFnZW50IiwicHVzaCIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJkcmF3IiwiY2xlYXIiLCJkcmF3QWdlbnQiLCJjYW52YXMiLCJfY29udGV4dCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsImRpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsImJlZ2luUGF0aCIsImFyYyIsIngiLCJ5IiwiTWF0aCIsIlBJIiwiZHgiLCJkeSIsIm1hZ25pdHVkZSIsInNxcnQiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJfcG9zaXRpb24iLCJfZGlyZWN0aW9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZyYW1lcmF0ZSIsInBsYXlCdXR0b24iLCJzdGVwQnV0dG9uIiwic2ltdWxhdGlvbiIsIlNpbXVsYXRpb24iLCJSZW5kZXJlcjJEIiwicGxheSIsImluaXQiLCJpIiwiQmFzaWNBZ2VudCIsInJhbmRvbSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIl0sIm1hcHBpbmdzIjoiZ0lBR0EsaUJBSUUsV0FBWUEsR0FDVkMsS0FBS0MsVUFBWUYsRUFDakJDLEtBQUtFLFFBQVUsR0FtQm5CLE9BaEJFLFlBQUFDLFNBQUEsU0FBU0MsR0FDUEosS0FBS0UsUUFBUUcsS0FBS0QsSUFHcEIsWUFBQUUsT0FBQSxTQUFPQyxHQUNMUCxLQUFLRSxRQUFRTSxTQUFRLFNBQUNKLEdBQ3BCQSxFQUFNRSxPQUFPQyxPQUlqQixZQUFBRSxLQUFBLHNCQUNFVCxLQUFLQyxVQUFVUyxRQUNmVixLQUFLRSxRQUFRTSxTQUFRLFNBQUNKLEdBQ3BCLEVBQUtILFVBQVVVLFVBQVVQLE9BRy9CLEVBekJBLEdDQUEsYUFHRSxXQUFZUSxHQUNWWixLQUFLYSxTQUFXRCxFQUFPRSxXQUFXLE1BZ0N0QyxPQTdCRSxZQUFBSixNQUFBLFdBQ0VWLEtBQUthLFNBQVNFLFVBQVksUUFDMUJm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QixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVQyxRQUczQyxJQUFJQyxFQUFTSixFQUF5QkUsR0FBWSxDQUdqREMsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSCxHQUFVRSxFQUFRQSxFQUFPRCxRQUFTRixHQUcvQ0csRUFBT0QsUUNqQmYsT0NGQUYsRUFBb0JLLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYTixFQUFvQlEsRUFBRUYsRUFBWUMsS0FBU1AsRUFBb0JRLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VQLEVBQW9CUSxFQUFJLENBQUNLLEVBQUtDLElBQVNMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGZCxFQUFvQmtCLEVBQUtoQixJQUNILG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDWCxPQUFPQyxlQUFlUixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEWixPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0hGaERyQixFQUFvQixNIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uIHtcclxuICBfcmVuZGVyZXI6IElSZW5kZXJlcjtcclxuICBfYWdlbnRzOiBJQWdlbnRbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXI6IElSZW5kZXJlcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgYWRkQWdlbnQoYWdlbnQ6IElBZ2VudCkge1xyXG4gICAgdGhpcy5fYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgYWdlbnQudXBkYXRlKGRlbHRhVCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRyYXcoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlci5jbGVhcigpO1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmRyYXdBZ2VudChhZ2VudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gXCIuL0lSZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyMkQgaW1wbGVtZW50cyBJUmVuZGVyZXIge1xyXG4gIF9jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgIHRoaXMuX2NvbnRleHQuZmlsbFJlY3QoXHJcbiAgICAgIDAsXHJcbiAgICAgIDAsXHJcbiAgICAgIHRoaXMuX2NvbnRleHQuY2FudmFzLndpZHRoLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy5oZWlnaHRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBkcmF3QWdlbnQoYWdlbnQ6IElBZ2VudCkge1xyXG4gICAgbGV0IHBvc2l0aW9uID0gYWdlbnQuZ2V0UG9zaXRpb24oKTtcclxuICAgIGxldCBkaXJlY3Rpb24gPSBhZ2VudC5nZXREaXJlY3Rpb24oKTtcclxuICAgIGxldCByYWRpdXMgPSAyMDtcclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5fY29udGV4dC5hcmMocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICBpZiAoZGlyZWN0aW9uLmR4ICE9PSAwIHx8IGRpcmVjdGlvbi5keSAhPT0gMCkge1xyXG4gICAgICBsZXQgbWFnbml0dWRlID0gTWF0aC5zcXJ0KFxyXG4gICAgICAgIGRpcmVjdGlvbi5keCAqIGRpcmVjdGlvbi5keCArIGRpcmVjdGlvbi5keSAqIGRpcmVjdGlvbi5keVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgdGhpcy5fY29udGV4dC5saW5lVG8oXHJcbiAgICAgICAgcG9zaXRpb24ueCArIChyYWRpdXMgKiBkaXJlY3Rpb24uZHgpIC8gbWFnbml0dWRlLFxyXG4gICAgICAgIHBvc2l0aW9uLnkgKyAocmFkaXVzICogZGlyZWN0aW9uLmR5KSAvIG1hZ25pdHVkZVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY29udGV4dC5zdHJva2UoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzaWNBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICBkaXJlY3Rpb246IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9XHJcbiAgKSB7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLl9wb3NpdGlvbi54ICs9IHRoaXMuX2RpcmVjdGlvbi5keDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uLnkgKz0gdGhpcy5fZGlyZWN0aW9uLmR5O1xyXG5cclxuICAgIGlmICh0aGlzLl9wb3NpdGlvbi54ID4gMTI4MCkge1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi54ID0gMDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLl9wb3NpdGlvbi55ID4gNzIwKSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnkgPSAwO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuX3Bvc2l0aW9uLnggPCAwKSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnggPSAxMjgwO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuX3Bvc2l0aW9uLnkgPCAwKSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnkgPSA3MjA7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNpbXVsYXRpb24gfSBmcm9tIFwiLi9TaW11bGF0aW9uXCI7XHJcbmltcG9ydCB7IFJlbmRlcmVyMkQgfSBmcm9tIFwiLi9SZW5kZXJlcjJEXCI7XHJcbmltcG9ydCB7IEJhc2ljQWdlbnQgfSBmcm9tIFwiLi9CYXNpY0FnZW50XCI7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgZnJhbWVyYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXJhdGVcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmNvbnN0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHN0ZXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0ZXBCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKGNhbnZhcyk7XHJcbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihyZW5kZXJlcik7XHJcbnZhciBwbGF5ID0gZmFsc2U7XHJcblxyXG4vLyBpbml0aWFsaXNlIHNpbXVsYXRpb24gYW5kIGJlZ2luIHVwZGF0ZS9yZW5kZXIgbG9vcFxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDI1OyBpKyspIHtcclxuICAgIGNvbnN0IGFnZW50ID0gbmV3IEJhc2ljQWdlbnQoXHJcbiAgICAgIHsgeDogY2FudmFzLndpZHRoICogTWF0aC5yYW5kb20oKSwgeTogY2FudmFzLmhlaWdodCAqIE1hdGgucmFuZG9tKCkgfSxcclxuICAgICAgeyBkeDogMiAqIE1hdGgucmFuZG9tKCkgLSAxLCBkeTogMiAqIE1hdGgucmFuZG9tKCkgLSAxIH1cclxuICAgICk7XHJcbiAgICBzaW11bGF0aW9uLmFkZEFnZW50KGFnZW50KTtcclxuICB9XHJcblxyXG4gIGxldCBsYXN0UmVuZGVyID0gMDtcclxuICBsZXQgbGFzdEZQUyA9IDA7XHJcbiAgbGV0IGZyYW1lcyA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIGxvb3AodGltZXN0YW1wOiBudW1iZXIpIHtcclxuICAgIGxldCBkZWx0YVQgPSB0aW1lc3RhbXAgLSBsYXN0UmVuZGVyO1xyXG4gICAgbGFzdFJlbmRlciA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICAvLyB1cGRhdGVcclxuICAgIGlmIChwbGF5KSB7XHJcbiAgICAgIHNpbXVsYXRpb24udXBkYXRlKGRlbHRhVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyXHJcbiAgICBzaW11bGF0aW9uLmRyYXcoKTtcclxuICAgIGZyYW1lcysrO1xyXG5cclxuICAgIC8vIGV2ZXJ5IDI1MG1zLCByZWNhbGN1bGF0ZSBmcmFtZXJhdGVcclxuICAgIGlmICh0aW1lc3RhbXAgLSBsYXN0RlBTID49IDI1MCkge1xyXG4gICAgICBmcmFtZXJhdGUudGV4dENvbnRlbnQgPSBgRlBTOiAkeyhcclxuICAgICAgICAoMTAwMCAqIGZyYW1lcykgL1xyXG4gICAgICAgICh0aW1lc3RhbXAgLSBsYXN0RlBTKVxyXG4gICAgICApLnRvRml4ZWQoMSl9YDtcclxuICAgICAgZnJhbWVzID0gMDtcclxuICAgICAgbGFzdEZQUyA9IHRpbWVzdGFtcDtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG4gIH1cclxuXHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxufVxyXG5cclxuLy8gdG9nZ2xlIHBsYXkvcGF1c2UsIGFuZCBkaXNhbGxvdyBzdGVwIHdoaWxlIHBsYXlpbmdcclxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQYXVzZSgpIHtcclxuICBwbGF5ID0gIXBsYXk7XHJcblxyXG4gIGlmIChwbGF5KSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQYXVzZVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBsYXlcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHN0ZXAgc2ltdWxhdGlvbiAxIGZyYW1lLCBhc3N1bWluZyA2MEZQU1xyXG5leHBvcnQgZnVuY3Rpb24gc3RlcCgpIHtcclxuICBzaW11bGF0aW9uLnVwZGF0ZSgxMDAwIC8gNjApO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oOTk5KTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==