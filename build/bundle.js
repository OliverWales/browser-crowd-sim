var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={775:(t,i,n)=>{n.r(i),n.d(i,{init:()=>m,playPause:()=>P,reconfigure:()=>b,step:()=>w});var e=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(n){n.update(t,i._agents.getNeighboursInRangeRectilinear(n,400))})),this._agents.forEach((function(t){t.finalize()})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),n=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var e=n.magnitude();if(0!==e){this._context.moveTo(i.x,i.y);var o=i.add(n.divide(e).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var n=Math.sqrt(Math.random())*i,e=2*Math.PI*Math.random();return new t(this.x+n*Math.cos(e),this.y+n*Math.sin(e))},t}(),s=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var n=this._goalPosition.subtract(this._position);n.magnitude()>60*t/1e3?(this._nextDirection=n.normalise(),this._nextPosition=this._position.add(this._nextDirection.multiply(60*t/1e3))):(this._nextPosition=this._goalPosition,this._isDone=!0)}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t}(),a=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var n=this;if(!this._isDone){var e=this._goalPosition.subtract(this._position);if(e.magnitude()>60*t/1e3){this._nextDirection=e.normalise();var o=this._position.add(this._nextDirection.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=n.Id&&n.collides(t,o)&&(n._isStuck=!0)})),this._isStuck||(this._nextPosition=this._position.add(this._nextDirection.multiply(60*t/1e3)))}else this._nextPosition=this._goalPosition,this._isDone=!0}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),u=function(){function t(){}return t.RandomToRandom=function(t,i,n,e){for(var o=[],r=this.poissonDiskSample(i,n,t,50),s=this.poissonDiskSample(i,n,t,50),a=0;a<t;a++){var u=e(a,r[a],s[a],20);o.push(u)}return{agents:o}},t.RandomToLine=function(t,i,n,e){for(var o=[],s=this.poissonDiskSample(i,n,t,50),a=0;a<t;a++){var u=e(a,s[a],new r((a+1)/(t+1)*i,n/2),20);o.push(u)}return{agents:o}},t.CircleToCircle=function(t,i,n,e){for(var o=[],s=i/2,a=n/2,u=n/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,p=e(h,new r(s+u*Math.cos(c),a+u*Math.sin(c)),new r(s+u*Math.cos(c+Math.PI),a+u*Math.sin(c+Math.PI)),20);o.push(p)}return{agents:o}},t.GridToGrid=function(t,i,n,e){for(var o=[],s=Math.ceil(t/8),a=i-50-80*(s-1),u=n/2-120,h=0,c=0;c<s;c++){for(var p=0;p<4;p++){var d=new r(50+80*c,u+80*p),g=new r(a+80*c,u+80*p);if(o.push(e(h,d,g,20)),++h>=t)break;if(o.push(e(h,g,d,20)),++h>=t)break}if(h>=t)break}return{agents:o}},t.poissonDiskSample=function(t,i,n,e){for(var o=[],s=function(){for(var n,s=!0;s;)s=!1,n=new r(t*Math.random(),i*Math.random()),o.forEach((function(t){n.subtract(t).magnitudeSqrd()<Math.pow(e,2)&&(s=!0)}));o.push(n)},a=0;a<n;a++)s();return o},t}(),h=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var n=t.getPosition().x-i,e=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,n,e,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(n){return t.getPosition().subtract(n.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var n=Math.floor(t.length/2),e=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(e.slice(0,n),!i),r=this.constructTree(e.slice(n+1,t.length),!i);return{agent:t[n],left:o,right:r}},t.prototype.rangeSearch=function(t,i,n,e,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=e&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().y>=n&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=n&&t.agent.getPosition().x<=e&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),c=function(){function t(t,i,n,e){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var n,e,o=.5,s=this.getPreferredVelocity(o),a=!0,u=0;u<i.length;u++)if(null==(y=this.getVelocityObstacle(i[u]))||this.isInside(s,y)){a=!1,n=y,e=u;break}if(a)return this._nextDirection=s,this._nextPosition=this._position.add(s),void(this._nextPosition.subtract(this._goalPosition).magnitudeSqrd()<.1&&(this._isDone=!0,this._nextPosition=this._goalPosition,this._nextDirection=new r(0,0)));if(null!=n){var h=this.getClosestPointOnLine(n.vertex,n.tangent1,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++)if(u!=e&&(null==(p=this.getVelocityObstacle(i[u]))||this.isInside(h,p))){a=!1;break}if(a)return this._nextDirection=h,void(this._nextPosition=this._position.add(h))}var c=this.getClosestPointOnLine(n.vertex,n.tangent2,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++){var p;if(u!=e&&(null==(p=this.getVelocityObstacle(i[u]))||this.isInside(c,p))){a=!1;break}}if(a)return this._nextDirection=c,void(this._nextPosition=this._position.add(c))}}var d=1/0,g=new r(0,0);for(u=0;u<150;u++){for(var f=new r(0,0).sample(o),l=1/0,_=0;_<i.length;_++){var y,x=i[_];if(null==(y=this.getVelocityObstacle(x))||this.isInside(f,y)){var v=this.getFirstRayCircleIntersection(x.getPosition(),this.Radius+x.Radius,this._position,f);if(v<l&&0==(l=v))return}}var m=100/l+s.subtract(f).magnitude();m<d&&(d=m,g=f)}0==g.magnitude()&&(this._isStuck=!0),this._nextDirection=g,this._nextPosition=this._position.add(g)}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),n=i.magnitude();return n>t?i.divide(n/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),n=t.getPosition().subtract(this._position).add(i),e=t.Radius+this.Radius,o=i.subtract(n),s=o.magnitude();if(s<e)return null;var a=Math.acos(e/s),u=Math.atan2(o.y,o.x),h=u+a,c=u-a;return{vertex:i,tangent1:new r(n.x+e*Math.cos(h),n.y+e*Math.sin(h)),tangent2:new r(n.x+e*Math.cos(c),n.y+e*Math.sin(c))}},t.prototype.isInside=function(t,i){var n=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),e=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return n>0&&e<0},t.prototype.getClosestPointOnLine=function(t,i,n){var e=i.normalise(),o=n.subtract(t).dot(e);return t.add(e.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,n,e){var o=n.subtract(t),r=e.dot(e),s=2*e.dot(o),a=o.dot(o)-Math.pow(i,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var h=(-s-Math.sqrt(u))/2*r;return h<0?1/0:h},t}(),p=document.getElementById("config"),d=document.getElementById("agentType"),g=document.getElementById("numberOfAgents"),f=document.getElementById("canvas"),l=document.getElementById("framerate"),_=document.getElementById("playButton"),y=document.getElementById("stepButton"),x=new e(new o(f),new h),v=!1;function m(){this.reconfigure();var t=0,i=0,n=0;window.requestAnimationFrame((function e(o){var r=o-t;t=o,v&&x.update(r),x.draw(),n++,o-i>=250&&(l.textContent="FPS: "+(1e3*n/(o-i)).toFixed(1),n=0,i=o),window.requestAnimationFrame(e)}))}function P(){(v=!v)?(_.textContent="Pause",y.disabled=!0):(_.textContent="Play",y.disabled=!1)}function w(){x.update(1e3/60)}function b(){var t;v&&this.playPause();var i,n=p.value,e=d.value,o=null!==(t=parseInt(g.value))&&void 0!==t?t:0;switch(e){case"BasicAgent":i=function(t,i,n,e){return new s(t,i,n,e)};break;case"StopAgent":i=function(t,i,n,e){return new a(t,i,n,e)};break;case"VOAgent":i=function(t,i,n,e){return new c(t,i,n,e)};break;default:throw new Error("Agent not implemented")}switch(n){case"RandomToRandom":x.init(u.RandomToRandom(o,f.width,f.height,i));break;case"RandomToLine":x.init(u.RandomToLine(o,f.width,f.height,i));break;case"CircleToCircle":x.init(u.CircleToCircle(o,f.width,f.height,i));break;case"GridToGrid":x.init(u.GridToGrid(o,f.width,f.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function n(e){if(i[e])return i[e].exports;var o=i[e]={exports:{}};return t[e](o,o.exports,n),o.exports}return n.d=(t,i)=>{for(var e in i)n.o(i,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(775)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJmaW5hbGl6ZSIsImdldEFsbCIsImRyYXciLCJjbGVhciIsImRyYXdBZ2VudCIsImNhbnZhcyIsIl9jb250ZXh0IiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZ2V0RGlyZWN0aW9uIiwiYmVnaW5QYXRoIiwiZ2V0SXNEb25lIiwic3Ryb2tlU3R5bGUiLCJnZXRJc1N0dWNrIiwiYXJjIiwieCIsInkiLCJSYWRpdXMiLCJNYXRoIiwiUEkiLCJtYWduaXR1ZGUiLCJtb3ZlVG8iLCJuZXdQb3MiLCJhZGQiLCJkaXZpZGUiLCJtdWx0aXBseSIsImxpbmVUbyIsInN0cm9rZSIsImNvcHkiLCJ2IiwiVmVjdG9yMmYiLCJzdWJ0cmFjdCIsInMiLCJkb3QiLCJtYWduaXR1ZGVTcXJkIiwic3FydCIsIm5vcm1hbGlzZSIsIm0iLCJzYW1wbGUiLCJtYXhSYWRpdXMiLCJyYWRpdXMiLCJyYW5kb20iLCJhbmdsZSIsImNvcyIsInNpbiIsImlkIiwic3RhcnRQb3NpdGlvbiIsImdvYWxQb3NpdGlvbiIsIklkIiwiX3Bvc2l0aW9uIiwiX2dvYWxQb3NpdGlvbiIsIl9kaXJlY3Rpb24iLCJfbmV4dFBvc2l0aW9uIiwiX25leHREaXJlY3Rpb24iLCJfaXNEb25lIiwiZ29hbERpcmVjdGlvbiIsIl9pc1N0dWNrIiwiY29sbGlkZXMiLCJSYW5kb21Ub1JhbmRvbSIsIm4iLCJhZ2VudENvbnN0cnVjdG9yIiwic3RhcnRQb3NpdGlvbnMiLCJwb2lzc29uRGlza1NhbXBsZSIsImdvYWxQb3NpdGlvbnMiLCJpIiwicHVzaCIsIlJhbmRvbVRvTGluZSIsIkNpcmNsZVRvQ2lyY2xlIiwiY2VudHJlWCIsImNlbnRyZVkiLCJHcmlkVG9HcmlkIiwiY29scyIsImNlaWwiLCJyaWdodCIsInRvcCIsImoiLCJhIiwiYiIsInhSYW5nZSIsInlSYW5nZSIsInRocmVzaG9sZCIsInNhbXBsZXMiLCJwb3MiLCJyZXNhbXBsZSIsIl9yb290IiwiY29uc3RydWN0VHJlZSIsInJhbmdlIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJhbmdlU2VhcmNoIiwiZmlsdGVyIiwib3RoZXIiLCJnZXROZWlnaGJvdXJzSW5SYW5nZUV1Y2xpZGVhbiIsImZ1biIsInhBeGlzIiwibGVuZ3RoIiwibWlkIiwiZmxvb3IiLCJzb3J0ZWQiLCJzb3J0IiwibGVmdCIsInNsaWNlIiwicm9vdCIsInJlcyIsImNvbmNhdCIsIk1BWF9WRUxPQ0lUWSIsIk1BWF9BQ0NFTEVSQVRJT04iLCJuZWlnaGJvdXJzIiwiY29sbGlzaW9uIiwic3BlZWQiLCJwcmVmZXJyZWRWZWxvY2l0eSIsImdldFByZWZlcnJlZFZlbG9jaXR5Iiwic2FmZSIsIlZPIiwiZ2V0VmVsb2NpdHlPYnN0YWNsZSIsImlzSW5zaWRlIiwiaGFsZnBsYW5lMSIsImdldENsb3Nlc3RQb2ludE9uTGluZSIsInZlcnRleCIsInRhbmdlbnQxIiwidmVsb2NpdHlPYnN0YWNsZSIsImhhbGZQbGFuZTIiLCJ0YW5nZW50MiIsIm1pblBlbmFsdHkiLCJJbmZpbml0eSIsImJlc3RWZWxvY2l0eSIsIm1pblRpbWVUb0NvbGxpc2lvbiIsInRpbWVUb0NvbGxpc2lvbiIsImdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uIiwicGVuYWx0eSIsIm1heFNwZWVkIiwiZ29hbERpc3RhbmNlIiwidmVsb2NpdHlCIiwiY2VudHJlIiwiZGlmZiIsImRpc3QiLCJ0aGV0YSIsImFjb3MiLCJwaGkiLCJhdGFuMiIsImFuZ2xlMSIsImFuZ2xlMiIsInZlbG9jaXR5IiwiZGV0ZXJtaW5hbnQxIiwiZGV0ZXJtaW5hbnQyIiwibGluZVBvaW50IiwibGluZURpcmVjdGlvbiIsInBvaW50IiwiZGlzdGFuY2UiLCJvcmlnaW4iLCJkZWx0YSIsImMiLCJkaXNjcmltIiwiY29uZmlnU2VsZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFnZW50VHlwZVNlbGVjdCIsIm51bWJlck9mQWdlbnRzSW5wdXQiLCJmcmFtZXJhdGUiLCJwbGF5QnV0dG9uIiwic3RlcEJ1dHRvbiIsInNpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwiUmVuZGVyZXIyRCIsIkFnZW50VHJlZSIsInBsYXkiLCJyZWNvbmZpZ3VyZSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsInZhbHVlIiwiYWdlbnRUeXBlIiwicGFyc2VJbnQiLCJCYXNpY0FnZW50IiwiU3RvcEFnZW50IiwiVk9BZ2VudCIsIkVycm9yIiwiQ29uZmlndXJhdGlvbnMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwibWFwcGluZ3MiOiJrSkFJQSxpQkFJRSxXQUFZQSxFQUFxQkMsR0FDL0JDLEtBQUtDLFVBQVlILEVBQ2pCRSxLQUFLRSxRQUFVSCxFQTJCbkIsT0F4QkUsWUFBQUksS0FBQSxTQUFLQyxHQUNISixLQUFLRSxRQUFRQyxLQUFLQyxFQUFPTCxTQUczQixZQUFBTSxPQUFBLFNBQU9DLEdBQVAsV0FFRU4sS0FBS0UsUUFBUUssU0FBUSxTQUFDQyxHQUNwQkEsRUFBTUgsT0FDSkMsRUFDQSxFQUFLSixRQUFRTyxnQ0FBZ0NELEVBSnJDLFNBT1pSLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1FLGNBRVJWLEtBQUtFLFFBQVFDLEtBQUtILEtBQUtFLFFBQVFTLFdBR2pDLFlBQUFDLEtBQUEsc0JB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QWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gIF9yZW5kZXJlcjogSVJlbmRlcmVyO1xyXG4gIF9hZ2VudHM6IElBZ2VudENvbGxlY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIsIGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICB9XHJcblxyXG4gIGluaXQoY29uZmlnOiBJQ29uZmlndXJhdGlvbikge1xyXG4gICAgdGhpcy5fYWdlbnRzLmluaXQoY29uZmlnLmFnZW50cyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpIHtcclxuICAgIGxldCByYW5nZSA9IDQwMDtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICBhZ2VudC51cGRhdGUoXHJcbiAgICAgICAgZGVsdGFULFxyXG4gICAgICAgIHRoaXMuX2FnZW50cy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIGFnZW50LmZpbmFsaXplKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2FnZW50cy5pbml0KHRoaXMuX2FnZW50cy5nZXRBbGwoKSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnQoYWdlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICBpZiAoYWdlbnQuZ2V0SXNEb25lKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwRkYwMFwiO1xyXG4gICAgfSBlbHNlIGlmIChhZ2VudC5nZXRJc1N0dWNrKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0ZGMDAwMFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBsZXQgbWFnbml0dWRlID0gZGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKG1hZ25pdHVkZSAhPT0gMCkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvc2l0aW9uLmFkZChcclxuICAgICAgICBkaXJlY3Rpb24uZGl2aWRlKG1hZ25pdHVkZSkubXVsdGlwbHkoYWdlbnQuUmFkaXVzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhuZXdQb3MueCwgbmV3UG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBWZWN0b3IyZiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gIH1cclxuXHJcbiAgY29weSh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodi54LCB2LnkpO1xyXG4gIH1cclxuXHJcbiAgYWRkKHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBzdWJ0cmFjdCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG4gIH1cclxuXHJcbiAgbXVsdGlwbHkoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuICB9XHJcblxyXG4gIGRpdmlkZShzOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAvIHMsIHRoaXMueSAvIHMpO1xyXG4gIH1cclxuXHJcbiAgZG90KHY6IFZlY3RvcjJmKSB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlU3FyZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDI7XHJcbiAgfVxyXG5cclxuICBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5tYWduaXR1ZGVTcXJkKCkpO1xyXG4gIH1cclxuXHJcbiAgbm9ybWFsaXNlKCk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBtID0gdGhpcy5tYWduaXR1ZGUoKTtcclxuICAgIHJldHVybiBtID09IDAgPyBuZXcgVmVjdG9yMmYoMCwgMCkgOiB0aGlzLmRpdmlkZShtKTtcclxuICB9XHJcblxyXG4gIHNhbXBsZShtYXhSYWRpdXM6IG51bWJlcikge1xyXG4gICAgLy8gVW5pZm9ybWx5IHNhbXBsZSB0aGUgY2lyY2xlIGNlbnRyZWQgYXQgdGhpcyBwb2ludCB3aXRoIHJhZGl1cyBtYXhSYWRpdXNcclxuICAgIGxldCByYWRpdXMgPSBNYXRoLnNxcnQoTWF0aC5yYW5kb20oKSkgKiBtYXhSYWRpdXM7XHJcbiAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKFxyXG4gICAgICB0aGlzLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgIHRoaXMueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX25leHRQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfbmV4dERpcmVjdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XHJcbiAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBnb2FsRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbi5tdWx0aXBseSgoZGVsdGFUICogNjApIC8gMTAwMClcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmFsaXplKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gdGhpcy5fbmV4dERpcmVjdGlvbjtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fbmV4dFBvc2l0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3BBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9uZXh0UG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX25leHREaXJlY3Rpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XHJcbiAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiAoZGVsdGFUICogNjApIC8gMTAwMCkge1xyXG4gICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fbmV4dERpcmVjdGlvbi5tdWx0aXBseSgyMCkpO1xyXG5cclxuICAgICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgICBpZiAoYWdlbnQuSWQgIT0gdGhpcy5JZCAmJiB0aGlzLmNvbGxpZGVzKGFnZW50LCBoZWFkaW5nKSkge1xyXG4gICAgICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5faXNTdHVjaykge1xyXG4gICAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcclxuICAgICAgICAgIHRoaXMuX25leHREaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmluYWxpemUoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB0aGlzLl9uZXh0RGlyZWN0aW9uO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9uZXh0UG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlcyhhZ2VudDogSUFnZW50LCBwb3NpdGlvbjogVmVjdG9yMmYpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3QocG9zaXRpb24pLm1hZ25pdHVkZSgpIDxcclxuICAgICAgYWdlbnQuUmFkaXVzICsgdGhpcy5SYWRpdXNcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZSh3aWR0aCwgaGVpZ2h0LCBuLCA1MCk7XHJcbiAgICBsZXQgZ29hbFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGxldCBzdGFydFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZigoKGkgKyAxKSAvIChuICsgMSkpICogd2lkdGgsIGhlaWdodCAvIDIpLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBQb3NpdGlvbiBvbiByYWRpdXMgb2YgY2lyY2xlIHRvIG9wcG9zaXRlIHBvaW50XHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3QgY2VudHJlWCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGNlbnRyZVkgPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzID0gaGVpZ2h0IC8gMiAtIDI1O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuZ2xlID0gKDIgKiBNYXRoLlBJICogaSkgLyBuO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoXHJcbiAgICAgICAgICBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgR3JpZFRvR3JpZChcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gVHdvIG9wcG9zaW5nIGdyaWRzIG9mIGFnZW50cyBwYXNzaW5nIHRocm91Z2ggZWFjaG90aGVyXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHJvd3MgPSA0O1xyXG4gICAgbGV0IGNvbHMgPSBNYXRoLmNlaWwobiAvICgyICogcm93cykpO1xyXG4gICAgbGV0IHNwYWNpbmcgPSA4MDtcclxuICAgIGxldCBsZWZ0ID0gNTA7XHJcbiAgICBsZXQgcmlnaHQgPSB3aWR0aCAtIGxlZnQgLSBzcGFjaW5nICogKGNvbHMgLSAxKTtcclxuICAgIGxldCB0b3AgPSBoZWlnaHQgLyAyIC0gKHNwYWNpbmcgLyAyKSAqIChyb3dzIC0gMSk7XHJcblxyXG4gICAgbGV0IGlkID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93czsgaisrKSB7XHJcbiAgICAgICAgbGV0IGEgPSBuZXcgVmVjdG9yMmYobGVmdCArIHNwYWNpbmcgKiBpLCB0b3AgKyBzcGFjaW5nICogaik7XHJcbiAgICAgICAgbGV0IGIgPSBuZXcgVmVjdG9yMmYocmlnaHQgKyBzcGFjaW5nICogaSwgdG9wICsgc3BhY2luZyAqIGopO1xyXG5cclxuICAgICAgICAvLyBMZWZ0IGdyaWRcclxuICAgICAgICBhZ2VudHMucHVzaChhZ2VudENvbnN0cnVjdG9yKGlkLCBhLCBiLCAyMCkpO1xyXG4gICAgICAgIGlkKys7XHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmlnaHQgZ3JpZFxyXG4gICAgICAgIGFnZW50cy5wdXNoKGFnZW50Q29uc3RydWN0b3IoaWQsIGIsIGEsIDIwKSk7XHJcbiAgICAgICAgaWQrKztcclxuXHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaWQgPj0gbikge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHBvaXNzb25EaXNrU2FtcGxlKFxyXG4gICAgeFJhbmdlOiBudW1iZXIsXHJcbiAgICB5UmFuZ2U6IG51bWJlcixcclxuICAgIG46IG51bWJlcixcclxuICAgIHRocmVzaG9sZDogbnVtYmVyXHJcbiAgKTogVmVjdG9yMmZbXSB7XHJcbiAgICBsZXQgc2FtcGxlczogVmVjdG9yMmZbXSA9IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGxldCByZXNhbXBsZSA9IHRydWU7XHJcbiAgICAgIGxldCBwb3M6IFZlY3RvcjJmO1xyXG5cclxuICAgICAgd2hpbGUgKHJlc2FtcGxlKSB7XHJcbiAgICAgICAgcmVzYW1wbGUgPSBmYWxzZTtcclxuICAgICAgICBwb3MgPSBuZXcgVmVjdG9yMmYoeFJhbmdlICogTWF0aC5yYW5kb20oKSwgeVJhbmdlICogTWF0aC5yYW5kb20oKSk7XHJcblxyXG4gICAgICAgIHNhbXBsZXMuZm9yRWFjaCgoc2FtcGxlKSA9PiB7XHJcbiAgICAgICAgICBpZiAocG9zLnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlU3FyZCgpIDwgdGhyZXNob2xkICoqIDIpIHtcclxuICAgICAgICAgICAgcmVzYW1wbGUgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzYW1wbGVzLnB1c2gocG9zKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2FtcGxlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5pbnRlcmZhY2UgTm9kZSB7XHJcbiAgYWdlbnQ6IElBZ2VudDtcclxuICBsZWZ0OiBOb2RlO1xyXG4gIHJpZ2h0OiBOb2RlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWdlbnRUcmVlIGltcGxlbWVudHMgSUFnZW50Q29sbGVjdGlvbiB7XHJcbiAgcHJpdmF0ZSBfYWdlbnRzOiBJQWdlbnRbXTtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICAgIHRoaXMuX3Jvb3QgPSB0aGlzLmNvbnN0cnVjdFRyZWUodGhpcy5fYWdlbnRzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldEFsbCgpOiBJQWdlbnRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IG1pblggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggLSByYW5nZTtcclxuICAgIGxldCBtaW5ZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWF4WCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCArIHJhbmdlO1xyXG4gICAgbGV0IG1heFkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgKyByYW5nZTtcclxuXHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMucmFuZ2VTZWFyY2godGhpcy5fcm9vdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoKG90aGVyKSA9PiBvdGhlci5JZCAhPT0gYWdlbnQuSWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4oYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoXHJcbiAgICAgIChvdGhlcikgPT5cclxuICAgICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KG90aGVyLmdldFBvc2l0aW9uKCkpLm1hZ25pdHVkZVNxcmQoKSA8PVxyXG4gICAgICAgIHJhbmdlICoqIDJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGZ1bjogKGFnZW50OiBJQWdlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKGZ1bik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdFRyZWUoYWdlbnRzOiBJQWdlbnRbXSwgeEF4aXM6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGlmIChhZ2VudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtaWQgPSBNYXRoLmZsb29yKGFnZW50cy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBsZXQgc29ydGVkID0geEF4aXNcclxuICAgICAgPyBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnggLSBiLmdldFBvc2l0aW9uKCkueClcclxuICAgICAgOiBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnkgLSBiLmdldFBvc2l0aW9uKCkueSk7XHJcblxyXG4gICAgbGV0IGxlZnQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoc29ydGVkLnNsaWNlKDAsIG1pZCksICF4QXhpcyk7XHJcbiAgICBsZXQgcmlnaHQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoXHJcbiAgICAgIHNvcnRlZC5zbGljZShtaWQgKyAxLCBhZ2VudHMubGVuZ3RoKSxcclxuICAgICAgIXhBeGlzXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB7IGFnZW50OiBhZ2VudHNbbWlkXSwgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJhbmdlU2VhcmNoKFxyXG4gICAgcm9vdDogTm9kZSxcclxuICAgIG1pblg6IG51bWJlcixcclxuICAgIG1pblk6IG51bWJlcixcclxuICAgIG1heFg6IG51bWJlcixcclxuICAgIG1heFk6IG51bWJlcixcclxuICAgIHhBeGlzOiBib29sZWFuXHJcbiAgKTogSUFnZW50W10ge1xyXG4gICAgaWYgKHJvb3QgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlczogSUFnZW50W10gPSBbXTtcclxuICAgIGlmICh4QXhpcykge1xyXG4gICAgICAvLyBJZiB4IDw9IG1heFggbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHggPj0gbWluWCBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIHkgPD0gbWF4WSBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeSA+PSBtaW5ZIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBhZ2VudCBpcyBpbiByYW5nZSByYW5nZSBhZGQgdG8gdGhlIHJlc3VsdFxyXG4gICAgaWYgKFxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkgJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZXHJcbiAgICApIHtcclxuICAgICAgcmVzLnB1c2gocm9vdC5hZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmludGVyZmFjZSBWZWxvY2l0eU9ic3RhY2xlIHtcclxuICAvLyBWZWxvY2l0eSBvYmplY3QgZGVmaW5lZCBieSBhIHBvaW50IGFuZCB0d28gZGlyZWN0aW9uIHZlY3RvcnNcclxuICB2ZXJ0ZXg6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQxOiBWZWN0b3IyZjtcclxuICB0YW5nZW50MjogVmVjdG9yMmY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWT0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBSYWRpdXM6IG51bWJlcjtcclxuICBJZDogbnVtYmVyO1xyXG5cclxuICBNQVhfVkVMT0NJVFkgPSAxLjA7XHJcbiAgTUFYX0FDQ0VMRVJBVElPTiA9IDAuNTtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfbmV4dFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9uZXh0RGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBuZWlnaGJvdXJzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgbGV0IHNwZWVkID0gMC41O1xyXG4gICAgbGV0IHByZWZlcnJlZFZlbG9jaXR5ID0gdGhpcy5nZXRQcmVmZXJyZWRWZWxvY2l0eShzcGVlZCk7XHJcblxyXG4gICAgbGV0IHNhZmUgPSB0cnVlO1xyXG4gICAgbGV0IGNvbGxpc2lvbjtcclxuICAgIGxldCBhZ2VudDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgVk8gPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgIGlmIChWTyA9PSBudWxsIHx8IHRoaXMuaXNJbnNpZGUocHJlZmVycmVkVmVsb2NpdHksIFZPKSkge1xyXG4gICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICBjb2xsaXNpb24gPSBWTztcclxuICAgICAgICBhZ2VudCA9IGk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcmVmZXJyZWQgdmVsb2NpdHkgaXMgc2FmZSwgZ28gaW4gdGhhdCBkaXJlY3Rpb25cclxuICAgIGlmIChzYWZlKSB7XHJcbiAgICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBwcmVmZXJyZWRWZWxvY2l0eTtcclxuICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKHByZWZlcnJlZFZlbG9jaXR5KTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuX25leHRQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9nb2FsUG9zaXRpb24pLm1hZ25pdHVkZVNxcmQoKSA8IDAuMVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29sbGlzaW9uICE9IG51bGwpIHtcclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBmaXJzdCBoYWxmLXBsYW5lXHJcbiAgICAgIGxldCBoYWxmcGxhbmUxID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udGFuZ2VudDEsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYWxmcGxhbmUxLm1hZ25pdHVkZSgpIDw9IHNwZWVkKSB7XHJcbiAgICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZnBsYW5lMSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IGhhbGZwbGFuZTE7XHJcbiAgICAgICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoaGFsZnBsYW5lMSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIHNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICAgIGxldCBoYWxmUGxhbmUyID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udGFuZ2VudDIsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYWxmcGxhbmUxLm1hZ25pdHVkZSgpIDw9IHNwZWVkKSB7XHJcbiAgICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZlBsYW5lMiwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IGhhbGZQbGFuZTI7XHJcbiAgICAgICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoaGFsZlBsYW5lMik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRWxzZSwgc2FtcGxlIHJhbmRvbSB2ZWxvY2l0aWVzIGFuZCBzZWxlY3QgdGhlIG9uZSB3aXRoIHRoZSBsZWFzdCBwZW5hbHR5XHJcbiAgICBsZXQgc2FtcGxlcyA9IDE1MDsgLy8gbnVtYmVyIG9mIHZlbG9jaXRpZXMgdG8gdHJ5XHJcbiAgICBsZXQgdyA9IDEwMDsgLy8gcGFyYW1ldGVyIGZvciBwZW5hbHR5XHJcbiAgICBsZXQgbWluUGVuYWx0eSA9IEluZmluaXR5O1xyXG4gICAgbGV0IGJlc3RWZWxvY2l0eSA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZXM7IGkrKykge1xyXG4gICAgICAvLyBTYW1wbGUgdmVsb2NpdHkgZnJvbSBlbnRpcmUgYWxsb3dlZCB2ZWxvY2l0eSBzcGFjZVxyXG4gICAgICBsZXQgc2FtcGxlID0gbmV3IFZlY3RvcjJmKDAsIDApLnNhbXBsZShzcGVlZCk7XHJcbiAgICAgIGxldCBtaW5UaW1lVG9Db2xsaXNpb24gPSBJbmZpbml0eTtcclxuXHJcbiAgICAgIC8vIEZpbmQgdGltZSB0byBmaXJzdCBjb2xsaXNpb25cclxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZWlnaGJvdXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgbGV0IGIgPSBuZWlnaGJvdXJzW2pdO1xyXG4gICAgICAgIGxldCBWTyA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShiKTtcclxuICAgICAgICBpZiAoVk8gPT0gbnVsbCB8fCB0aGlzLmlzSW5zaWRlKHNhbXBsZSwgVk8pKSB7XHJcbiAgICAgICAgICBsZXQgdGltZVRvQ29sbGlzaW9uID0gdGhpcy5nZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgICAgICAgICAgYi5nZXRQb3NpdGlvbigpLFxyXG4gICAgICAgICAgICB0aGlzLlJhZGl1cyArIGIuUmFkaXVzLFxyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbixcclxuICAgICAgICAgICAgc2FtcGxlXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGlmICh0aW1lVG9Db2xsaXNpb24gPCBtaW5UaW1lVG9Db2xsaXNpb24pIHtcclxuICAgICAgICAgICAgbWluVGltZVRvQ29sbGlzaW9uID0gdGltZVRvQ29sbGlzaW9uO1xyXG4gICAgICAgICAgICBpZiAobWluVGltZVRvQ29sbGlzaW9uID09IDApIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBwZW5hbHR5XHJcbiAgICAgIGxldCBwZW5hbHR5ID1cclxuICAgICAgICB3IC8gbWluVGltZVRvQ29sbGlzaW9uICsgcHJlZmVycmVkVmVsb2NpdHkuc3VidHJhY3Qoc2FtcGxlKS5tYWduaXR1ZGUoKTsgLy8gVFMgY29ycmVjdGx5IGhhbmRsZXMgZGl2aWRlIGJ5IHplcm8gb3IgaW5maW5pdHlcclxuICAgICAgaWYgKHBlbmFsdHkgPCBtaW5QZW5hbHR5KSB7XHJcbiAgICAgICAgbWluUGVuYWx0eSA9IHBlbmFsdHk7XHJcbiAgICAgICAgYmVzdFZlbG9jaXR5ID0gc2FtcGxlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJlc3RWZWxvY2l0eS5tYWduaXR1ZGUoKSA9PSAwKSB7XHJcbiAgICAgIHRoaXMuX2lzU3R1Y2sgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBiZXN0VmVsb2NpdHk7XHJcbiAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoYmVzdFZlbG9jaXR5KTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGZpbmFsaXplKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gdGhpcy5fbmV4dERpcmVjdGlvbjtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fbmV4dFBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQcmVmZXJyZWRWZWxvY2l0eShtYXhTcGVlZDogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IG1heFNwZWVkKSB7XHJcbiAgICAgIHJldHVybiBnb2FsRGlyZWN0aW9uLmRpdmlkZShnb2FsRGlzdGFuY2UgLyBtYXhTcGVlZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ29hbERpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VmVsb2NpdHlPYnN0YWNsZShiOiBJQWdlbnQpOiBWZWxvY2l0eU9ic3RhY2xlIHwgbnVsbCB7XHJcbiAgICBsZXQgdmVsb2NpdHlCID0gYi5nZXREaXJlY3Rpb24oKTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGUgb3JpZ2luIHRvIHRoaXMgYWdlbnQncyBwb3NpdGlvblxyXG4gICAgbGV0IHBvc2l0aW9uQiA9IGIuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcblxyXG4gICAgLy8gRmluZCBNaW5rb3dza2kgc3VtIG9mIGFnZW50c1xyXG4gICAgbGV0IGNlbnRyZSA9IHBvc2l0aW9uQi5hZGQodmVsb2NpdHlCKTtcclxuICAgIGxldCByYWRpdXMgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGxldCBkaWZmID0gdmVsb2NpdHlCLnN1YnRyYWN0KGNlbnRyZSk7XHJcbiAgICBsZXQgZGlzdCA9IGRpZmYubWFnbml0dWRlKCk7XHJcbiAgICBpZiAoZGlzdCA8IHJhZGl1cykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGhldGEgPSBNYXRoLmFjb3MocmFkaXVzIC8gZGlzdCk7XHJcbiAgICBsZXQgcGhpID0gTWF0aC5hdGFuMihkaWZmLnksIGRpZmYueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhbmdlbnQgdmVjdG9yc1xyXG4gICAgbGV0IGFuZ2xlMSA9IHBoaSArIHRoZXRhO1xyXG4gICAgbGV0IHRhbmdlbnQxID0gbmV3IFZlY3RvcjJmKFxyXG4gICAgICBjZW50cmUueCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlMSksXHJcbiAgICAgIGNlbnRyZS55ICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUxKVxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgYW5nbGUyID0gcGhpIC0gdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDIgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUyKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJldHVybiB2ZWxvY2l0eSBvYnN0YWNsZVxyXG4gICAgcmV0dXJuIHsgdmVydGV4OiB2ZWxvY2l0eUIsIHRhbmdlbnQxOiB0YW5nZW50MSwgdGFuZ2VudDI6IHRhbmdlbnQyIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzSW5zaWRlKHZlbG9jaXR5OiBWZWN0b3IyZiwgVk86IFZlbG9jaXR5T2JzdGFjbGUpOiBib29sZWFuIHtcclxuICAgIC8vIEZpcnN0IGhhbGYtcGxhbmVcclxuICAgIGxldCBkZXRlcm1pbmFudDEgPVxyXG4gICAgICAoVk8udGFuZ2VudDEueCAtIFZPLnZlcnRleC54KSAqICh2ZWxvY2l0eS55IC0gVk8udmVydGV4LnkpIC1cclxuICAgICAgKFZPLnRhbmdlbnQxLnkgLSBWTy52ZXJ0ZXgueSkgKiAodmVsb2NpdHkueCAtIFZPLnZlcnRleC54KTtcclxuXHJcbiAgICAvLyBTZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MiA9XHJcbiAgICAgIChWTy50YW5nZW50Mi54IC0gVk8udmVydGV4LngpICogKHZlbG9jaXR5LnkgLSBWTy52ZXJ0ZXgueSkgLVxyXG4gICAgICAoVk8udGFuZ2VudDIueSAtIFZPLnZlcnRleC55KSAqICh2ZWxvY2l0eS54IC0gVk8udmVydGV4LngpO1xyXG5cclxuICAgIHJldHVybiBkZXRlcm1pbmFudDEgPiAwICYmIGRldGVybWluYW50MiA8IDA7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENsb3Nlc3RQb2ludE9uTGluZShcclxuICAgIGxpbmVQb2ludDogVmVjdG9yMmYsXHJcbiAgICBsaW5lRGlyZWN0aW9uOiBWZWN0b3IyZixcclxuICAgIHBvaW50OiBWZWN0b3IyZlxyXG4gICk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBkaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgbGV0IHZlY3RvciA9IHBvaW50LnN1YnRyYWN0KGxpbmVQb2ludCk7XHJcbiAgICBsZXQgZGlzdGFuY2UgPSB2ZWN0b3IuZG90KGRpcmVjdGlvbik7XHJcbiAgICByZXR1cm4gbGluZVBvaW50LmFkZChkaXJlY3Rpb24ubXVsdGlwbHkoZGlzdGFuY2UpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Rmlyc3RSYXlDaXJjbGVJbnRlcnNlY3Rpb24oXHJcbiAgICBjZW50cmU6IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXIsXHJcbiAgICBvcmlnaW46IFZlY3RvcjJmLFxyXG4gICAgZGlyZWN0aW9uOiBWZWN0b3IyZlxyXG4gICk6IG51bWJlciB7XHJcbiAgICBsZXQgZGVsdGEgPSBvcmlnaW4uc3VidHJhY3QoY2VudHJlKTtcclxuXHJcbiAgICBsZXQgYSA9IGRpcmVjdGlvbi5kb3QoZGlyZWN0aW9uKTtcclxuICAgIGxldCBiID0gMiAqIGRpcmVjdGlvbi5kb3QoZGVsdGEpO1xyXG4gICAgbGV0IGMgPSBkZWx0YS5kb3QoZGVsdGEpIC0gcmFkaXVzICoqIDI7XHJcblxyXG4gICAgbGV0IGRpc2NyaW0gPSBiICoqIDIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgaWYgKGRpc2NyaW0gPCAwKSB7XHJcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxyXG4gICAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGRpc3RhbmNlID0gKCgtYiAtIE1hdGguc3FydChkaXNjcmltKSkgLyAyKSAqIGE7XHJcblxyXG4gICAgaWYgKGRpc3RhbmNlIDwgMCkge1xyXG4gICAgICAvLyBJbnRlcnNlY3Rpb24gYmVoaW5kXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGlzdGFuY2U7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNpbXVsYXRpb24gfSBmcm9tIFwiLi9TaW11bGF0aW9uXCI7XHJcbmltcG9ydCB7IFJlbmRlcmVyMkQgfSBmcm9tIFwiLi9SZW5kZXJlcjJEXCI7XHJcblxyXG5pbXBvcnQgeyBCYXNpY0FnZW50IH0gZnJvbSBcIi4vQmFzaWNBZ2VudFwiO1xyXG5pbXBvcnQgeyBTdG9wQWdlbnQgfSBmcm9tIFwiLi9TdG9wQWdlbnRcIjtcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbnMgfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5pbXBvcnQgeyBBZ2VudFRyZWUgfSBmcm9tIFwiLi9BZ2VudFRyZWVcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5pbXBvcnQgeyBWT0FnZW50IH0gZnJvbSBcIi4vVk9BZ2VudFwiO1xyXG5cclxuY29uc3QgY29uZmlnU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maWdcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IGFnZW50VHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWdlbnRUeXBlXCJcclxuKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgbnVtYmVyT2ZBZ2VudHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwibnVtYmVyT2ZBZ2VudHNcIlxyXG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgZnJhbWVyYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXJhdGVcIikgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcbmNvbnN0IHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHN0ZXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0ZXBCdXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKGNhbnZhcyk7XHJcbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihyZW5kZXJlciwgbmV3IEFnZW50VHJlZSgpKTtcclxudmFyIHBsYXkgPSBmYWxzZTtcclxuXHJcbi8vIGluaXRpYWxpc2Ugc2ltdWxhdGlvbiBhbmQgYmVnaW4gdXBkYXRlL3JlbmRlciBsb29wXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xyXG4gIHRoaXMucmVjb25maWd1cmUoKTtcclxuXHJcbiAgbGV0IGxhc3RSZW5kZXIgPSAwO1xyXG4gIGxldCBsYXN0RlBTID0gMDtcclxuICBsZXQgZnJhbWVzID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXA6IG51bWJlcikge1xyXG4gICAgbGV0IGRlbHRhVCA9IHRpbWVzdGFtcCAtIGxhc3RSZW5kZXI7XHJcbiAgICBsYXN0UmVuZGVyID0gdGltZXN0YW1wO1xyXG5cclxuICAgIC8vIHVwZGF0ZVxyXG4gICAgaWYgKHBsYXkpIHtcclxuICAgICAgc2ltdWxhdGlvbi51cGRhdGUoZGVsdGFUKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXJcclxuICAgIHNpbXVsYXRpb24uZHJhdygpO1xyXG4gICAgZnJhbWVzKys7XHJcblxyXG4gICAgLy8gcmVjYWxjdWxhdGUgZnJhbWVyYXRlIGV2ZXJ5IDI1MG1zXHJcbiAgICBpZiAodGltZXN0YW1wIC0gbGFzdEZQUyA+PSAyNTApIHtcclxuICAgICAgZnJhbWVyYXRlLnRleHRDb250ZW50ID0gYEZQUzogJHsoXHJcbiAgICAgICAgKDEwMDAgKiBmcmFtZXMpIC9cclxuICAgICAgICAodGltZXN0YW1wIC0gbGFzdEZQUylcclxuICAgICAgKS50b0ZpeGVkKDEpfWA7XHJcblxyXG4gICAgICBmcmFtZXMgPSAwO1xyXG4gICAgICBsYXN0RlBTID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcblxyXG4vLyB0b2dnbGUgcGxheS9wYXVzZVxyXG5leHBvcnQgZnVuY3Rpb24gcGxheVBhdXNlKCkge1xyXG4gIHBsYXkgPSAhcGxheTtcclxuXHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBhdXNlXCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGxheVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gc3RlcCBzaW11bGF0aW9uIGJ5IDEgZnJhbWVcclxuZXhwb3J0IGZ1bmN0aW9uIHN0ZXAoKSB7XHJcbiAgc2ltdWxhdGlvbi51cGRhdGUoMTAwMCAvIDYwKTsgLy8gQXNzdW1lcyA2MEZQU1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjb25maWd1cmUoKSB7XHJcbiAgaWYgKHBsYXkpIHtcclxuICAgIHRoaXMucGxheVBhdXNlKCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb25maWcgPSBjb25maWdTZWxlY3QudmFsdWU7XHJcbiAgY29uc3QgYWdlbnRUeXBlID0gYWdlbnRUeXBlU2VsZWN0LnZhbHVlOyAvLyBUT0RPOiB3aXJlIHRoaXMgaW5cclxuICBjb25zdCBuID0gcGFyc2VJbnQobnVtYmVyT2ZBZ2VudHNJbnB1dC52YWx1ZSkgPz8gMDtcclxuXHJcbiAgLy8gU2VsZWN0IGFnZW50IGNvbnN0cnVjdG9yXHJcbiAgbGV0IGFnZW50Q29uc3RydWN0b3I7XHJcbiAgc3dpdGNoIChhZ2VudFR5cGUpIHtcclxuICAgIGNhc2UgXCJCYXNpY0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBCYXNpY0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJTdG9wQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFN0b3BBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiVk9BZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgVk9BZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFnZW50IG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNlbGVjdCBjb25maWd1cmF0aW9uXHJcbiAgc3dpdGNoIChjb25maWcpIHtcclxuICAgIGNhc2UgXCJSYW5kb21Ub1JhbmRvbVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub1JhbmRvbShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9MaW5lXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvTGluZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiQ2lyY2xlVG9DaXJjbGVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuQ2lyY2xlVG9DaXJjbGUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIkdyaWRUb0dyaWRcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuR3JpZFRvR3JpZChcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3NSk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=