var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={775:(t,i,e)=>{e.r(i),e.d(i,{init:()=>x,playPause:()=>w,reconfigure:()=>b,step:()=>P});var n=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(e){e.update(t,i._agents.getNeighboursInRangeRectilinear(e,300))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),e=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var n=e.magnitude();if(0!==n){this._context.moveTo(i.x,i.y);var o=i.add(e.divide(n).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var e=Math.sqrt(Math.random())*i,n=2*Math.PI*Math.random();return new t(this.x+e*Math.cos(n),this.y+e*Math.sin(n))},t}(),s=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var e=this._goalPosition.subtract(this._position);e.magnitude()>60*t/1e3?(this._direction=e.normalise(),this._position=this._position.add(this._direction.multiply(60*t/1e3))):(this._position=this._goalPosition,this._isDone=!0)}},t}(),a=function(){function t(t,i,e,n){this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var e=this;if(!this._isDone){var n=this._goalPosition.subtract(this._position);if(n.magnitude()>60*t/1e3){this._direction=n.normalise();var o=this._position.add(this._direction.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=e.Id&&e.collides(t,o)&&(e._isStuck=!0)})),this._isStuck||(this._position=this._position.add(this._direction.multiply(60*t/1e3)))}else this._position=this._goalPosition,this._isDone=!0}},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),u=function(){function t(){}return t.RandomToRandom=function(t,i,e,n){for(var o=[],r=this.poissonDiskSample(i,e,t,50),s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var u=n(a,r[a],s[a],20);o.push(u)}return{agents:o}},t.RandomToLine=function(t,i,e,n){for(var o=[],s=this.poissonDiskSample(i,e,t,50),a=0;a<t;a++){var u=n(a,s[a],new r((a+1)/(t+1)*i,e/2),20);o.push(u)}return{agents:o}},t.CircleToCircle=function(t,i,e,n){for(var o=[],s=i/2,a=e/2,u=e/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,d=n(h,new r(s+u*Math.cos(c),a+u*Math.sin(c)),new r(s+u*Math.cos(c+Math.PI),a+u*Math.sin(c+Math.PI)),20);o.push(d)}return{agents:o}},t.GridToGrid=function(t,i,e,n){for(var o=[],s=Math.ceil(t/8),a=i-50-80*(s-1),u=e/2-120,h=0,c=0;c<s;c++){for(var d=0;d<4;d++){var p=new r(50+80*c,u+80*d),g=new r(a+80*c,u+80*d);if(o.push(n(h,p,g,20)),++h>=t)break;if(o.push(n(h,g,p,20)),++h>=t)break}if(h>=t)break}return{agents:o}},t.poissonDiskSample=function(t,i,e,n){for(var o=[],s=function(){for(var e,s=!0;s;)s=!1,e=new r(t*Math.random(),i*Math.random()),o.forEach((function(t){e.subtract(t).magnitudeSqrd()<Math.pow(n,2)&&(s=!0)}));o.push(e)},a=0;a<e;a++)s();return o},t}(),h=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var e=t.getPosition().x-i,n=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,e,n,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(e){return t.getPosition().subtract(e.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var e=Math.floor(t.length/2),n=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(n.slice(0,e),!i),r=this.constructTree(n.slice(e+1,t.length),!i);return{agent:t[e],left:o,right:r}},t.prototype.rangeSearch=function(t,i,e,n,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=n&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,e,n,o,!r))),t.agent.getPosition().y>=e&&(s=s.concat(this.rangeSearch(t.left,i,e,n,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=e&&t.agent.getPosition().x<=n&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),c=function(){function t(t,i,e,n){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=e,this.Radius=n,this._direction=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(!this._isDone){this._isStuck=!1;for(var e,n,o=.5,s=this.getPreferredVelocity(o),a=!0,u=0;u<i.length;u++)if(null==(_=this.getVelocityObstacle(i[u]))||this.isInside(s,_)){a=!1,e=_,n=u;break}if(a)return this._direction=s,this._position=this._position.add(s),void this.checkIfDone();if(null!=e){var h=this.getClosestPointOnLine(e.vertex,e.tangent1,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++)if(u!=n&&(null==(d=this.getVelocityObstacle(i[u]))||this.isInside(h,d))){a=!1;break}if(a)return this._direction=h,this._position=this._position.add(h),void this.checkIfDone()}var c=this.getClosestPointOnLine(e.vertex,e.tangent2,s);if(h.magnitude()<=o){for(a=!0,u=0;u<i.length;u++){var d;if(u!=n&&(null==(d=this.getVelocityObstacle(i[u]))||this.isInside(c,d))){a=!1;break}}if(a)return this._direction=c,this._position=this._position.add(c),void this.checkIfDone()}}var p=1/0,g=new r(0,0);for(u=0;u<100;u++){for(var f=new r(0,0).sample(o),l=1/0,y=0;y<i.length;y++){var _,v=i[y];if(null==(_=this.getVelocityObstacle(v))||this.isInside(f,_)){var m=this.getFirstRayCircleIntersection(v.getPosition(),this.Radius+v.Radius,this._position,f);if(m<l&&0==(l=m))return void this.checkIfDone()}}var x=300/l+s.subtract(f).magnitude();x<p&&(p=x,g=f)}0==g.magnitude()&&(this._isStuck=!0),this._direction=g,this._position=this._position.add(g),this.checkIfDone()}},t.prototype.getPreferredVelocity=function(t){var i=this._goalPosition.subtract(this._position),e=i.magnitude();return e>t?i.divide(e/t):i},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),e=t.getPosition().subtract(this._position).add(i),n=t.Radius+this.Radius,o=i.subtract(e),s=o.magnitude();if(s<n)return null;var a=Math.acos(n/s),u=Math.atan2(o.y,o.x),h=u+a,c=u-a;return{vertex:i,tangent1:new r(e.x+n*Math.cos(h),e.y+n*Math.sin(h)),tangent2:new r(e.x+n*Math.cos(c),e.y+n*Math.sin(c))}},t.prototype.isInside=function(t,i){var e=(i.tangent1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent1.y-i.vertex.y)*(t.x-i.vertex.x),n=(i.tangent2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.tangent2.y-i.vertex.y)*(t.x-i.vertex.x);return e>0&&n<0},t.prototype.getClosestPointOnLine=function(t,i,e){var n=i.normalise(),o=e.subtract(t).dot(n);return t.add(n.multiply(o))},t.prototype.getFirstRayCircleIntersection=function(t,i,e,n){var o=e.subtract(t),r=n.dot(n),s=2*n.dot(o),a=o.dot(o)-Math.pow(i,2),u=Math.pow(s,2)-4*r*a;if(u<0)return 1/0;var h=(-s-Math.sqrt(u))/2*r;return h<0?1/0:h},t.prototype.checkIfDone=function(){this._position.subtract(this._goalPosition).magnitudeSqrd()<1&&(this._isDone=!0,this._position=this._goalPosition,this._direction=new r(0,0))},t}(),d=document.getElementById("config"),p=document.getElementById("agentType"),g=document.getElementById("numberOfAgents"),f=document.getElementById("canvas"),l=document.getElementById("framerate"),y=document.getElementById("playButton"),_=document.getElementById("stepButton"),v=new n(new o(f),new h),m=!1;function x(){this.reconfigure();var t=0,i=0,e=0;window.requestAnimationFrame((function n(o){var r=o-t;t=o,m&&v.update(r),v.draw(),e++,o-i>=250&&(l.textContent="FPS: "+(1e3*e/(o-i)).toFixed(1),e=0,i=o),window.requestAnimationFrame(n)}))}function w(){(m=!m)?(y.textContent="Pause",_.disabled=!0):(y.textContent="Play",_.disabled=!1)}function P(){v.update(1e3/60)}function b(){var t;m&&this.playPause();var i,e=d.value,n=p.value,o=null!==(t=parseInt(g.value))&&void 0!==t?t:0;switch(n){case"BasicAgent":i=function(t,i,e,n){return new s(t,i,e,n)};break;case"StopAgent":i=function(t,i,e,n){return new a(t,i,e,n)};break;case"VOAgent":i=function(t,i,e,n){return new c(t,i,e,n)};break;default:throw new Error("Agent not implemented")}switch(e){case"RandomToRandom":v.init(u.RandomToRandom(o,f.width,f.height,i));break;case"RandomToLine":v.init(u.RandomToLine(o,f.width,f.height,i));break;case"CircleToCircle":v.init(u.CircleToCircle(o,f.width,f.height,i));break;case"GridToGrid":v.init(u.GridToGrid(o,f.width,f.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}return e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(775)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJnZXRBbGwiLCJkcmF3IiwiY2xlYXIiLCJkcmF3QWdlbnQiLCJjYW52YXMiLCJfY29udGV4dCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsImRpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsImJlZ2luUGF0aCIsImdldElzRG9uZSIsInN0cm9rZVN0eWxlIiwiZ2V0SXNTdHVjayIsImFyYyIsIngiLCJ5IiwiUmFkaXVzIiwiTWF0aCIsIlBJIiwibWFnbml0dWRlIiwibW92ZVRvIiwibmV3UG9zIiwiYWRkIiwiZGl2aWRlIiwibXVsdGlwbHkiLCJsaW5lVG8iLCJzdHJva2UiLCJjb3B5IiwidiIsIlZlY3RvcjJmIiwic3VidHJhY3QiLCJzIiwiZG90IiwibWFnbml0dWRlU3FyZCIsInNxcnQiLCJub3JtYWxpc2UiLCJtIiwic2FtcGxlIiwibWF4UmFkaXVzIiwicmFkaXVzIiwicmFuZG9tIiwiYW5nbGUiLCJjb3MiLCJzaW4iLCJpZCIsInN0YXJ0UG9zaXRpb24iLCJnb2FsUG9zaXRpb24iLCJJZCIsIl9wb3NpdGlvbiIsIl9nb2FsUG9zaXRpb24iLCJfZGlyZWN0aW9uIiwiX2lzRG9uZSIsImdvYWxEaXJlY3Rpb24iLCJfaXNTdHVjayIsImNvbGxpZGVzIiwiUmFuZG9tVG9SYW5kb20iLCJuIiwiYWdlbnRDb25zdHJ1Y3RvciIsInN0YXJ0UG9zaXRpb25zIiwicG9pc3NvbkRpc2tTYW1wbGUiLCJnb2FsUG9zaXRpb25zIiwiaSIsInB1c2giLCJSYW5kb21Ub0xpbmUiLCJDaXJjbGVUb0NpcmNsZSIsImNlbnRyZVgiLCJjZW50cmVZIiwiR3JpZFRvR3JpZCIsImNvbHMiLCJjZWlsIiwicmlnaHQiLCJ0b3AiLCJqIiwiYSIsImIiLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJ0aHJlc2hvbGQiLCJzYW1wbGVzIiwicG9zIiwicmVzYW1wbGUiLCJfcm9vdCIsImNvbnN0cnVjdFRyZWUiLCJyYW5nZSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJyYW5nZVNlYXJjaCIsImZpbHRlciIsIm90aGVyIiwiZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4iLCJmdW4iLCJ4QXhpcyIsImxlbmd0aCIsIm1pZCIsImZsb29yIiwic29ydGVkIiwic29ydCIsImxlZnQiLCJzbGljZSIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJNQVhfVkVMT0NJVFkiLCJNQVhfQUNDRUxFUkFUSU9OIiwibmVpZ2hib3VycyIsImNvbGxpc2lvbiIsInNwZWVkIiwicHJlZmVycmVkVmVsb2NpdHkiLCJnZXRQcmVmZXJyZWRWZWxvY2l0eSIsInNhZmUiLCJWTyIsImdldFZlbG9jaXR5T2JzdGFjbGUiLCJpc0luc2lkZSIsImNoZWNrSWZEb25lIiwiaGFsZnBsYW5lMSIsImdldENsb3Nlc3RQb2ludE9uTGluZSIsInZlcnRleCIsInRhbmdlbnQxIiwidmVsb2NpdHlPYnN0YWNsZSIsImhhbGZQbGFuZTIiLCJ0YW5nZW50MiIsIm1pblBlbmFsdHkiLCJJbmZpbml0eSIsImJlc3RWZWxvY2l0eSIsIm1pblRpbWVUb0NvbGxpc2lvbiIsInRpbWVUb0NvbGxpc2lvbiIsImdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uIiwicGVuYWx0eSIsIm1heFNwZWVkIiwiZ29hbERpc3RhbmNlIiwidmVsb2NpdHlCIiwiY2VudHJlIiwiZGlmZiIsImRpc3QiLCJ0aGV0YSIsImFjb3MiLCJwaGkiLCJhdGFuMiIsImFuZ2xlMSIsImFuZ2xlMiIsInZlbG9jaXR5IiwiZGV0ZXJtaW5hbnQxIiwiZGV0ZXJtaW5hbnQyIiwibGluZVBvaW50IiwibGluZURpcmVjdGlvbiIsInBvaW50IiwiZGlzdGFuY2UiLCJvcmlnaW4iLCJkZWx0YSIsImMiLCJkaXNjcmltIiwiY29uZmlnU2VsZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFnZW50VHlwZVNlbGVjdCIsIm51bWJlck9mQWdlbnRzSW5wdXQiLCJmcmFtZXJhdGUiLCJwbGF5QnV0dG9uIiwic3RlcEJ1dHRvbiIsInNpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwiUmVuZGVyZXIyRCIsIkFnZW50VHJlZSIsInBsYXkiLCJyZWNvbmZpZ3VyZSIsImxhc3RSZW5kZXIiLCJsYXN0RlBTIiwiZnJhbWVzIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsInBsYXlQYXVzZSIsImRpc2FibGVkIiwic3RlcCIsInZhbHVlIiwiYWdlbnRUeXBlIiwicGFyc2VJbnQiLCJCYXNpY0FnZW50IiwiU3RvcEFnZW50IiwiVk9BZ2VudCIsIkVycm9yIiwiQ29uZmlndXJhdGlvbnMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwibWFwcGluZ3MiOiJrSkFJQSxpQkFJRSxXQUFZQSxFQUFxQkMsR0FDL0JDLEtBQUtDLFVBQVlILEVBQ2pCRSxLQUFLRSxRQUFVSCxFQXlCbkIsT0F0QkUsWUFBQUksS0FBQSxTQUFLQyxHQUNISixLQUFLRSxRQUFRQyxLQUFLQyxFQUFPTCxTQUczQixZQUFBTSxPQUFBLFNBQU9DLEdBQVAsV0FFRU4sS0FBS0UsUUFBUUssU0FBUSxTQUFDQyxHQUNwQkEsRUFBTUgsT0FDSkMsRUFDQSxFQUFLSixRQUFRTyxnQ0FBZ0NELEVBSnJDLFNBUVpSLEtBQUtFLFFBQVFDLEtBQUtILEtBQUtFLFFBQVFRLFdBR2pDLFlBQUFDLEtBQUEsc0JBQ0VYLEtBQUtDLFVBQVVXLFFBQ2ZaLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEIsRUFBS1AsVUFBVVksVUFBVUwsT0FH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UUFBU0YsR0FHL0NHLEVBQU9ELFFDakJmLE9DRkFGLEVBQW9CSyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWE4sRUFBb0JRLEVBQUVGLEVBQVlDLEtBQVNQLEVBQW9CUSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NqRmQsRUFBb0JrQixFQUFLaEIsSUFDSCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ1gsT0FBT0MsZUFBZVIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRTdCLE1BQU8sV0FFN0RrQixPQUFPQyxlQUFlUixFQUFTLGFBQWMsQ0FBRVgsT0FBTyxLSEZoRFMsRUFBb0IsTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gIF9yZW5kZXJlcjogSVJlbmRlcmVyO1xyXG4gIF9hZ2VudHM6IElBZ2VudENvbGxlY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIsIGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICB9XHJcblxyXG4gIGluaXQoY29uZmlnOiBJQ29uZmlndXJhdGlvbikge1xyXG4gICAgdGhpcy5fYWdlbnRzLmluaXQoY29uZmlnLmFnZW50cyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpIHtcclxuICAgIGxldCByYW5nZSA9IDMwMDtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICBhZ2VudC51cGRhdGUoXHJcbiAgICAgICAgZGVsdGFULFxyXG4gICAgICAgIHRoaXMuX2FnZW50cy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2FnZW50cy5pbml0KHRoaXMuX2FnZW50cy5nZXRBbGwoKSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnQoYWdlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICBpZiAoYWdlbnQuZ2V0SXNEb25lKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwRkYwMFwiO1xyXG4gICAgfSBlbHNlIGlmIChhZ2VudC5nZXRJc1N0dWNrKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0ZGMDAwMFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBsZXQgbWFnbml0dWRlID0gZGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKG1hZ25pdHVkZSAhPT0gMCkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvc2l0aW9uLmFkZChcclxuICAgICAgICBkaXJlY3Rpb24uZGl2aWRlKG1hZ25pdHVkZSkubXVsdGlwbHkoYWdlbnQuUmFkaXVzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhuZXdQb3MueCwgbmV3UG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBWZWN0b3IyZiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gIH1cclxuXHJcbiAgY29weSh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodi54LCB2LnkpO1xyXG4gIH1cclxuXHJcbiAgYWRkKHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBzdWJ0cmFjdCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG4gIH1cclxuXHJcbiAgbXVsdGlwbHkoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuICB9XHJcblxyXG4gIGRpdmlkZShzOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAvIHMsIHRoaXMueSAvIHMpO1xyXG4gIH1cclxuXHJcbiAgZG90KHY6IFZlY3RvcjJmKSB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlU3FyZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDI7XHJcbiAgfVxyXG5cclxuICBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5tYWduaXR1ZGVTcXJkKCkpO1xyXG4gIH1cclxuXHJcbiAgbm9ybWFsaXNlKCk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBtID0gdGhpcy5tYWduaXR1ZGUoKTtcclxuICAgIHJldHVybiBtID09IDAgPyBuZXcgVmVjdG9yMmYoMCwgMCkgOiB0aGlzLmRpdmlkZShtKTtcclxuICB9XHJcblxyXG4gIHNhbXBsZShtYXhSYWRpdXM6IG51bWJlcikge1xyXG4gICAgLy8gVW5pZm9ybWx5IHNhbXBsZSB0aGUgY2lyY2xlIGNlbnRyZWQgYXQgdGhpcyBwb2ludCB3aXRoIHJhZGl1cyBtYXhSYWRpdXNcclxuICAgIGxldCByYWRpdXMgPSBNYXRoLnNxcnQoTWF0aC5yYW5kb20oKSkgKiBtYXhSYWRpdXM7XHJcbiAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKFxyXG4gICAgICB0aGlzLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgIHRoaXMueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIC8vIFRoaXMgYWdlbnQgY2Fubm90IGdldCBzdHVja1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGdvYWxEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKFxyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbi5tdWx0aXBseSgoZGVsdGFUICogNjApIC8gMTAwMClcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3BBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgcmFkaXVzOiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMuSWQgPSBpZDtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gc3RhcnRQb3NpdGlvbjtcclxuICAgIHRoaXMuX2dvYWxQb3NpdGlvbiA9IGdvYWxQb3NpdGlvbjtcclxuICAgIHRoaXMuUmFkaXVzID0gcmFkaXVzO1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1N0dWNrO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5faXNEb25lKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gKGRlbHRhVCAqIDYwKSAvIDEwMDApIHtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fZGlyZWN0aW9uLm11bHRpcGx5KDIwKSk7XHJcblxyXG4gICAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICAgIGlmIChhZ2VudC5JZCAhPSB0aGlzLklkICYmIHRoaXMuY29sbGlkZXMoYWdlbnQsIGhlYWRpbmcpKSB7XHJcbiAgICAgICAgICB0aGlzLl9pc1N0dWNrID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLl9pc1N0dWNrKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9nb2FsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlcyhhZ2VudDogSUFnZW50LCBwb3NpdGlvbjogVmVjdG9yMmYpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3QocG9zaXRpb24pLm1hZ25pdHVkZSgpIDxcclxuICAgICAgYWdlbnQuUmFkaXVzICsgdGhpcy5SYWRpdXNcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb25zID0gdGhpcy5wb2lzc29uRGlza1NhbXBsZSh3aWR0aCwgaGVpZ2h0LCBuLCA1MCk7XHJcbiAgICBsZXQgZ29hbFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbnNbaV0sXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGxldCBzdGFydFBvc2l0aW9ucyA9IHRoaXMucG9pc3NvbkRpc2tTYW1wbGUod2lkdGgsIGhlaWdodCwgbiwgNTApO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHN0YXJ0UG9zaXRpb25zW2ldLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZigoKGkgKyAxKSAvIChuICsgMSkpICogd2lkdGgsIGhlaWdodCAvIDIpLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBQb3NpdGlvbiBvbiByYWRpdXMgb2YgY2lyY2xlIHRvIG9wcG9zaXRlIHBvaW50XHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3QgY2VudHJlWCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGNlbnRyZVkgPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzID0gaGVpZ2h0IC8gMiAtIDI1O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuZ2xlID0gKDIgKiBNYXRoLlBJICogaSkgLyBuO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoXHJcbiAgICAgICAgICBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgR3JpZFRvR3JpZChcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gVHdvIG9wcG9zaW5nIGdyaWRzIG9mIGFnZW50cyBwYXNzaW5nIHRocm91Z2ggZWFjaG90aGVyXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgbGV0IHJvd3MgPSA0O1xyXG4gICAgbGV0IGNvbHMgPSBNYXRoLmNlaWwobiAvICgyICogcm93cykpO1xyXG4gICAgbGV0IHNwYWNpbmcgPSA4MDtcclxuICAgIGxldCBsZWZ0ID0gNTA7XHJcbiAgICBsZXQgcmlnaHQgPSB3aWR0aCAtIGxlZnQgLSBzcGFjaW5nICogKGNvbHMgLSAxKTtcclxuICAgIGxldCB0b3AgPSBoZWlnaHQgLyAyIC0gKHNwYWNpbmcgLyAyKSAqIChyb3dzIC0gMSk7XHJcblxyXG4gICAgbGV0IGlkID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93czsgaisrKSB7XHJcbiAgICAgICAgbGV0IGEgPSBuZXcgVmVjdG9yMmYobGVmdCArIHNwYWNpbmcgKiBpLCB0b3AgKyBzcGFjaW5nICogaik7XHJcbiAgICAgICAgbGV0IGIgPSBuZXcgVmVjdG9yMmYocmlnaHQgKyBzcGFjaW5nICogaSwgdG9wICsgc3BhY2luZyAqIGopO1xyXG5cclxuICAgICAgICAvLyBMZWZ0IGdyaWRcclxuICAgICAgICBhZ2VudHMucHVzaChhZ2VudENvbnN0cnVjdG9yKGlkLCBhLCBiLCAyMCkpO1xyXG4gICAgICAgIGlkKys7XHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmlnaHQgZ3JpZFxyXG4gICAgICAgIGFnZW50cy5wdXNoKGFnZW50Q29uc3RydWN0b3IoaWQsIGIsIGEsIDIwKSk7XHJcbiAgICAgICAgaWQrKztcclxuXHJcbiAgICAgICAgaWYgKGlkID49IG4pIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaWQgPj0gbikge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHBvaXNzb25EaXNrU2FtcGxlKFxyXG4gICAgeFJhbmdlOiBudW1iZXIsXHJcbiAgICB5UmFuZ2U6IG51bWJlcixcclxuICAgIG46IG51bWJlcixcclxuICAgIHRocmVzaG9sZDogbnVtYmVyXHJcbiAgKTogVmVjdG9yMmZbXSB7XHJcbiAgICBsZXQgc2FtcGxlczogVmVjdG9yMmZbXSA9IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGxldCByZXNhbXBsZSA9IHRydWU7XHJcbiAgICAgIGxldCBwb3M6IFZlY3RvcjJmO1xyXG5cclxuICAgICAgd2hpbGUgKHJlc2FtcGxlKSB7XHJcbiAgICAgICAgcmVzYW1wbGUgPSBmYWxzZTtcclxuICAgICAgICBwb3MgPSBuZXcgVmVjdG9yMmYoeFJhbmdlICogTWF0aC5yYW5kb20oKSwgeVJhbmdlICogTWF0aC5yYW5kb20oKSk7XHJcblxyXG4gICAgICAgIHNhbXBsZXMuZm9yRWFjaCgoc2FtcGxlKSA9PiB7XHJcbiAgICAgICAgICBpZiAocG9zLnN1YnRyYWN0KHNhbXBsZSkubWFnbml0dWRlU3FyZCgpIDwgdGhyZXNob2xkICoqIDIpIHtcclxuICAgICAgICAgICAgcmVzYW1wbGUgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzYW1wbGVzLnB1c2gocG9zKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2FtcGxlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5pbnRlcmZhY2UgTm9kZSB7XHJcbiAgYWdlbnQ6IElBZ2VudDtcclxuICBsZWZ0OiBOb2RlO1xyXG4gIHJpZ2h0OiBOb2RlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWdlbnRUcmVlIGltcGxlbWVudHMgSUFnZW50Q29sbGVjdGlvbiB7XHJcbiAgcHJpdmF0ZSBfYWdlbnRzOiBJQWdlbnRbXTtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICAgIHRoaXMuX3Jvb3QgPSB0aGlzLmNvbnN0cnVjdFRyZWUodGhpcy5fYWdlbnRzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldEFsbCgpOiBJQWdlbnRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IG1pblggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggLSByYW5nZTtcclxuICAgIGxldCBtaW5ZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWF4WCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCArIHJhbmdlO1xyXG4gICAgbGV0IG1heFkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgKyByYW5nZTtcclxuXHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMucmFuZ2VTZWFyY2godGhpcy5fcm9vdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoKG90aGVyKSA9PiBvdGhlci5JZCAhPT0gYWdlbnQuSWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4oYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoXHJcbiAgICAgIChvdGhlcikgPT5cclxuICAgICAgICBhZ2VudC5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KG90aGVyLmdldFBvc2l0aW9uKCkpLm1hZ25pdHVkZVNxcmQoKSA8PVxyXG4gICAgICAgIHJhbmdlICoqIDJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGZ1bjogKGFnZW50OiBJQWdlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKGZ1bik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdFRyZWUoYWdlbnRzOiBJQWdlbnRbXSwgeEF4aXM6IGJvb2xlYW4pOiBOb2RlIHtcclxuICAgIGlmIChhZ2VudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtaWQgPSBNYXRoLmZsb29yKGFnZW50cy5sZW5ndGggLyAyKTtcclxuXHJcbiAgICBsZXQgc29ydGVkID0geEF4aXNcclxuICAgICAgPyBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnggLSBiLmdldFBvc2l0aW9uKCkueClcclxuICAgICAgOiBhZ2VudHMuc29ydCgoYSwgYikgPT4gYS5nZXRQb3NpdGlvbigpLnkgLSBiLmdldFBvc2l0aW9uKCkueSk7XHJcblxyXG4gICAgbGV0IGxlZnQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoc29ydGVkLnNsaWNlKDAsIG1pZCksICF4QXhpcyk7XHJcbiAgICBsZXQgcmlnaHQgPSB0aGlzLmNvbnN0cnVjdFRyZWUoXHJcbiAgICAgIHNvcnRlZC5zbGljZShtaWQgKyAxLCBhZ2VudHMubGVuZ3RoKSxcclxuICAgICAgIXhBeGlzXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB7IGFnZW50OiBhZ2VudHNbbWlkXSwgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJhbmdlU2VhcmNoKFxyXG4gICAgcm9vdDogTm9kZSxcclxuICAgIG1pblg6IG51bWJlcixcclxuICAgIG1pblk6IG51bWJlcixcclxuICAgIG1heFg6IG51bWJlcixcclxuICAgIG1heFk6IG51bWJlcixcclxuICAgIHhBeGlzOiBib29sZWFuXHJcbiAgKTogSUFnZW50W10ge1xyXG4gICAgaWYgKHJvb3QgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlczogSUFnZW50W10gPSBbXTtcclxuICAgIGlmICh4QXhpcykge1xyXG4gICAgICAvLyBJZiB4IDw9IG1heFggbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA8PSBtYXhYKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHggPj0gbWluWCBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIHkgPD0gbWF4WSBuZWVkIHRvIGNoZWNrIHJpZ2h0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55IDw9IG1heFkpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LnJpZ2h0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgeSA+PSBtaW5ZIG5lZWQgdG8gY2hlY2sgbGVmdCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5sZWZ0LCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCAheEF4aXMpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBhZ2VudCBpcyBpbiByYW5nZSByYW5nZSBhZGQgdG8gdGhlIHJlc3VsdFxyXG4gICAgaWYgKFxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueCA+PSBtaW5YICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS55ID49IG1pblkgJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZXHJcbiAgICApIHtcclxuICAgICAgcmVzLnB1c2gocm9vdC5hZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmludGVyZmFjZSBWZWxvY2l0eU9ic3RhY2xlIHtcclxuICAvLyBWZWxvY2l0eSBvYmplY3QgZGVmaW5lZCBieSBhIHBvaW50IGFuZCB0d28gZGlyZWN0aW9uIHZlY3RvcnNcclxuICB2ZXJ0ZXg6IFZlY3RvcjJmO1xyXG4gIHRhbmdlbnQxOiBWZWN0b3IyZjtcclxuICB0YW5nZW50MjogVmVjdG9yMmY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWT0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBSYWRpdXM6IG51bWJlcjtcclxuICBJZDogbnVtYmVyO1xyXG5cclxuICBNQVhfVkVMT0NJVFkgPSAxLjA7XHJcbiAgTUFYX0FDQ0VMRVJBVElPTiA9IDAuNTtcclxuXHJcbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBWZWN0b3IyZjtcclxuXHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX2lzU3R1Y2s6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNTdHVjaztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgbmVpZ2hib3VyczogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICAgIGxldCBzcGVlZCA9IDAuNTtcclxuICAgIGxldCBwcmVmZXJyZWRWZWxvY2l0eSA9IHRoaXMuZ2V0UHJlZmVycmVkVmVsb2NpdHkoc3BlZWQpO1xyXG5cclxuICAgIGxldCBzYWZlID0gdHJ1ZTtcclxuICAgIGxldCBjb2xsaXNpb247XHJcbiAgICBsZXQgYWdlbnQ7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IFZPID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICBpZiAoVk8gPT0gbnVsbCB8fCB0aGlzLmlzSW5zaWRlKHByZWZlcnJlZFZlbG9jaXR5LCBWTykpIHtcclxuICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgY29sbGlzaW9uID0gVk87XHJcbiAgICAgICAgYWdlbnQgPSBpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgcHJlZmVycmVkIHZlbG9jaXR5IGlzIHNhZmUsIGdvIGluIHRoYXQgZGlyZWN0aW9uXHJcbiAgICBpZiAoc2FmZSkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24gPSBwcmVmZXJyZWRWZWxvY2l0eTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQocHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29sbGlzaW9uICE9IG51bGwpIHtcclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBmaXJzdCBoYWxmLXBsYW5lXHJcbiAgICAgIGxldCBoYWxmcGxhbmUxID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udGFuZ2VudDEsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYWxmcGxhbmUxLm1hZ25pdHVkZSgpIDw9IHNwZWVkKSB7XHJcbiAgICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlPYnN0YWNsZSA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIHZlbG9jaXR5T2JzdGFjbGUgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgIHRoaXMuaXNJbnNpZGUoaGFsZnBsYW5lMSwgdmVsb2NpdHlPYnN0YWNsZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gaGFsZnBsYW5lMTtcclxuICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhhbGZwbGFuZTEpO1xyXG4gICAgICAgICAgdGhpcy5jaGVja0lmRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBzZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgICBsZXQgaGFsZlBsYW5lMiA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQyLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFsZnBsYW5lMS5tYWduaXR1ZGUoKSA8PSBzcGVlZCkge1xyXG4gICAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgIT0gYWdlbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5T2JzdGFjbGUgPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB2ZWxvY2l0eU9ic3RhY2xlID09IG51bGwgfHxcclxuICAgICAgICAgICAgICB0aGlzLmlzSW5zaWRlKGhhbGZQbGFuZTIsIHZlbG9jaXR5T2JzdGFjbGUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGhhbGZQbGFuZTI7XHJcbiAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChoYWxmUGxhbmUyKTtcclxuICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbHNlLCBzYW1wbGUgcmFuZG9tIHZlbG9jaXRpZXMgYW5kIHNlbGVjdCB0aGUgb25lIHdpdGggdGhlIGxlYXN0IHBlbmFsdHlcclxuICAgIGxldCBzYW1wbGVzID0gMTAwOyAvLyBudW1iZXIgb2YgdmVsb2NpdGllcyB0byB0cnlcclxuICAgIGxldCB3ID0gMzAwOyAvLyBwYXJhbWV0ZXIgZm9yIHBlbmFsdHlcclxuICAgIGxldCBtaW5QZW5hbHR5ID0gSW5maW5pdHk7XHJcbiAgICBsZXQgYmVzdFZlbG9jaXR5ID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XHJcbiAgICAgIC8vIFNhbXBsZSB2ZWxvY2l0eSBmcm9tIGVudGlyZSBhbGxvd2VkIHZlbG9jaXR5IHNwYWNlXHJcbiAgICAgIGxldCBzYW1wbGUgPSBuZXcgVmVjdG9yMmYoMCwgMCkuc2FtcGxlKHNwZWVkKTtcclxuICAgICAgbGV0IG1pblRpbWVUb0NvbGxpc2lvbiA9IEluZmluaXR5O1xyXG5cclxuICAgICAgLy8gRmluZCB0aW1lIHRvIGZpcnN0IGNvbGxpc2lvblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBsZXQgYiA9IG5laWdoYm91cnNbal07XHJcbiAgICAgICAgbGV0IFZPID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKGIpO1xyXG4gICAgICAgIGlmIChWTyA9PSBudWxsIHx8IHRoaXMuaXNJbnNpZGUoc2FtcGxlLCBWTykpIHtcclxuICAgICAgICAgIGxldCB0aW1lVG9Db2xsaXNpb24gPSB0aGlzLmdldEZpcnN0UmF5Q2lyY2xlSW50ZXJzZWN0aW9uKFxyXG4gICAgICAgICAgICBiLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIHRoaXMuUmFkaXVzICsgYi5SYWRpdXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLFxyXG4gICAgICAgICAgICBzYW1wbGVcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgaWYgKHRpbWVUb0NvbGxpc2lvbiA8IG1pblRpbWVUb0NvbGxpc2lvbikge1xyXG4gICAgICAgICAgICBtaW5UaW1lVG9Db2xsaXNpb24gPSB0aW1lVG9Db2xsaXNpb247XHJcbiAgICAgICAgICAgIGlmIChtaW5UaW1lVG9Db2xsaXNpb24gPT0gMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY2hlY2tJZkRvbmUoKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBwZW5hbHR5XHJcbiAgICAgIGxldCBwZW5hbHR5ID1cclxuICAgICAgICB3IC8gbWluVGltZVRvQ29sbGlzaW9uICsgcHJlZmVycmVkVmVsb2NpdHkuc3VidHJhY3Qoc2FtcGxlKS5tYWduaXR1ZGUoKTsgLy8gVFMgY29ycmVjdGx5IGhhbmRsZXMgZGl2aWRlIGJ5IHplcm8gb3IgaW5maW5pdHlcclxuICAgICAgaWYgKHBlbmFsdHkgPCBtaW5QZW5hbHR5KSB7XHJcbiAgICAgICAgbWluUGVuYWx0eSA9IHBlbmFsdHk7XHJcbiAgICAgICAgYmVzdFZlbG9jaXR5ID0gc2FtcGxlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJlc3RWZWxvY2l0eS5tYWduaXR1ZGUoKSA9PSAwKSB7XHJcbiAgICAgIHRoaXMuX2lzU3R1Y2sgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IGJlc3RWZWxvY2l0eTtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGJlc3RWZWxvY2l0eSk7XHJcbiAgICB0aGlzLmNoZWNrSWZEb25lKCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFByZWZlcnJlZFZlbG9jaXR5KG1heFNwZWVkOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICBsZXQgZ29hbERpcmVjdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gZ29hbERpcmVjdGlvbi5tYWduaXR1ZGUoKTtcclxuXHJcbiAgICBpZiAoZ29hbERpc3RhbmNlID4gbWF4U3BlZWQpIHtcclxuICAgICAgcmV0dXJuIGdvYWxEaXJlY3Rpb24uZGl2aWRlKGdvYWxEaXN0YW5jZSAvIG1heFNwZWVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnb2FsRGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRWZWxvY2l0eU9ic3RhY2xlKGI6IElBZ2VudCk6IFZlbG9jaXR5T2JzdGFjbGUgfCBudWxsIHtcclxuICAgIGxldCB2ZWxvY2l0eUIgPSBiLmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIC8vIFRyYW5zbGF0ZSBvcmlnaW4gdG8gdGhpcyBhZ2VudCdzIHBvc2l0aW9uXHJcbiAgICBsZXQgcG9zaXRpb25CID0gYi5nZXRQb3NpdGlvbigpLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuXHJcbiAgICAvLyBGaW5kIE1pbmtvd3NraSBzdW0gb2YgYWdlbnRzXHJcbiAgICBsZXQgY2VudHJlID0gcG9zaXRpb25CLmFkZCh2ZWxvY2l0eUIpO1xyXG4gICAgbGV0IHJhZGl1cyA9IGIuUmFkaXVzICsgdGhpcy5SYWRpdXM7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGFuZ2xlc1xyXG4gICAgbGV0IGRpZmYgPSB2ZWxvY2l0eUIuc3VidHJhY3QoY2VudHJlKTtcclxuICAgIGxldCBkaXN0ID0gZGlmZi5tYWduaXR1ZGUoKTtcclxuICAgIGlmIChkaXN0IDwgcmFkaXVzKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aGV0YSA9IE1hdGguYWNvcyhyYWRpdXMgLyBkaXN0KTtcclxuICAgIGxldCBwaGkgPSBNYXRoLmF0YW4yKGRpZmYueSwgZGlmZi54KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGFuZ2VudCB2ZWN0b3JzXHJcbiAgICBsZXQgYW5nbGUxID0gcGhpICsgdGhldGE7XHJcbiAgICBsZXQgdGFuZ2VudDEgPSBuZXcgVmVjdG9yMmYoXHJcbiAgICAgIGNlbnRyZS54ICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUxKSxcclxuICAgICAgY2VudHJlLnkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZTEpXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBhbmdsZTIgPSBwaGkgLSB0aGV0YTtcclxuICAgIGxldCB0YW5nZW50MiA9IG5ldyBWZWN0b3IyZihcclxuICAgICAgY2VudHJlLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZTIpLFxyXG4gICAgICBjZW50cmUueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHZlbG9jaXR5IG9ic3RhY2xlXHJcbiAgICByZXR1cm4geyB2ZXJ0ZXg6IHZlbG9jaXR5QiwgdGFuZ2VudDE6IHRhbmdlbnQxLCB0YW5nZW50MjogdGFuZ2VudDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUodmVsb2NpdHk6IFZlY3RvcjJmLCBWTzogVmVsb2NpdHlPYnN0YWNsZSk6IGJvb2xlYW4ge1xyXG4gICAgLy8gRmlyc3QgaGFsZi1wbGFuZVxyXG4gICAgbGV0IGRldGVybWluYW50MSA9XHJcbiAgICAgIChWTy50YW5nZW50MS54IC0gVk8udmVydGV4LngpICogKHZlbG9jaXR5LnkgLSBWTy52ZXJ0ZXgueSkgLVxyXG4gICAgICAoVk8udGFuZ2VudDEueSAtIFZPLnZlcnRleC55KSAqICh2ZWxvY2l0eS54IC0gVk8udmVydGV4LngpO1xyXG5cclxuICAgIC8vIFNlY29uZCBoYWxmLXBsYW5lXHJcbiAgICBsZXQgZGV0ZXJtaW5hbnQyID1cclxuICAgICAgKFZPLnRhbmdlbnQyLnggLSBWTy52ZXJ0ZXgueCkgKiAodmVsb2NpdHkueSAtIFZPLnZlcnRleC55KSAtXHJcbiAgICAgIChWTy50YW5nZW50Mi55IC0gVk8udmVydGV4LnkpICogKHZlbG9jaXR5LnggLSBWTy52ZXJ0ZXgueCk7XHJcblxyXG4gICAgcmV0dXJuIGRldGVybWluYW50MSA+IDAgJiYgZGV0ZXJtaW5hbnQyIDwgMDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgbGluZVBvaW50OiBWZWN0b3IyZixcclxuICAgIGxpbmVEaXJlY3Rpb246IFZlY3RvcjJmLFxyXG4gICAgcG9pbnQ6IFZlY3RvcjJmXHJcbiAgKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IGRpcmVjdGlvbiA9IGxpbmVEaXJlY3Rpb24ubm9ybWFsaXNlKCk7XHJcbiAgICBsZXQgdmVjdG9yID0gcG9pbnQuc3VidHJhY3QobGluZVBvaW50KTtcclxuICAgIGxldCBkaXN0YW5jZSA9IHZlY3Rvci5kb3QoZGlyZWN0aW9uKTtcclxuICAgIHJldHVybiBsaW5lUG9pbnQuYWRkKGRpcmVjdGlvbi5tdWx0aXBseShkaXN0YW5jZSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGaXJzdFJheUNpcmNsZUludGVyc2VjdGlvbihcclxuICAgIGNlbnRyZTogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlcixcclxuICAgIG9yaWdpbjogVmVjdG9yMmYsXHJcbiAgICBkaXJlY3Rpb246IFZlY3RvcjJmXHJcbiAgKTogbnVtYmVyIHtcclxuICAgIGxldCBkZWx0YSA9IG9yaWdpbi5zdWJ0cmFjdChjZW50cmUpO1xyXG5cclxuICAgIGxldCBhID0gZGlyZWN0aW9uLmRvdChkaXJlY3Rpb24pO1xyXG4gICAgbGV0IGIgPSAyICogZGlyZWN0aW9uLmRvdChkZWx0YSk7XHJcbiAgICBsZXQgYyA9IGRlbHRhLmRvdChkZWx0YSkgLSByYWRpdXMgKiogMjtcclxuXHJcbiAgICBsZXQgZGlzY3JpbSA9IGIgKiogMiAtIDQgKiBhICogYztcclxuXHJcbiAgICBpZiAoZGlzY3JpbSA8IDApIHtcclxuICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgIHJldHVybiBJbmZpbml0eTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZGlzdGFuY2UgPSAoKC1iIC0gTWF0aC5zcXJ0KGRpc2NyaW0pKSAvIDIpICogYTtcclxuXHJcbiAgICBpZiAoZGlzdGFuY2UgPCAwKSB7XHJcbiAgICAgIC8vIEludGVyc2VjdGlvbiBiZWhpbmRcclxuICAgICAgcmV0dXJuIEluZmluaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkaXN0YW5jZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hlY2tJZkRvbmUoKSB7XHJcbiAgICBsZXQgZmluaXNoVGhyZXNob2xkID0gMS4wO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5fcG9zaXRpb24uc3VidHJhY3QodGhpcy5fZ29hbFBvc2l0aW9uKS5tYWduaXR1ZGVTcXJkKCkgPFxyXG4gICAgICBmaW5pc2hUaHJlc2hvbGRcclxuICAgICkge1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTaW11bGF0aW9uIH0gZnJvbSBcIi4vU2ltdWxhdGlvblwiO1xyXG5pbXBvcnQgeyBSZW5kZXJlcjJEIH0gZnJvbSBcIi4vUmVuZGVyZXIyRFwiO1xyXG5cclxuaW1wb3J0IHsgQmFzaWNBZ2VudCB9IGZyb20gXCIuL0Jhc2ljQWdlbnRcIjtcclxuaW1wb3J0IHsgU3RvcEFnZW50IH0gZnJvbSBcIi4vU3RvcEFnZW50XCI7XHJcbmltcG9ydCB7IENvbmZpZ3VyYXRpb25zIH0gZnJvbSBcIi4vQ29uZmlndXJhdGlvbnNcIjtcclxuaW1wb3J0IHsgQWdlbnRUcmVlIH0gZnJvbSBcIi4vQWdlbnRUcmVlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuaW1wb3J0IHsgVk9BZ2VudCB9IGZyb20gXCIuL1ZPQWdlbnRcIjtcclxuXHJcbmNvbnN0IGNvbmZpZ1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlnXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBhZ2VudFR5cGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImFnZW50VHlwZVwiXHJcbikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbmNvbnN0IG51bWJlck9mQWdlbnRzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcIm51bWJlck9mQWdlbnRzXCJcclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmNvbnN0IGZyYW1lcmF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnJhbWVyYXRlXCIpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG5jb25zdCBwbGF5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5QnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5jb25zdCBzdGVwQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGVwQnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuY29uc3QgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIyRChjYW52YXMpO1xyXG5jb25zdCBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24ocmVuZGVyZXIsIG5ldyBBZ2VudFRyZWUoKSk7XHJcbnZhciBwbGF5ID0gZmFsc2U7XHJcblxyXG4vLyBpbml0aWFsaXNlIHNpbXVsYXRpb24gYW5kIGJlZ2luIHVwZGF0ZS9yZW5kZXIgbG9vcFxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcclxuICB0aGlzLnJlY29uZmlndXJlKCk7XHJcblxyXG4gIGxldCBsYXN0UmVuZGVyID0gMDtcclxuICBsZXQgbGFzdEZQUyA9IDA7XHJcbiAgbGV0IGZyYW1lcyA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIGxvb3AodGltZXN0YW1wOiBudW1iZXIpIHtcclxuICAgIGxldCBkZWx0YVQgPSB0aW1lc3RhbXAgLSBsYXN0UmVuZGVyO1xyXG4gICAgbGFzdFJlbmRlciA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICAvLyB1cGRhdGVcclxuICAgIGlmIChwbGF5KSB7XHJcbiAgICAgIHNpbXVsYXRpb24udXBkYXRlKGRlbHRhVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyXHJcbiAgICBzaW11bGF0aW9uLmRyYXcoKTtcclxuICAgIGZyYW1lcysrO1xyXG5cclxuICAgIC8vIHJlY2FsY3VsYXRlIGZyYW1lcmF0ZSBldmVyeSAyNTBtc1xyXG4gICAgaWYgKHRpbWVzdGFtcCAtIGxhc3RGUFMgPj0gMjUwKSB7XHJcbiAgICAgIGZyYW1lcmF0ZS50ZXh0Q29udGVudCA9IGBGUFM6ICR7KFxyXG4gICAgICAgICgxMDAwICogZnJhbWVzKSAvXHJcbiAgICAgICAgKHRpbWVzdGFtcCAtIGxhc3RGUFMpXHJcbiAgICAgICkudG9GaXhlZCgxKX1gO1xyXG5cclxuICAgICAgZnJhbWVzID0gMDtcclxuICAgICAgbGFzdEZQUyA9IHRpbWVzdGFtcDtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG4gIH1cclxuXHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxufVxyXG5cclxuLy8gdG9nZ2xlIHBsYXkvcGF1c2VcclxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQYXVzZSgpIHtcclxuICBwbGF5ID0gIXBsYXk7XHJcblxyXG4gIGlmIChwbGF5KSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQYXVzZVwiO1xyXG4gICAgc3RlcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHBsYXlCdXR0b24udGV4dENvbnRlbnQgPSBcIlBsYXlcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHN0ZXAgc2ltdWxhdGlvbiBieSAxIGZyYW1lXHJcbmV4cG9ydCBmdW5jdGlvbiBzdGVwKCkge1xyXG4gIHNpbXVsYXRpb24udXBkYXRlKDEwMDAgLyA2MCk7IC8vIEFzc3VtZXMgNjBGUFNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlY29uZmlndXJlKCkge1xyXG4gIGlmIChwbGF5KSB7XHJcbiAgICB0aGlzLnBsYXlQYXVzZSgpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29uZmlnID0gY29uZmlnU2VsZWN0LnZhbHVlO1xyXG4gIGNvbnN0IGFnZW50VHlwZSA9IGFnZW50VHlwZVNlbGVjdC52YWx1ZTsgLy8gVE9ETzogd2lyZSB0aGlzIGluXHJcbiAgY29uc3QgbiA9IHBhcnNlSW50KG51bWJlck9mQWdlbnRzSW5wdXQudmFsdWUpID8/IDA7XHJcblxyXG4gIC8vIFNlbGVjdCBhZ2VudCBjb25zdHJ1Y3RvclxyXG4gIGxldCBhZ2VudENvbnN0cnVjdG9yO1xyXG4gIHN3aXRjaCAoYWdlbnRUeXBlKSB7XHJcbiAgICBjYXNlIFwiQmFzaWNBZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgQmFzaWNBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiU3RvcEFnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBTdG9wQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIlZPQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFZPQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZ2VudCBub3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTZWxlY3QgY29uZmlndXJhdGlvblxyXG4gIHN3aXRjaCAoY29uZmlnKSB7XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9SYW5kb21cIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9SYW5kb20oXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIlJhbmRvbVRvTGluZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub0xpbmUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcIkNpcmNsZVRvQ2lyY2xlXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkNpcmNsZVRvQ2lyY2xlKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJHcmlkVG9HcmlkXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLkdyaWRUb0dyaWQoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg3NzUpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9