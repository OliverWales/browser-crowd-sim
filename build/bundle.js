var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={775:(t,i,n)=>{n.r(i),n.d(i,{init:()=>P,playPause:()=>v,reconfigure:()=>b,step:()=>w});var e=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(n){n.update(t,i._agents.getNeighboursInRangeRectilinear(n,400))})),this._agents.forEach((function(t){t.finalize()})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),n=t.getDirection();this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI);var e=n.magnitude();if(0!==e){this._context.moveTo(i.x,i.y);var o=i.add(n.divide(e).multiply(t.Radius));this._context.lineTo(o.x,o.y)}this._context.stroke()},t}(),r=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.copy=function(i){return new t(i.x,i.y)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i)},t.prototype.divide=function(i){return new t(this.x/i,this.y/i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.magnitudeSqrd=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSqrd())},t.prototype.normalise=function(){var i=this.magnitude();return 0==i?new t(0,0):this.divide(i)},t.prototype.sample=function(i){var n=Math.sqrt(Math.random())*i,e=2*Math.PI*Math.random();return new t(this.x+n*Math.cos(e),this.y+n*Math.sin(e))},t}(),s=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var n=this._goalPosition.subtract(this._position);n.magnitude()>60*t/1e3?(this._nextDirection=n.normalise(),this._nextPosition=this._position.add(this._nextDirection.multiply(60*t/1e3))):(this._nextPosition=this._goalPosition,this._isDone=!0)}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t}(),a=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var n=this;if(!this._isDone){var e=this._goalPosition.subtract(this._position);if(e.magnitude()>60*t/1e3){this._nextDirection=e.normalise();var o=this._position.add(this._nextDirection.multiply(20));this._isStuck=!1,i.forEach((function(t){t.Id!=n.Id&&n.collides(t,o)&&(n._isStuck=!0)})),this._isStuck||(this._nextPosition=this._position.add(this._nextDirection.multiply(60*t/1e3)))}else this._nextPosition=this._goalPosition,this._isDone=!0}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t.prototype.collides=function(t,i){return t.getPosition().subtract(i).magnitude()<t.Radius+this.Radius},t}(),h=function(){function t(){}return t.RandomToRandom=function(t,i,n,e){for(var o=[],s=0;s<t;s++){var a=e(s,new r(i*Math.random(),n*Math.random()),new r(i*Math.random(),n*Math.random()),20);o.push(a)}return{agents:o}},t.RandomToLine=function(t,i,n,e){for(var o=[],s=0;s<t;s++){var a=e(s,new r(i*Math.random(),n*Math.random()),new r((s+1)/(t+1)*i,n/2),20);o.push(a)}return{agents:o}},t.CircleToCircle=function(t,i,n,e){for(var o=[],s=i/2,a=n/2,h=n/2-25,u=0;u<t;u++){var c=2*Math.PI*u/t,d=e(u,new r(s+h*Math.cos(c),a+h*Math.sin(c)),new r(s+h*Math.cos(c+Math.PI),a+h*Math.sin(c+Math.PI)),20);o.push(d)}return{agents:o}},t}(),u=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var n=t.getPosition().x-i,e=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,n,e,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(n){return t.getPosition().subtract(n.getPosition()).magnitudeSqrd()<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var n=Math.floor(t.length/2),e=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(e.slice(0,n),!i),r=this.constructTree(e.slice(n+1,t.length),!i);return{agent:t[n],left:o,right:r}},t.prototype.rangeSearch=function(t,i,n,e,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=e&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().y>=n&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=n&&t.agent.getPosition().x<=e&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),c=function(){function t(t,i,n,e){this.MAX_VELOCITY=1,this.MAX_ACCELERATION=.5,this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction=new r(0,0),this._nextPosition=this._position,this._nextDirection=new r(0,0),this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){if(this._isStuck=!1,!this._isDone){for(var n,e,o=this.getPreferredVelocity().multiply(.5),s=!0,a=0;a<i.length;a++)if(null==(c=this.getVelocityObstacle(i[a]))||this.isInside(o,c)){s=!1,n=c,e=a;break}if(s)return this._nextDirection=o,this._nextPosition=this._position.add(o),void(this._nextPosition.subtract(this._goalPosition).magnitudeSqrd()<.1&&(this._isDone=!0,this._nextPosition=this._goalPosition,this._nextDirection=new r(0,0)));if(null!=n){var h=this.getClosestPointOnLine(n.vertex,n.t1,o);for(s=!0,a=0;a<i.length;a++)if(a!=e&&(null==(c=this.getVelocityObstacle(i[a]))||this.isInside(h,c))){s=!1;break}if(s)return this._nextDirection=h,void(this._nextPosition=this._position.add(h));var u=this.getClosestPointOnLine(n.vertex,n.t2,o);for(s=!0,a=0;a<i.length;a++){var c;if(a!=e&&(null==(c=this.getVelocityObstacle(i[a]))||this.isInside(u,c))){s=!1;break}}if(s)return this._nextDirection=u,void(this._nextPosition=this._position.add(u))}this._nextDirection=new r(0,0),this._isStuck=!0}},t.prototype.finalize=function(){this._direction=this._nextDirection,this._position=this._nextPosition},t.prototype.getPreferredVelocity=function(){var t=this._goalPosition.subtract(this._position),i=t.magnitude();return i>1?t.divide(i):t},t.prototype.getVelocityObstacle=function(t){var i=t.getDirection(),n=t.Radius+this.Radius,e=t.getPosition().subtract(this.getPosition()).add(i),o=i.subtract(e),s=o.magnitude();if(s<n)return null;var a=Math.acos(n/s),h=Math.atan2(o.y,o.x),u=h+a,c=h-a;return{vertex:i,t1:new r(e.x+n*Math.cos(u),e.y+n*Math.sin(u)),t2:new r(e.x+n*Math.cos(c),e.y+n*Math.sin(c))}},t.prototype.isInside=function(t,i){var n=(i.t1.x-i.vertex.x)*(t.y-i.vertex.y)-(i.t1.y-i.vertex.y)*(t.x-i.vertex.x),e=(i.t2.x-i.vertex.x)*(t.y-i.vertex.y)-(i.t2.y-i.vertex.y)*(t.x-i.vertex.x);return n>0&&e<0},t.prototype.getClosestPointOnLine=function(t,i,n){var e=i.normalise(),o=n.subtract(t).dot(e);return t.add(e.multiply(o))},t}(),d=document.getElementById("config"),p=document.getElementById("agentType"),g=document.getElementById("numberOfAgents"),l=document.getElementById("canvas"),f=document.getElementById("framerate"),_=document.getElementById("playButton"),y=document.getElementById("stepButton"),x=new e(new o(l),new u),m=!1;function P(){this.reconfigure();var t=0,i=0,n=0;window.requestAnimationFrame((function e(o){var r=o-t;t=o,m&&x.update(r),x.draw(),n++,o-i>=250&&(f.textContent="FPS: "+(1e3*n/(o-i)).toFixed(1),n=0,i=o),window.requestAnimationFrame(e)}))}function v(){(m=!m)?(_.textContent="Pause",y.disabled=!0):(_.textContent="Play",y.disabled=!1)}function w(){x.update(1e3/60)}function b(){var t;m&&this.playPause();var i,n=d.value,e=p.value,o=null!==(t=parseInt(g.value))&&void 0!==t?t:0;switch(e){case"BasicAgent":i=function(t,i,n,e){return new s(t,i,n,e)};break;case"StopAgent":i=function(t,i,n,e){return new a(t,i,n,e)};break;case"VOAgent":i=function(t,i,n,e){return new c(t,i,n,e)};break;default:throw new Error("Agent not implemented")}switch(n){case"RandomToRandom":x.init(h.RandomToRandom(o,l.width,l.height,i));break;case"RandomToLine":x.init(h.RandomToLine(o,l.width,l.height,i));break;case"CircleToCircle":x.init(h.CircleToCircle(o,l.width,l.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function n(e){if(i[e])return i[e].exports;var o=i[e]={exports:{}};return t[e](o,o.exports,n),o.exports}return n.d=(t,i)=>{for(var e in i)n.o(i,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(775)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvVmVjdG9yMmYudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1ZPQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyZW5kZXJlciIsImFnZW50cyIsInRoaXMiLCJfcmVuZGVyZXIiLCJfYWdlbnRzIiwiaW5pdCIsImNvbmZpZyIsInVwZGF0ZSIsImRlbHRhVCIsImZvckVhY2giLCJhZ2VudCIsImdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIiLCJmaW5hbGl6ZSIsImdldEFsbCIsImRyYXciLCJjbGVhciIsImRyYXdBZ2VudCIsImNhbnZhcyIsIl9jb250ZXh0IiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZ2V0RGlyZWN0aW9uIiwiYmVnaW5QYXRoIiwiZ2V0SXNEb25lIiwic3Ryb2tlU3R5bGUiLCJnZXRJc1N0dWNrIiwiYXJjIiwieCIsInkiLCJSYWRpdXMiLCJNYXRoIiwiUEkiLCJtYWduaXR1ZGUiLCJtb3ZlVG8iLCJuZXdQb3MiLCJhZGQiLCJkaXZpZGUiLCJtdWx0aXBseSIsImxpbmVUbyIsInN0cm9rZSIsImNvcHkiLCJ2IiwiVmVjdG9yMmYiLCJzdWJ0cmFjdCIsInMiLCJkb3QiLCJtYWduaXR1ZGVTcXJkIiwic3FydCIsIm5vcm1hbGlzZSIsIm0iLCJzYW1wbGUiLCJtYXhSYWRpdXMiLCJyYWRpdXMiLCJyYW5kb20iLCJhbmdsZSIsImNvcyIsInNpbiIsImlkIiwic3RhcnRQb3NpdGlvbiIsImdvYWxQb3NpdGlvbiIsIklkIiwiX3Bvc2l0aW9uIiwiX2dvYWxQb3NpdGlvbiIsIl9kaXJlY3Rpb24iLCJfbmV4dFBvc2l0aW9uIiwiX25leHREaXJlY3Rpb24iLCJfaXNEb25lIiwiZ29hbERpcmVjdGlvbiIsIl9pc1N0dWNrIiwiY29sbGlkZXMiLCJSYW5kb21Ub1JhbmRvbSIsIm4iLCJhZ2VudENvbnN0cnVjdG9yIiwiaSIsInB1c2giLCJSYW5kb21Ub0xpbmUiLCJDaXJjbGVUb0NpcmNsZSIsImNlbnRyZVgiLCJjZW50cmVZIiwiX3Jvb3QiLCJjb25zdHJ1Y3RUcmVlIiwicmFuZ2UiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwicmFuZ2VTZWFyY2giLCJmaWx0ZXIiLCJvdGhlciIsImdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuIiwiZnVuIiwieEF4aXMiLCJsZW5ndGgiLCJtaWQiLCJmbG9vciIsInNvcnRlZCIsInNvcnQiLCJhIiwiYiIsImxlZnQiLCJzbGljZSIsInJpZ2h0Iiwicm9vdCIsInJlcyIsImNvbmNhdCIsIk1BWF9WRUxPQ0lUWSIsIk1BWF9BQ0NFTEVSQVRJT04iLCJuZWlnaGJvdXJzIiwiY29sbGlzaW9uIiwicHJlZmVycmVkVmVsb2NpdHkiLCJnZXRQcmVmZXJyZWRWZWxvY2l0eSIsInNhZmUiLCJWTyIsImdldFZlbG9jaXR5T2JzdGFjbGUiLCJpc0luc2lkZSIsImhwMSIsImdldENsb3Nlc3RQb2ludE9uTGluZSIsInZlcnRleCIsInQxIiwiaHAyIiwidDIiLCJnb2FsRGlzdGFuY2UiLCJ2QiIsIlIiLCJwQyIsImRpZmYiLCJkaXN0IiwidCIsImFjb3MiLCJkIiwiYXRhbjIiLCJhMSIsImEyIiwidmVsb2NpdHkiLCJoYWxmUGxhbmUxIiwiaGFsZlBsYW5lMiIsImxpbmVQb2ludCIsImxpbmVEaXJlY3Rpb24iLCJwb2ludCIsImNvbmZpZ1NlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZ2VudFR5cGVTZWxlY3QiLCJudW1iZXJPZkFnZW50c0lucHV0IiwiZnJhbWVyYXRlIiwicGxheUJ1dHRvbiIsInN0ZXBCdXR0b24iLCJzaW11bGF0aW9uIiwiU2ltdWxhdGlvbiIsIlJlbmRlcmVyMkQiLCJBZ2VudFRyZWUiLCJwbGF5IiwicmVjb25maWd1cmUiLCJsYXN0UmVuZGVyIiwibGFzdEZQUyIsImZyYW1lcyIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJ0aW1lc3RhbXAiLCJ0ZXh0Q29udGVudCIsInRvRml4ZWQiLCJwbGF5UGF1c2UiLCJkaXNhYmxlZCIsInN0ZXAiLCJ2YWx1ZSIsImFnZW50VHlwZSIsInBhcnNlSW50IiwiQmFzaWNBZ2VudCIsIlN0b3BBZ2VudCIsIlZPQWdlbnQiLCJFcnJvciIsIkNvbmZpZ3VyYXRpb25zIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwibWFwcGluZ3MiOiJrSkFJQSxpQkFJRSxXQUFZQSxFQUFxQkMsR0FDL0JDLEtBQUtDLFVBQVlILEVBQ2pCRSxLQUFLRSxRQUFVSCxFQTJCbkIsT0F4QkUsWUFBQUksS0FBQSxTQUFLQyxHQUNISixLQUFLRSxRQUFRQyxLQUFLQyxFQUFPTCxTQUczQixZQUFBTSxPQUFBLFNBQU9DLEdBQVAsV0FFRU4sS0FBS0UsUUFBUUssU0FBUSxTQUFDQyxHQUNwQkEsRUFBTUgsT0FDSkMsRUFDQSxFQUFLSixRQUFRTyxnQ0FBZ0NELEVBSnJDLFNBT1pSLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1FLGNBRVJWLEtBQUtFLFFBQVFDLEtBQUtILEtBQUtFLFFBQVFTLFdBR2pDLFlBQUFDLEtBQUEsc0JBQ0VaLEtBQUtDLFVBQVVZLFFBQ2ZiLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEIsRUFBS1AsVUFBVWEsVUFBVU4sT0FHL0IsRUFqQ0EsR0NEQSxhQUdFLFdBQVlPLEdBQ1ZmLEtBQUtnQixTQUFXRCxFQUFPRSxXQUFXLE1BMEN0QyxPQXZDRSxZQUFBSixNQUFBLFdBQ0ViLEtBQUtnQixTQUFTRSxVQUFZLFFBQzFCbEIsS0FBS2dCLFNBQVNHLFNBQ1osRUFDQSxFQUNBbkIsS0FBS2dCLFNBQVNELE9BQU9LLE1BQ3JCcEIsS0FBS2dCLFNBQVNELE9BQU9NLFNBSXpCLFlBQUFQLFVBQUEsU0FBVU4sR0FDUixJQUFJYyxFQUFXZCxFQUFNZSxjQUNqQkMsRUFBWWhCLEVBQU1pQixlQUV0QnpCLEtBQUtnQixTQUFTVSxZQUdWbEIsRUFBTW1CLFlBQ1IzQixLQUFLZ0IsU0FBU1ksWUFBYyxVQUNuQnBCLEVBQU1xQixh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WSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRU4sRUFBb0JPLEVBQUksQ0FBQ0ssRUFBS0MsSUFBU0wsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDakZiLEVBQW9CaUIsRUFBS2YsSUFDSCxvQkFBWGdCLFFBQTBCQSxPQUFPQyxhQUMxQ1gsT0FBT0MsZUFBZVAsRUFBU2dCLE9BQU9DLFlBQWEsQ0FBRTVCLE1BQU8sV0FFN0RpQixPQUFPQyxlQUFlUCxFQUFTLGFBQWMsQ0FBRVgsT0FBTyxLSEZoRFMsRUFBb0IsTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQWdlbnRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vSUFnZW50Q29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gIF9yZW5kZXJlcjogSVJlbmRlcmVyO1xyXG4gIF9hZ2VudHM6IElBZ2VudENvbGxlY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBJUmVuZGVyZXIsIGFnZW50czogSUFnZW50Q29sbGVjdGlvbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICB9XHJcblxyXG4gIGluaXQoY29uZmlnOiBJQ29uZmlndXJhdGlvbikge1xyXG4gICAgdGhpcy5fYWdlbnRzLmluaXQoY29uZmlnLmFnZW50cyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIpIHtcclxuICAgIGxldCByYW5nZSA9IDQwMDtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICBhZ2VudC51cGRhdGUoXHJcbiAgICAgICAgZGVsdGFULFxyXG4gICAgICAgIHRoaXMuX2FnZW50cy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIGFnZW50LmZpbmFsaXplKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2FnZW50cy5pbml0KHRoaXMuX2FnZW50cy5nZXRBbGwoKSk7XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgIHRoaXMuX2FnZW50cy5mb3JFYWNoKChhZ2VudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3QWdlbnQoYWdlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tIFwiLi9JUmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlcjJEIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcclxuICBfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAwLFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLl9jb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZHJhd0FnZW50KGFnZW50OiBJQWdlbnQpIHtcclxuICAgIGxldCBwb3NpdGlvbiA9IGFnZW50LmdldFBvc2l0aW9uKCk7XHJcbiAgICBsZXQgZGlyZWN0aW9uID0gYWdlbnQuZ2V0RGlyZWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyBkcmF3IGFnZW50XHJcbiAgICBpZiAoYWdlbnQuZ2V0SXNEb25lKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwRkYwMFwiO1xyXG4gICAgfSBlbHNlIGlmIChhZ2VudC5nZXRJc1N0dWNrKCkpIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiI0ZGMDAwMFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYXJjKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGFnZW50LlJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cclxuICAgIC8vIGRyYXcgZGlyZWN0aW9uXHJcbiAgICBsZXQgbWFnbml0dWRlID0gZGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKG1hZ25pdHVkZSAhPT0gMCkge1xyXG4gICAgICB0aGlzLl9jb250ZXh0Lm1vdmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvc2l0aW9uLmFkZChcclxuICAgICAgICBkaXJlY3Rpb24uZGl2aWRlKG1hZ25pdHVkZSkubXVsdGlwbHkoYWdlbnQuUmFkaXVzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhuZXdQb3MueCwgbmV3UG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBWZWN0b3IyZiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gIH1cclxuXHJcbiAgY29weSh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodi54LCB2LnkpO1xyXG4gIH1cclxuXHJcbiAgYWRkKHY6IFZlY3RvcjJmKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSk7XHJcbiAgfVxyXG5cclxuICBzdWJ0cmFjdCh2OiBWZWN0b3IyZik6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMmYodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG4gIH1cclxuXHJcbiAgbXVsdGlwbHkoczogbnVtYmVyKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyZih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuICB9XHJcblxyXG4gIGRpdmlkZShzOiBudW1iZXIpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKHRoaXMueCAvIHMsIHRoaXMueSAvIHMpO1xyXG4gIH1cclxuXHJcbiAgZG90KHY6IFZlY3RvcjJmKSB7XHJcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gIH1cclxuXHJcbiAgbWFnbml0dWRlU3FyZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueCAqKiAyICsgdGhpcy55ICoqIDI7XHJcbiAgfVxyXG5cclxuICBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5tYWduaXR1ZGVTcXJkKCkpO1xyXG4gIH1cclxuXHJcbiAgbm9ybWFsaXNlKCk6IFZlY3RvcjJmIHtcclxuICAgIGxldCBtID0gdGhpcy5tYWduaXR1ZGUoKTtcclxuICAgIHJldHVybiBtID09IDAgPyBuZXcgVmVjdG9yMmYoMCwgMCkgOiB0aGlzLmRpdmlkZShtKTtcclxuICB9XHJcblxyXG4gIHNhbXBsZShtYXhSYWRpdXM6IG51bWJlcikge1xyXG4gICAgLy8gVW5pZm9ybWx5IHNhbXBsZSB0aGUgY2lyY2xlIGNlbnRyZWQgYXQgdGhpcyBwb2ludCB3aXRoIHJhZGl1cyBtYXhSYWRpdXNcclxuICAgIGxldCByYWRpdXMgPSBNYXRoLnNxcnQoTWF0aC5yYW5kb20oKSkgKiBtYXhSYWRpdXM7XHJcbiAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjJmKFxyXG4gICAgICB0aGlzLnggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgIHRoaXMueSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcbmltcG9ydCB7IFZlY3RvcjJmIH0gZnJvbSBcIi4vVmVjdG9yMmZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNpY0FnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX25leHRQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfbmV4dERpcmVjdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XHJcbiAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVDogbnVtYmVyLCBfYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBnb2FsRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXHJcbiAgICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbi5tdWx0aXBseSgoZGVsdGFUICogNjApIC8gMTAwMClcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX2dvYWxQb3NpdGlvbjtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmFsaXplKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0gdGhpcy5fbmV4dERpcmVjdGlvbjtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fbmV4dFBvc2l0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgVmVjdG9yMmYgfSBmcm9tIFwiLi9WZWN0b3IyZlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3BBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9kaXJlY3Rpb246IFZlY3RvcjJmO1xyXG5cclxuICBwcml2YXRlIF9uZXh0UG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX25leHREaXJlY3Rpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2lzRG9uZTogYm9vbGVhbjtcclxuICBwcml2YXRlIF9pc1N0dWNrOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcblxyXG4gICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XHJcbiAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc1N0dWNrID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBnZXREaXJlY3Rpb24oKTogVmVjdG9yMmYge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGdldElzRG9uZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0RvbmU7XHJcbiAgfVxyXG5cclxuICBnZXRJc1N0dWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzU3R1Y2s7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUOiBudW1iZXIsIGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBnb2FsRGlyZWN0aW9uLm1hZ25pdHVkZSgpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiAoZGVsdGFUICogNjApIC8gMTAwMCkge1xyXG4gICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gZ29hbERpcmVjdGlvbi5ub3JtYWxpc2UoKTtcclxuICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fbmV4dERpcmVjdGlvbi5tdWx0aXBseSgyMCkpO1xyXG5cclxuICAgICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgICBpZiAoYWdlbnQuSWQgIT0gdGhpcy5JZCAmJiB0aGlzLmNvbGxpZGVzKGFnZW50LCBoZWFkaW5nKSkge1xyXG4gICAgICAgICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5faXNTdHVjaykge1xyXG4gICAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcclxuICAgICAgICAgIHRoaXMuX25leHREaXJlY3Rpb24ubXVsdGlwbHkoKGRlbHRhVCAqIDYwKSAvIDEwMDApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmluYWxpemUoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB0aGlzLl9uZXh0RGlyZWN0aW9uO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9uZXh0UG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlcyhhZ2VudDogSUFnZW50LCBwb3NpdGlvbjogVmVjdG9yMmYpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGFnZW50LmdldFBvc2l0aW9uKCkuc3VidHJhY3QocG9zaXRpb24pLm1hZ25pdHVkZSgpIDxcclxuICAgICAgYWdlbnQuUmFkaXVzICsgdGhpcy5SYWRpdXNcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWd1cmF0aW9uIHtcclxuICBhZ2VudHM6IElBZ2VudFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbnMge1xyXG4gIHN0YXRpYyBSYW5kb21Ub1JhbmRvbShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKHdpZHRoICogTWF0aC5yYW5kb20oKSwgaGVpZ2h0ICogTWF0aC5yYW5kb20oKSksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKHdpZHRoICogTWF0aC5yYW5kb20oKSwgaGVpZ2h0ICogTWF0aC5yYW5kb20oKSksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgUmFuZG9tVG9MaW5lKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZih3aWR0aCAqIE1hdGgucmFuZG9tKCksIGhlaWdodCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgIG5ldyBWZWN0b3IyZigoKGkgKyAxKSAvIChuICsgMSkpICogd2lkdGgsIGhlaWdodCAvIDIpLFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIENpcmNsZVRvQ2lyY2xlKFxyXG4gICAgbjogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgYWdlbnRDb25zdHJ1Y3RvcjogKFxyXG4gICAgICBpZDogbnVtYmVyLFxyXG4gICAgICBzdGFydFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBQb3NpdGlvbiBvbiByYWRpdXMgb2YgY2lyY2xlIHRvIG9wcG9zaXRlIHBvaW50XHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3QgY2VudHJlWCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGNlbnRyZVkgPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzID0gaGVpZ2h0IC8gMiAtIDI1O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuZ2xlID0gKDIgKiBNYXRoLlBJICogaSkgLyBuO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICBuZXcgVmVjdG9yMmYoXHJcbiAgICAgICAgICBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbmV3IFZlY3RvcjJmKFxyXG4gICAgICAgICAgY2VudHJlWCArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgICBjZW50cmVZICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgMjBcclxuICAgICAgKTtcclxuICAgICAgYWdlbnRzLnB1c2goYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGFnZW50czogYWdlbnRzIH0gYXMgSUNvbmZpZ3VyYXRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5cclxuaW50ZXJmYWNlIE5vZGUge1xyXG4gIGFnZW50OiBJQWdlbnQ7XHJcbiAgbGVmdDogTm9kZTtcclxuICByaWdodDogTm9kZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFnZW50VHJlZSBpbXBsZW1lbnRzIElBZ2VudENvbGxlY3Rpb24ge1xyXG4gIHByaXZhdGUgX2FnZW50czogSUFnZW50W107XHJcbiAgcHJpdmF0ZSBfcm9vdDogTm9kZTtcclxuXHJcbiAgaW5pdChhZ2VudHM6IElBZ2VudFtdKTogdm9pZCB7XHJcbiAgICB0aGlzLl9hZ2VudHMgPSBhZ2VudHM7XHJcbiAgICB0aGlzLl9yb290ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKHRoaXMuX2FnZW50cywgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBbGwoKTogSUFnZW50W10ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FnZW50cztcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBtaW5YID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWluWSA9IGFnZW50LmdldFBvc2l0aW9uKCkueSAtIHJhbmdlO1xyXG4gICAgbGV0IG1heFggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggKyByYW5nZTtcclxuICAgIGxldCBtYXhZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55ICsgcmFuZ2U7XHJcblxyXG4gICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLnJhbmdlU2VhcmNoKHRoaXMuX3Jvb3QsIG1pblgsIG1pblksIG1heFgsIG1heFksIHRydWUpO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZXMuZmlsdGVyKChvdGhlcikgPT4gb3RoZXIuSWQgIT09IGFnZW50LklkKTtcclxuICB9XHJcblxyXG4gIGdldE5laWdoYm91cnNJblJhbmdlRXVjbGlkZWFuKGFnZW50OiBJQWdlbnQsIHJhbmdlOiBudW1iZXIpOiBJQWdlbnRbXSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMuZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudCwgcmFuZ2UpO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZXMuZmlsdGVyKFxyXG4gICAgICAob3RoZXIpID0+XHJcbiAgICAgICAgYWdlbnQuZ2V0UG9zaXRpb24oKS5zdWJ0cmFjdChvdGhlci5nZXRQb3NpdGlvbigpKS5tYWduaXR1ZGVTcXJkKCkgPD1cclxuICAgICAgICByYW5nZSAqKiAyXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZm9yRWFjaChmdW46IChhZ2VudDogSUFnZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaChmdW4pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RUcmVlKGFnZW50czogSUFnZW50W10sIHhBeGlzOiBib29sZWFuKTogTm9kZSB7XHJcbiAgICBpZiAoYWdlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbWlkID0gTWF0aC5mbG9vcihhZ2VudHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgbGV0IHNvcnRlZCA9IHhBeGlzXHJcbiAgICAgID8gYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS54IC0gYi5nZXRQb3NpdGlvbigpLngpXHJcbiAgICAgIDogYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS55IC0gYi5nZXRQb3NpdGlvbigpLnkpO1xyXG5cclxuICAgIGxldCBsZWZ0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKHNvcnRlZC5zbGljZSgwLCBtaWQpLCAheEF4aXMpO1xyXG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKFxyXG4gICAgICBzb3J0ZWQuc2xpY2UobWlkICsgMSwgYWdlbnRzLmxlbmd0aCksXHJcbiAgICAgICF4QXhpc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4geyBhZ2VudDogYWdlbnRzW21pZF0sIGxlZnQ6IGxlZnQsIHJpZ2h0OiByaWdodCB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByYW5nZVNlYXJjaChcclxuICAgIHJvb3Q6IE5vZGUsXHJcbiAgICBtaW5YOiBudW1iZXIsXHJcbiAgICBtaW5ZOiBudW1iZXIsXHJcbiAgICBtYXhYOiBudW1iZXIsXHJcbiAgICBtYXhZOiBudW1iZXIsXHJcbiAgICB4QXhpczogYm9vbGVhblxyXG4gICk6IElBZ2VudFtdIHtcclxuICAgIGlmIChyb290ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXM6IElBZ2VudFtdID0gW107XHJcbiAgICBpZiAoeEF4aXMpIHtcclxuICAgICAgLy8gSWYgeCA8PSBtYXhYIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB4ID49IG1pblggbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJZiB5IDw9IG1heFkgbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHkgPj0gbWluWSBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgYWdlbnQgaXMgaW4gcmFuZ2UgcmFuZ2UgYWRkIHRvIHRoZSByZXN1bHRcclxuICAgIGlmIChcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WVxyXG4gICAgKSB7XHJcbiAgICAgIHJlcy5wdXNoKHJvb3QuYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcblxyXG5pbnRlcmZhY2UgVmVsb2NpdHlPYnN0YWNsZSB7XHJcbiAgLy8gVmVsb2NpdHkgb2JqZWN0IGRlZmluZWQgYnkgYSBwb2ludCBhbmQgdHdvIGRpcmVjdGlvbiB2ZWN0b3JzXHJcbiAgdmVydGV4OiBWZWN0b3IyZjtcclxuICB0MTogVmVjdG9yMmY7XHJcbiAgdDI6IFZlY3RvcjJmO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVk9BZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgUmFkaXVzOiBudW1iZXI7XHJcbiAgSWQ6IG51bWJlcjtcclxuXHJcbiAgTUFYX1ZFTE9DSVRZID0gMS4wO1xyXG4gIE1BWF9BQ0NFTEVSQVRJT04gPSAwLjU7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyZjtcclxuICBwcml2YXRlIF9nb2FsUG9zaXRpb246IFZlY3RvcjJmO1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMmY7XHJcblxyXG4gIHByaXZhdGUgX25leHRQb3NpdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfbmV4dERpcmVjdGlvbjogVmVjdG9yMmY7XHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG4gIHByaXZhdGUgX2lzU3R1Y2s6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXJ0UG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IG5ldyBWZWN0b3IyZigwLCAwKTtcclxuXHJcbiAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbjtcclxuICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uKCk6IFZlY3RvcjJmIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiBWZWN0b3IyZiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNTdHVjaztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgbmVpZ2hib3VyczogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgc3BlZWQgPSAwLjU7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByZWZlcnJlZFZlbG9jaXR5ID0gdGhpcy5nZXRQcmVmZXJyZWRWZWxvY2l0eSgpLm11bHRpcGx5KHNwZWVkKTtcclxuXHJcbiAgICBsZXQgc2FmZSA9IHRydWU7XHJcbiAgICBsZXQgY29sbGlzaW9uO1xyXG4gICAgbGV0IGFnZW50O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBWTyA9IHRoaXMuZ2V0VmVsb2NpdHlPYnN0YWNsZShuZWlnaGJvdXJzW2ldKTtcclxuICAgICAgaWYgKFZPID09IG51bGwgfHwgdGhpcy5pc0luc2lkZShwcmVmZXJyZWRWZWxvY2l0eSwgVk8pKSB7XHJcbiAgICAgICAgc2FmZSA9IGZhbHNlO1xyXG4gICAgICAgIGNvbGxpc2lvbiA9IFZPO1xyXG4gICAgICAgIGFnZW50ID0gaTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHByZWZlcnJlZCB2ZWxvY2l0eSBpcyBzYWZlLCBnbyBpbiB0aGF0IGRpcmVjdGlvblxyXG4gICAgaWYgKHNhZmUpIHtcclxuICAgICAgdGhpcy5fbmV4dERpcmVjdGlvbiA9IHByZWZlcnJlZFZlbG9jaXR5O1xyXG4gICAgICB0aGlzLl9uZXh0UG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQocHJlZmVycmVkVmVsb2NpdHkpO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2dvYWxQb3NpdGlvbikubWFnbml0dWRlU3FyZCgpIDwgMC4xXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fZ29hbFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBuZXcgVmVjdG9yMmYoMCwgMCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb2xsaXNpb24gIT0gbnVsbCkge1xyXG4gICAgICAvLyBFbHNlLCBjb25zaWRlciBjbG9zZXN0IHBvaW50IG9uIGZpcnN0IGhhbGYtcGxhbmVcclxuICAgICAgbGV0IGhwMSA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50T25MaW5lKFxyXG4gICAgICAgIGNvbGxpc2lvbi52ZXJ0ZXgsXHJcbiAgICAgICAgY29sbGlzaW9uLnQxLFxyXG4gICAgICAgIHByZWZlcnJlZFZlbG9jaXR5XHJcbiAgICAgICk7XHJcbiAgICAgIHNhZmUgPSB0cnVlO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSAhPSBhZ2VudCkge1xyXG4gICAgICAgICAgbGV0IFZPID0gdGhpcy5nZXRWZWxvY2l0eU9ic3RhY2xlKG5laWdoYm91cnNbaV0pO1xyXG4gICAgICAgICAgaWYgKFZPID09IG51bGwgfHwgdGhpcy5pc0luc2lkZShocDEsIFZPKSkge1xyXG4gICAgICAgICAgICBzYWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHNhZmUpIHtcclxuICAgICAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gaHAxO1xyXG4gICAgICAgIHRoaXMuX25leHRQb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChocDEpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRWxzZSwgY29uc2lkZXIgY2xvc2VzdCBwb2ludCBvbiBzZWNvbmQgaGFsZi1wbGFuZVxyXG4gICAgICBsZXQgaHAyID0gdGhpcy5nZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICAgICAgY29sbGlzaW9uLnZlcnRleCxcclxuICAgICAgICBjb2xsaXNpb24udDIsXHJcbiAgICAgICAgcHJlZmVycmVkVmVsb2NpdHlcclxuICAgICAgKTtcclxuICAgICAgc2FmZSA9IHRydWU7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChpICE9IGFnZW50KSB7XHJcbiAgICAgICAgICBsZXQgVk8gPSB0aGlzLmdldFZlbG9jaXR5T2JzdGFjbGUobmVpZ2hib3Vyc1tpXSk7XHJcbiAgICAgICAgICBpZiAoVk8gPT0gbnVsbCB8fCB0aGlzLmlzSW5zaWRlKGhwMiwgVk8pKSB7XHJcbiAgICAgICAgICAgIHNhZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc2FmZSkge1xyXG4gICAgICAgIHRoaXMuX25leHREaXJlY3Rpb24gPSBocDI7XHJcbiAgICAgICAgdGhpcy5fbmV4dFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uYWRkKGhwMik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogRWxzZSwgc2FtcGxlXHJcbiAgICB0aGlzLl9uZXh0RGlyZWN0aW9uID0gbmV3IFZlY3RvcjJmKDAsIDApO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IHRydWU7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBmaW5hbGl6ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuX2RpcmVjdGlvbiA9IHRoaXMuX25leHREaXJlY3Rpb247XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX25leHRQb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UHJlZmVycmVkVmVsb2NpdHkoKTogVmVjdG9yMmYge1xyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB0aGlzLl9nb2FsUG9zaXRpb24uc3VidHJhY3QodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbGV0IGdvYWxEaXN0YW5jZSA9IGdvYWxEaXJlY3Rpb24ubWFnbml0dWRlKCk7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IDEpIHtcclxuICAgICAgcmV0dXJuIGdvYWxEaXJlY3Rpb24uZGl2aWRlKGdvYWxEaXN0YW5jZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ29hbERpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VmVsb2NpdHlPYnN0YWNsZShiOiBJQWdlbnQpOiBWZWxvY2l0eU9ic3RhY2xlIHwgbnVsbCB7XHJcbiAgICBsZXQgdkIgPSBiLmdldERpcmVjdGlvbigpO1xyXG4gICAgbGV0IFIgPSBiLlJhZGl1cyArIHRoaXMuUmFkaXVzOyAvLyBSYWRpdXMgb2YgTWlua293c2tpIHN1bVxyXG5cclxuICAgIC8vIFRyYW5zbGF0ZSBwb3NpdGlvbnMgYXMgaWYgUF9BID0gKDAsIDApXHJcbiAgICBsZXQgcEIgPSBiLmdldFBvc2l0aW9uKCkuc3VidHJhY3QodGhpcy5nZXRQb3NpdGlvbigpKTtcclxuXHJcbiAgICAvLyBGaW5kIGNlbnRyZSBvZiBNaW5rb3dza2kgc3VtXHJcbiAgICBsZXQgcEMgPSBwQi5hZGQodkIpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbmdsZXNcclxuICAgIGxldCBkaWZmID0gdkIuc3VidHJhY3QocEMpO1xyXG4gICAgbGV0IGRpc3QgPSBkaWZmLm1hZ25pdHVkZSgpO1xyXG4gICAgaWYgKGRpc3QgPCBSKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0ID0gTWF0aC5hY29zKFIgLyBkaXN0KTtcclxuICAgIGxldCBkID0gTWF0aC5hdGFuMihkaWZmLnksIGRpZmYueCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhbmdlbnQgdmVjdG9yc1xyXG4gICAgbGV0IGExID0gZCArIHQ7XHJcbiAgICBsZXQgdDEgPSBuZXcgVmVjdG9yMmYocEMueCArIFIgKiBNYXRoLmNvcyhhMSksIHBDLnkgKyBSICogTWF0aC5zaW4oYTEpKTtcclxuXHJcbiAgICBsZXQgYTIgPSBkIC0gdDtcclxuICAgIGxldCB0MiA9IG5ldyBWZWN0b3IyZihwQy54ICsgUiAqIE1hdGguY29zKGEyKSwgcEMueSArIFIgKiBNYXRoLnNpbihhMikpO1xyXG5cclxuICAgIC8vIFJldHVybiB2ZWxvY2l0eSBvYnN0YWNsZVxyXG4gICAgcmV0dXJuIHsgdmVydGV4OiB2QiwgdDE6IHQxLCB0MjogdDIgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNJbnNpZGUodmVsb2NpdHk6IFZlY3RvcjJmLCBWTzogVmVsb2NpdHlPYnN0YWNsZSk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IGhhbGZQbGFuZTEgPVxyXG4gICAgICAoVk8udDEueCAtIFZPLnZlcnRleC54KSAqICh2ZWxvY2l0eS55IC0gVk8udmVydGV4LnkpIC1cclxuICAgICAgKFZPLnQxLnkgLSBWTy52ZXJ0ZXgueSkgKiAodmVsb2NpdHkueCAtIFZPLnZlcnRleC54KTtcclxuICAgIGxldCBoYWxmUGxhbmUyID1cclxuICAgICAgKFZPLnQyLnggLSBWTy52ZXJ0ZXgueCkgKiAodmVsb2NpdHkueSAtIFZPLnZlcnRleC55KSAtXHJcbiAgICAgIChWTy50Mi55IC0gVk8udmVydGV4LnkpICogKHZlbG9jaXR5LnggLSBWTy52ZXJ0ZXgueCk7XHJcblxyXG4gICAgcmV0dXJuIGhhbGZQbGFuZTEgPiAwICYmIGhhbGZQbGFuZTIgPCAwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDbG9zZXN0UG9pbnRPbkxpbmUoXHJcbiAgICBsaW5lUG9pbnQ6IFZlY3RvcjJmLFxyXG4gICAgbGluZURpcmVjdGlvbjogVmVjdG9yMmYsXHJcbiAgICBwb2ludDogVmVjdG9yMmZcclxuICApIHtcclxuICAgIGxldCBkaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLm5vcm1hbGlzZSgpO1xyXG4gICAgbGV0IHYgPSBwb2ludC5zdWJ0cmFjdChsaW5lUG9pbnQpO1xyXG4gICAgbGV0IGQgPSB2LmRvdChkaXJlY3Rpb24pO1xyXG4gICAgcmV0dXJuIGxpbmVQb2ludC5hZGQoZGlyZWN0aW9uLm11bHRpcGx5KGQpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2ltdWxhdGlvbiB9IGZyb20gXCIuL1NpbXVsYXRpb25cIjtcclxuaW1wb3J0IHsgUmVuZGVyZXIyRCB9IGZyb20gXCIuL1JlbmRlcmVyMkRcIjtcclxuXHJcbmltcG9ydCB7IEJhc2ljQWdlbnQgfSBmcm9tIFwiLi9CYXNpY0FnZW50XCI7XHJcbmltcG9ydCB7IFN0b3BBZ2VudCB9IGZyb20gXCIuL1N0b3BBZ2VudFwiO1xyXG5pbXBvcnQgeyBDb25maWd1cmF0aW9ucyB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25zXCI7XHJcbmltcG9ydCB7IEFnZW50VHJlZSB9IGZyb20gXCIuL0FnZW50VHJlZVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyZiB9IGZyb20gXCIuL1ZlY3RvcjJmXCI7XHJcbmltcG9ydCB7IFZPQWdlbnQgfSBmcm9tIFwiLi9WT0FnZW50XCI7XHJcblxyXG5jb25zdCBjb25maWdTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpZ1wiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgYWdlbnRUeXBlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJhZ2VudFR5cGVcIlxyXG4pIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBudW1iZXJPZkFnZW50c0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJudW1iZXJPZkFnZW50c1wiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBmcmFtZXJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYW1lcmF0ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheUJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgc3RlcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RlcEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQoY2FudmFzKTtcclxuY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHJlbmRlcmVyLCBuZXcgQWdlbnRUcmVlKCkpO1xyXG52YXIgcGxheSA9IGZhbHNlO1xyXG5cclxuLy8gaW5pdGlhbGlzZSBzaW11bGF0aW9uIGFuZCBiZWdpbiB1cGRhdGUvcmVuZGVyIGxvb3BcclxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgdGhpcy5yZWNvbmZpZ3VyZSgpO1xyXG5cclxuICBsZXQgbGFzdFJlbmRlciA9IDA7XHJcbiAgbGV0IGxhc3RGUFMgPSAwO1xyXG4gIGxldCBmcmFtZXMgPSAwO1xyXG5cclxuICBmdW5jdGlvbiBsb29wKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBsZXQgZGVsdGFUID0gdGltZXN0YW1wIC0gbGFzdFJlbmRlcjtcclxuICAgIGxhc3RSZW5kZXIgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgLy8gdXBkYXRlXHJcbiAgICBpZiAocGxheSkge1xyXG4gICAgICBzaW11bGF0aW9uLnVwZGF0ZShkZWx0YVQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbmRlclxyXG4gICAgc2ltdWxhdGlvbi5kcmF3KCk7XHJcbiAgICBmcmFtZXMrKztcclxuXHJcbiAgICAvLyByZWNhbGN1bGF0ZSBmcmFtZXJhdGUgZXZlcnkgMjUwbXNcclxuICAgIGlmICh0aW1lc3RhbXAgLSBsYXN0RlBTID49IDI1MCkge1xyXG4gICAgICBmcmFtZXJhdGUudGV4dENvbnRlbnQgPSBgRlBTOiAkeyhcclxuICAgICAgICAoMTAwMCAqIGZyYW1lcykgL1xyXG4gICAgICAgICh0aW1lc3RhbXAgLSBsYXN0RlBTKVxyXG4gICAgICApLnRvRml4ZWQoMSl9YDtcclxuXHJcbiAgICAgIGZyYW1lcyA9IDA7XHJcbiAgICAgIGxhc3RGUFMgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuXHJcbi8vIHRvZ2dsZSBwbGF5L3BhdXNlXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5UGF1c2UoKSB7XHJcbiAgcGxheSA9ICFwbGF5O1xyXG5cclxuICBpZiAocGxheSkge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGF1c2VcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQbGF5XCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBzdGVwIHNpbXVsYXRpb24gYnkgMSBmcmFtZVxyXG5leHBvcnQgZnVuY3Rpb24gc3RlcCgpIHtcclxuICBzaW11bGF0aW9uLnVwZGF0ZSgxMDAwIC8gNjApOyAvLyBBc3N1bWVzIDYwRlBTXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvbmZpZ3VyZSgpIHtcclxuICBpZiAocGxheSkge1xyXG4gICAgdGhpcy5wbGF5UGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ1NlbGVjdC52YWx1ZTtcclxuICBjb25zdCBhZ2VudFR5cGUgPSBhZ2VudFR5cGVTZWxlY3QudmFsdWU7IC8vIFRPRE86IHdpcmUgdGhpcyBpblxyXG4gIGNvbnN0IG4gPSBwYXJzZUludChudW1iZXJPZkFnZW50c0lucHV0LnZhbHVlKSA/PyAwO1xyXG5cclxuICAvLyBTZWxlY3QgYWdlbnQgY29uc3RydWN0b3JcclxuICBsZXQgYWdlbnRDb25zdHJ1Y3RvcjtcclxuICBzd2l0Y2ggKGFnZW50VHlwZSkge1xyXG4gICAgY2FzZSBcIkJhc2ljQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICBnb2FsUG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IEJhc2ljQWdlbnQoaWQsIHBvc2l0aW9uLCBnb2FsUG9zaXRpb24sIHJhZGl1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIlN0b3BBZ2VudFwiOlxyXG4gICAgICBhZ2VudENvbnN0cnVjdG9yID0gKFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcG9zaXRpb246IFZlY3RvcjJmLFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgU3RvcEFnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJWT0FnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogVmVjdG9yMmYsXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiBWZWN0b3IyZixcclxuICAgICAgICByYWRpdXM6IG51bWJlclxyXG4gICAgICApID0+IG5ldyBWT0FnZW50KGlkLCBwb3NpdGlvbiwgZ29hbFBvc2l0aW9uLCByYWRpdXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWdlbnQgbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VsZWN0IGNvbmZpZ3VyYXRpb25cclxuICBzd2l0Y2ggKGNvbmZpZykge1xyXG4gICAgY2FzZSBcIlJhbmRvbVRvUmFuZG9tXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvUmFuZG9tKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJSYW5kb21Ub0xpbmVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuUmFuZG9tVG9MaW5lKFxyXG4gICAgICAgICAgbixcclxuICAgICAgICAgIGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgIGNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgICBhZ2VudENvbnN0cnVjdG9yXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgXCJDaXJjbGVUb0NpcmNsZVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5DaXJjbGVUb0NpcmNsZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gbm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3NSk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=