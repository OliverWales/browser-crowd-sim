var CrowdSimulator;CrowdSimulator=(()=>{"use strict";var t={389:(t,i,n)=>{n.r(i),n.d(i,{init:()=>x,playPause:()=>P,reconfigure:()=>w,step:()=>m});var e=function(){function t(t,i){this._renderer=t,this._agents=i}return t.prototype.init=function(t){this._agents.init(t.agents)},t.prototype.update=function(t){var i=this;this._agents.forEach((function(n){n.update(t,i._agents.getNeighboursInRangeRectilinear(n,200))})),this._agents.init(this._agents.getAll())},t.prototype.draw=function(){var t=this;this._renderer.clear(),this._agents.forEach((function(i){t._renderer.drawAgent(i)}))},t}(),o=function(){function t(t){this._context=t.getContext("2d")}return t.prototype.clear=function(){this._context.fillStyle="white",this._context.fillRect(0,0,this._context.canvas.width,this._context.canvas.height)},t.prototype.drawAgent=function(t){var i=t.getPosition(),n=t.getDirection();if(this._context.beginPath(),t.getIsDone()?this._context.strokeStyle="#00FF00":t.getIsStuck()?this._context.strokeStyle="#FF0000":this._context.strokeStyle="#000000",this._context.arc(i.x,i.y,t.Radius,0,2*Math.PI),0!==n.dx||0!==n.dy){var e=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2));this._context.moveTo(i.x,i.y),this._context.lineTo(i.x+t.Radius*n.dx/e,i.y+t.Radius*n.dy/e)}this._context.stroke()},t}(),r=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction={dx:0,dy:0},this._isDone=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return!1},t.prototype.update=function(t,i){if(!this._isDone){var n={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},e=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));e>60*t/1e3?(this._direction.dx=n.x/e,this._direction.dy=n.y/e,this._position.x+=60*t/1e3*this._direction.dx,this._position.y+=60*t/1e3*this._direction.dy):(this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y,this._isDone=!0)}},t}(),s=function(){function t(t,i,n,e){this.Id=t,this._position=i,this._goalPosition=n,this.Radius=e,this._direction={dx:0,dy:0},this._isDone=!1,this._isStuck=!1}return t.prototype.getPosition=function(){return this._position},t.prototype.getDirection=function(){return this._direction},t.prototype.getIsDone=function(){return this._isDone},t.prototype.getIsStuck=function(){return this._isStuck},t.prototype.update=function(t,i){var n=this;if(!this._isDone){var e={x:this._goalPosition.x-this._position.x,y:this._goalPosition.y-this._position.y},o=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));if(o>60*t/1e3){this._direction.dx=e.x/o,this._direction.dy=e.y/o;var r=this._position.x+20*this._direction.dx,s=this._position.y+20*this._direction.dy;this._isStuck=!1,i.forEach((function(t){t.Id!=n.Id&&n.collides(t,{x:r,y:s})&&(n._isStuck=!0)})),this._isStuck||(this._position.x+=60*t/1e3*this._direction.dx,this._position.y+=60*t/1e3*this._direction.dy)}else this._position.x=this._goalPosition.x,this._position.y=this._goalPosition.y,this._isDone=!0}},t.prototype.collides=function(t,i){var n=i.x,e=i.y,o=this.Radius,r=t.getPosition().x,s=t.getPosition().y,a=t.Radius;return Math.sqrt(Math.pow(n-r,2)+Math.pow(e-s,2))<o+a},t}(),a=function(){function t(){}return t.RandomToRandom=function(t,i,n,e){for(var o=[],r=0;r<t;r++){var s=e(r,{x:i*Math.random(),y:n*Math.random()},{x:i*Math.random(),y:n*Math.random()},20);o.push(s)}return{agents:o}},t.RandomToLine=function(t,i,n,e){for(var o=[],r=0;r<t;r++){var s=e(r,{x:i*Math.random(),y:n*Math.random()},{x:(r+1)/(t+1)*i,y:n/2},20);o.push(s)}return{agents:o}},t.CircleToCircle=function(t,i,n,e){for(var o=[],r=i/2,s=n/2,a=n/2-25,h=0;h<t;h++){var c=2*Math.PI*h/t,u=e(h,{x:r+a*Math.cos(c),y:s+a*Math.sin(c)},{x:r+a*Math.cos(c+Math.PI),y:s+a*Math.sin(c+Math.PI)},20);o.push(u)}return{agents:o}},t}(),h=function(){function t(){}return t.prototype.init=function(t){this._agents=t,this._root=this.constructTree(this._agents,!0)},t.prototype.getAll=function(){return this._agents},t.prototype.getNeighboursInRangeRectilinear=function(t,i){var n=t.getPosition().x-i,e=t.getPosition().y-i,o=t.getPosition().x+i,r=t.getPosition().y+i;return this.rangeSearch(this._root,n,e,o,r,!0).filter((function(i){return i.Id!==t.Id}))},t.prototype.getNeighboursInRangeEuclidean=function(t,i){return this.getNeighboursInRangeRectilinear(t,i).filter((function(n){return Math.pow(t.getPosition().x-n.getPosition().x,2)+Math.pow(t.getPosition().y-n.getPosition().y,2)<=Math.pow(i,2)}))},t.prototype.forEach=function(t){this._agents.forEach(t)},t.prototype.constructTree=function(t,i){if(0===t.length)return null;var n=Math.floor(t.length/2),e=i?t.sort((function(t,i){return t.getPosition().x-i.getPosition().x})):t.sort((function(t,i){return t.getPosition().y-i.getPosition().y})),o=this.constructTree(e.slice(0,n),!i),r=this.constructTree(e.slice(n+1,t.length),!i);return{agent:t[n],left:o,right:r}},t.prototype.rangeSearch=function(t,i,n,e,o,r){if(null==t)return[];var s=[];return r?(t.agent.getPosition().x<=e&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().x>=i&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))):(t.agent.getPosition().y<=o&&(s=s.concat(this.rangeSearch(t.right,i,n,e,o,!r))),t.agent.getPosition().y>=n&&(s=s.concat(this.rangeSearch(t.left,i,n,e,o,!r)))),t.agent.getPosition().x>=i&&t.agent.getPosition().y>=n&&t.agent.getPosition().x<=e&&t.agent.getPosition().y<=o&&s.push(t.agent),s},t}(),c=document.getElementById("config"),u=document.getElementById("agentType"),g=document.getElementById("numberOfAgents"),d=document.getElementById("canvas"),p=document.getElementById("framerate"),y=document.getElementById("playButton"),f=document.getElementById("stepButton"),l=new e(new o(d),new h),_=!1;function x(){this.reconfigure();var t=0,i=0,n=0;window.requestAnimationFrame((function e(o){var r=o-t;t=o,_&&l.update(r),l.draw(),n++,o-i>=250&&(p.textContent="FPS: "+(1e3*n/(o-i)).toFixed(1),n=0,i=o),window.requestAnimationFrame(e)}))}function P(){(_=!_)?(y.textContent="Pause",f.disabled=!0):(y.textContent="Play",f.disabled=!1)}function m(){l.update(1e3/60)}function w(){var t;_&&this.playPause();var i,n=c.value,e=u.value,o=null!==(t=parseInt(g.value))&&void 0!==t?t:0;switch(e){case"BasicAgent":i=function(t,i,n,e){return new r(t,i,n,e)};break;case"StopAgent":i=function(t,i,n,e){return new s(t,i,n,e)};break;default:throw new Error("Agent not implemented")}switch(n){case"RandomToRandom":l.init(a.RandomToRandom(o,d.width,d.height,i));break;case"RandomToLine":l.init(a.RandomToLine(o,d.width,d.height,i));break;case"CircleToCircle":l.init(a.CircleToCircle(o,d.width,d.height,i));break;default:throw new Error("Configuration not implemented")}}}},i={};function n(e){if(i[e])return i[e].exports;var o=i[e]={exports:{}};return t[e](o,o.exports,n),o.exports}return n.d=(t,i)=>{for(var e in i)n.o(i,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},n.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(389)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TaW11bGF0aW9uLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL1JlbmRlcmVyMkQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQmFzaWNBZ2VudC50cyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci8uL3NyYy9TdG9wQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQ29uZmlndXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3IvLi9zcmMvQWdlbnRUcmVlLnRzIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQ3Jvd2RTaW11bGF0b3Ivd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9Dcm93ZFNpbXVsYXRvci93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0Nyb3dkU2ltdWxhdG9yL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiXSwibmFtZXMiOlsicmVuZGVyZXIiLCJhZ2VudHMiLCJ0aGlzIiwiX3JlbmRlcmVyIiwiX2FnZW50cyIsImluaXQiLCJjb25maWciLCJ1cGRhdGUiLCJkZWx0YVQiLCJmb3JFYWNoIiwiYWdlbnQiLCJnZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyIiwiZ2V0QWxsIiwiZHJhdyIsImNsZWFyIiwiZHJhd0FnZW50IiwiY2FudmFzIiwiX2NvbnRleHQiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJkaXJlY3Rpb24iLCJnZXREaXJlY3Rpb24iLCJiZWdpblBhdGgiLCJnZXRJc0RvbmUiLCJzdHJva2VTdHlsZSIsImdldElzU3R1Y2siLCJhcmMiLCJ4IiwieSIsIlJhZGl1cyIsIk1hdGgiLCJQSSIsImR4IiwiZHkiLCJtYWduaXR1ZGUiLCJzcXJ0IiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiaWQiLCJzdGFydFBvc2l0aW9uIiwiZ29hbFBvc2l0aW9uIiwicmFkaXVzIiwiSWQiLCJfcG9zaXRpb24iLCJfZ29hbFBvc2l0aW9uIiwiX2RpcmVjdGlvbiIsIl9pc0RvbmUiLCJnb2FsRGlyZWN0aW9uIiwiZ29hbERpc3RhbmNlIiwiX2lzU3R1Y2siLCJjb2xsaWRlcyIsImExeCIsImExeSIsImExciIsImEyeCIsImEyeSIsImEyciIsIlJhbmRvbVRvUmFuZG9tIiwibiIsImFnZW50Q29uc3RydWN0b3IiLCJpIiwicmFuZG9tIiwicHVzaCIsIlJhbmRvbVRvTGluZSIsIkNpcmNsZVRvQ2lyY2xlIiwiY2VudHJlWCIsImNlbnRyZVkiLCJhbmdsZSIsImNvcyIsInNpbiIsIl9yb290IiwiY29uc3RydWN0VHJlZSIsInJhbmdlIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJhbmdlU2VhcmNoIiwiZmlsdGVyIiwib3RoZXIiLCJnZXROZWlnaGJvdXJzSW5SYW5nZUV1Y2xpZGVhbiIsImZ1biIsInhBeGlzIiwibGVuZ3RoIiwibWlkIiwiZmxvb3IiLCJzb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJsZWZ0Iiwic2xpY2UiLCJyaWdodCIsInJvb3QiLCJyZXMiLCJjb25jYXQiLCJjb25maWdTZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWdlbnRUeXBlU2VsZWN0IiwibnVtYmVyT2ZBZ2VudHNJbnB1dCIsImZyYW1lcmF0ZSIsInBsYXlCdXR0b24iLCJzdGVwQnV0dG9uIiwic2ltdWxhdGlvbiIsIlNpbXVsYXRpb24iLCJSZW5kZXJlcjJEIiwiQWdlbnRUcmVlIiwicGxheSIsInJlY29uZmlndXJlIiwibGFzdFJlbmRlciIsImxhc3RGUFMiLCJmcmFtZXMiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wIiwidGltZXN0YW1wIiwidGV4dENvbnRlbnQiLCJ0b0ZpeGVkIiwicGxheVBhdXNlIiwiZGlzYWJsZWQiLCJzdGVwIiwidmFsdWUiLCJhZ2VudFR5cGUiLCJwYXJzZUludCIsIkJhc2ljQWdlbnQiLCJTdG9wQWdlbnQiLCJFcnJvciIsIkNvbmZpZ3VyYXRpb25zIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sIm1hcHBpbmdzIjoia0pBSUEsaUJBSUUsV0FBWUEsRUFBcUJDLEdBQy9CQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsUUFBVUgsRUF3Qm5CLE9BckJFLFlBQUFJLEtBQUEsU0FBS0MsR0FDSEosS0FBS0UsUUFBUUMsS0FBS0MsRUFBT0wsU0FHM0IsWUFBQU0sT0FBQSxTQUFPQyxHQUFQLFdBRUVOLEtBQUtFLFFBQVFLLFNBQVEsU0FBQ0MsR0FDcEJBLEVBQU1ILE9BQ0pDLEVBQ0EsRUFBS0osUUFBUU8sZ0NBQWdDRCxFQUpyQyxTQU9aUixLQUFLRSxRQUFRQyxLQUFLSCxLQUFLRSxRQUFRUSxXQUdqQyxZQUFBQyxLQUFBLHNCQUNFWCxLQUFLQyxVQUFVVyxRQUNmWixLQUFLRSxRQUFRSyxTQUFRLFNBQUNDLEdBQ3BCLEVBQUtQLFVBQVVZLFVBQVVMLE9BRy9CLEVBOUJBLEdDREEsYUFHRSxXQUFZTSxHQUNWZCxL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QU9LLE1BQ1BMLEVBQU9NLE9BQ1AyQyxJQUdKLE1BRUYsSUFBSyxpQkFDSDZDLEVBQVd6RyxLQUNUaUksRUFBZWhFLGVBQ2JOLEVBQ0FoRCxFQUFPSyxNQUNQTCxFQUFPTSxPQUNQMkMsSUFHSixNQUVGLFFBQ0UsTUFBTSxJQUFJb0UsTUFBTSxxQ0N0SmxCRSxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVQyxRQUczQyxJQUFJQyxFQUFTSixFQUF5QkUsR0FBWSxDQUdqREMsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSCxHQUFVRSxFQUFRQSxFQUFPRCxRQUFTRixHQUcvQ0csRUFBT0QsUUNqQmYsT0NGQUYsRUFBb0JLLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYTixFQUFvQlEsRUFBRUYsRUFBWUMsS0FBU1AsRUFBb0JRLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VQLEVBQW9CUSxFQUFJLENBQUNLLEVBQUtDLElBQVNMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGZCxFQUFvQmtCLEVBQUtoQixJQUNILG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDWCxPQUFPQyxlQUFlUixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFNUIsTUFBTyxXQUU3RGlCLE9BQU9DLGVBQWVSLEVBQVMsYUFBYyxDQUFFVixPQUFPLEtIRmhEUSxFQUFvQixNIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElBZ2VudENvbGxlY3Rpb24gfSBmcm9tIFwiLi9JQWdlbnRDb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gXCIuL0lSZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBJQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuL0NvbmZpZ3VyYXRpb25zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgX3JlbmRlcmVyOiBJUmVuZGVyZXI7XHJcbiAgX2FnZW50czogSUFnZW50Q29sbGVjdGlvbjtcclxuXHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXI6IElSZW5kZXJlciwgYWdlbnRzOiBJQWdlbnRDb2xsZWN0aW9uKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fYWdlbnRzID0gYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgaW5pdChjb25maWc6IElDb25maWd1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdChjb25maWcuYWdlbnRzKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlcikge1xyXG4gICAgbGV0IHJhbmdlID0gMjAwO1xyXG4gICAgdGhpcy5fYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgIGFnZW50LnVwZGF0ZShcclxuICAgICAgICBkZWx0YVQsXHJcbiAgICAgICAgdGhpcy5fYWdlbnRzLmdldE5laWdoYm91cnNJblJhbmdlUmVjdGlsaW5lYXIoYWdlbnQsIHJhbmdlKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9hZ2VudHMuaW5pdCh0aGlzLl9hZ2VudHMuZ2V0QWxsKCkpO1xyXG4gIH1cclxuXHJcbiAgZHJhdygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaCgoYWdlbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIuZHJhd0FnZW50KGFnZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQWdlbnQgfSBmcm9tIFwiLi9JQWdlbnRcIjtcclxuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSBcIi4vSVJlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIyRCBpbXBsZW1lbnRzIElSZW5kZXJlciB7XHJcbiAgX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpOiB2b2lkIHtcclxuICAgIHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgdGhpcy5fY29udGV4dC5maWxsUmVjdChcclxuICAgICAgMCxcclxuICAgICAgMCxcclxuICAgICAgdGhpcy5fY29udGV4dC5jYW52YXMud2lkdGgsXHJcbiAgICAgIHRoaXMuX2NvbnRleHQuY2FudmFzLmhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRyYXdBZ2VudChhZ2VudDogSUFnZW50KSB7XHJcbiAgICBsZXQgcG9zaXRpb24gPSBhZ2VudC5nZXRQb3NpdGlvbigpO1xyXG4gICAgbGV0IGRpcmVjdGlvbiA9IGFnZW50LmdldERpcmVjdGlvbigpO1xyXG5cclxuICAgIHRoaXMuX2NvbnRleHQuYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgLy8gZHJhdyBhZ2VudFxyXG4gICAgaWYgKGFnZW50LmdldElzRG9uZSgpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMEZGMDBcIjtcclxuICAgIH0gZWxzZSBpZiAoYWdlbnQuZ2V0SXNTdHVjaygpKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiNGRjAwMDBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMwMDAwMDBcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250ZXh0LmFyYyhwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBhZ2VudC5SYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAvLyBkcmF3IGRpcmVjdGlvblxyXG4gICAgaWYgKGRpcmVjdGlvbi5keCAhPT0gMCB8fCBkaXJlY3Rpb24uZHkgIT09IDApIHtcclxuICAgICAgbGV0IG1hZ25pdHVkZSA9IE1hdGguc3FydChkaXJlY3Rpb24uZHggKiogMiArIGRpcmVjdGlvbi5keSAqKiAyKTtcclxuXHJcbiAgICAgIHRoaXMuX2NvbnRleHQubW92ZVRvKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xyXG4gICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhcclxuICAgICAgICBwb3NpdGlvbi54ICsgKGFnZW50LlJhZGl1cyAqIGRpcmVjdGlvbi5keCkgLyBtYWduaXR1ZGUsXHJcbiAgICAgICAgcG9zaXRpb24ueSArIChhZ2VudC5SYWRpdXMgKiBkaXJlY3Rpb24uZHkpIC8gbWFnbml0dWRlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY29udGV4dC5zdHJva2UoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzaWNBZ2VudCBpbXBsZW1lbnRzIElBZ2VudCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IElkOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IFJhZGl1czogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9wb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9O1xyXG4gIHByaXZhdGUgX2dvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9O1xyXG4gIHByaXZhdGUgX2RpcmVjdGlvbjogeyBkeDogbnVtYmVyOyBkeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfaXNEb25lOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGFydFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLklkID0gaWQ7XHJcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICB0aGlzLl9nb2FsUG9zaXRpb24gPSBnb2FsUG9zaXRpb247XHJcbiAgICB0aGlzLlJhZGl1cyA9IHJhZGl1cztcclxuXHJcbiAgICB0aGlzLl9kaXJlY3Rpb24gPSB7IGR4OiAwLCBkeTogMCB9O1xyXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlyZWN0aW9uKCk6IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgfVxyXG5cclxuICBnZXRJc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNEb25lO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNTdHVjaygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgX2FnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9pc0RvbmUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnb2FsRGlyZWN0aW9uID0ge1xyXG4gICAgICB4OiB0aGlzLl9nb2FsUG9zaXRpb24ueCAtIHRoaXMuX3Bvc2l0aW9uLngsXHJcbiAgICAgIHk6IHRoaXMuX2dvYWxQb3NpdGlvbi55IC0gdGhpcy5fcG9zaXRpb24ueSxcclxuICAgIH07XHJcbiAgICBsZXQgZ29hbERpc3RhbmNlID0gTWF0aC5zcXJ0KGdvYWxEaXJlY3Rpb24ueCAqKiAyICsgZ29hbERpcmVjdGlvbi55ICoqIDIpO1xyXG5cclxuICAgIGlmIChnb2FsRGlzdGFuY2UgPiAoZGVsdGFUICogNjApIC8gMTAwMCkge1xyXG4gICAgICB0aGlzLl9kaXJlY3Rpb24uZHggPSBnb2FsRGlyZWN0aW9uLnggLyBnb2FsRGlzdGFuY2U7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbi5keSA9IGdvYWxEaXJlY3Rpb24ueSAvIGdvYWxEaXN0YW5jZTtcclxuICAgICAgdGhpcy5fcG9zaXRpb24ueCArPSAoKGRlbHRhVCAqIDYwKSAvIDEwMDApICogdGhpcy5fZGlyZWN0aW9uLmR4O1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi55ICs9ICgoZGVsdGFUICogNjApIC8gMTAwMCkgKiB0aGlzLl9kaXJlY3Rpb24uZHk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi54ID0gdGhpcy5fZ29hbFBvc2l0aW9uLng7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnkgPSB0aGlzLl9nb2FsUG9zaXRpb24ueTtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcEFnZW50IGltcGxlbWVudHMgSUFnZW50IHtcclxuICBwdWJsaWMgcmVhZG9ubHkgSWQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgUmFkaXVzOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgX3Bvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgcHJpdmF0ZSBfZGlyZWN0aW9uOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfTtcclxuICBwcml2YXRlIF9pc0RvbmU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBfaXNTdHVjazogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhcnRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICByYWRpdXM6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5JZCA9IGlkO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSBzdGFydFBvc2l0aW9uO1xyXG4gICAgdGhpcy5fZ29hbFBvc2l0aW9uID0gZ29hbFBvc2l0aW9uO1xyXG4gICAgdGhpcy5SYWRpdXMgPSByYWRpdXM7XHJcblxyXG4gICAgdGhpcy5fZGlyZWN0aW9uID0geyBkeDogMCwgZHk6IDAgfTtcclxuICAgIHRoaXMuX2lzRG9uZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNTdHVjayA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldERpcmVjdGlvbigpOiB7IGR4OiBudW1iZXI7IGR5OiBudW1iZXIgfSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNEb25lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzRG9uZTtcclxuICB9XHJcblxyXG4gIGdldElzU3R1Y2soKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNTdHVjaztcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkZWx0YVQ6IG51bWJlciwgYWdlbnRzOiBJQWdlbnRbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2lzRG9uZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdvYWxEaXJlY3Rpb24gPSB7XHJcbiAgICAgIHg6IHRoaXMuX2dvYWxQb3NpdGlvbi54IC0gdGhpcy5fcG9zaXRpb24ueCxcclxuICAgICAgeTogdGhpcy5fZ29hbFBvc2l0aW9uLnkgLSB0aGlzLl9wb3NpdGlvbi55LFxyXG4gICAgfTtcclxuICAgIGxldCBnb2FsRGlzdGFuY2UgPSBNYXRoLnNxcnQoZ29hbERpcmVjdGlvbi54ICoqIDIgKyBnb2FsRGlyZWN0aW9uLnkgKiogMik7XHJcblxyXG4gICAgaWYgKGdvYWxEaXN0YW5jZSA+IChkZWx0YVQgKiA2MCkgLyAxMDAwKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbi5keCA9IGdvYWxEaXJlY3Rpb24ueCAvIGdvYWxEaXN0YW5jZTtcclxuICAgICAgdGhpcy5fZGlyZWN0aW9uLmR5ID0gZ29hbERpcmVjdGlvbi55IC8gZ29hbERpc3RhbmNlO1xyXG4gICAgICBsZXQgaGVhZGluZ1ggPSB0aGlzLl9wb3NpdGlvbi54ICsgMjAgKiB0aGlzLl9kaXJlY3Rpb24uZHg7XHJcbiAgICAgIGxldCBoZWFkaW5nWSA9IHRoaXMuX3Bvc2l0aW9uLnkgKyAyMCAqIHRoaXMuX2RpcmVjdGlvbi5keTtcclxuXHJcbiAgICAgIHRoaXMuX2lzU3R1Y2sgPSBmYWxzZTtcclxuICAgICAgYWdlbnRzLmZvckVhY2goKGFnZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgYWdlbnQuSWQgIT0gdGhpcy5JZCAmJlxyXG4gICAgICAgICAgdGhpcy5jb2xsaWRlcyhhZ2VudCwgeyB4OiBoZWFkaW5nWCwgeTogaGVhZGluZ1kgfSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMuX2lzU3R1Y2sgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuX2lzU3R1Y2spIHtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbi54ICs9ICgoZGVsdGFUICogNjApIC8gMTAwMCkgKiB0aGlzLl9kaXJlY3Rpb24uZHg7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24ueSArPSAoKGRlbHRhVCAqIDYwKSAvIDEwMDApICogdGhpcy5fZGlyZWN0aW9uLmR5O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9wb3NpdGlvbi54ID0gdGhpcy5fZ29hbFBvc2l0aW9uLng7XHJcbiAgICAgIHRoaXMuX3Bvc2l0aW9uLnkgPSB0aGlzLl9nb2FsUG9zaXRpb24ueTtcclxuICAgICAgdGhpcy5faXNEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbGxpZGVzKGFnZW50OiBJQWdlbnQsIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0pOiBib29sZWFuIHtcclxuICAgIGxldCBhMXggPSBwb3NpdGlvbi54O1xyXG4gICAgbGV0IGExeSA9IHBvc2l0aW9uLnk7XHJcbiAgICBsZXQgYTFyID0gdGhpcy5SYWRpdXM7XHJcbiAgICBsZXQgYTJ4ID0gYWdlbnQuZ2V0UG9zaXRpb24oKS54O1xyXG4gICAgbGV0IGEyeSA9IGFnZW50LmdldFBvc2l0aW9uKCkueTtcclxuICAgIGxldCBhMnIgPSBhZ2VudC5SYWRpdXM7XHJcblxyXG4gICAgcmV0dXJuIE1hdGguc3FydCgoYTF4IC0gYTJ4KSAqKiAyICsgKGExeSAtIGEyeSkgKiogMikgPCBhMXIgKyBhMnI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElBZ2VudCB9IGZyb20gXCIuL0lBZ2VudFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29uZmlndXJhdGlvbiB7XHJcbiAgYWdlbnRzOiBJQWdlbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb25zIHtcclxuICBzdGF0aWMgUmFuZG9tVG9SYW5kb20oXHJcbiAgICBuOiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBhZ2VudENvbnN0cnVjdG9yOiAoXHJcbiAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgIHN0YXJ0UG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICApID0+IElBZ2VudFxyXG4gICkge1xyXG4gICAgLy8gUmFuZG9tIHN0YXJ0IHBvc2l0aW9uIHRvIHJhbmRvbSBnb2FsIHBvc2l0aW9uXHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgY29uc3QgYWdlbnQgPSBhZ2VudENvbnN0cnVjdG9yKFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgeyB4OiB3aWR0aCAqIE1hdGgucmFuZG9tKCksIHk6IGhlaWdodCAqIE1hdGgucmFuZG9tKCkgfSxcclxuICAgICAgICB7IHg6IHdpZHRoICogTWF0aC5yYW5kb20oKSwgeTogaGVpZ2h0ICogTWF0aC5yYW5kb20oKSB9LFxyXG4gICAgICAgIDIwXHJcbiAgICAgICk7XHJcbiAgICAgIGFnZW50cy5wdXNoKGFnZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBhZ2VudHM6IGFnZW50cyB9IGFzIElDb25maWd1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIFJhbmRvbVRvTGluZShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBSYW5kb20gc3RhcnQgcG9zaXRpb24gdG8gZml4ZWQgcG9zaXRpb24gb24gbGluZVxyXG4gICAgbGV0IGFnZW50czogSUFnZW50W10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRDb25zdHJ1Y3RvcihcclxuICAgICAgICBpLFxyXG4gICAgICAgIHsgeDogd2lkdGggKiBNYXRoLnJhbmRvbSgpLCB5OiBoZWlnaHQgKiBNYXRoLnJhbmRvbSgpIH0sXHJcbiAgICAgICAgeyB4OiAoKGkgKyAxKSAvIChuICsgMSkpICogd2lkdGgsIHk6IGhlaWdodCAvIDIgfSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBDaXJjbGVUb0NpcmNsZShcclxuICAgIG46IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGFnZW50Q29uc3RydWN0b3I6IChcclxuICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgc3RhcnRQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICBnb2FsUG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSxcclxuICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICkgPT4gSUFnZW50XHJcbiAgKSB7XHJcbiAgICAvLyBQb3NpdGlvbiBvbiByYWRpdXMgb2YgY2lyY2xlIHRvIG9wcG9zaXRlIHBvaW50XHJcbiAgICBsZXQgYWdlbnRzOiBJQWdlbnRbXSA9IFtdO1xyXG4gICAgY29uc3QgY2VudHJlWCA9IHdpZHRoIC8gMjtcclxuICAgIGNvbnN0IGNlbnRyZVkgPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzID0gaGVpZ2h0IC8gMiAtIDI1O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuZ2xlID0gKDIgKiBNYXRoLlBJICogaSkgLyBuO1xyXG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50Q29uc3RydWN0b3IoXHJcbiAgICAgICAgaSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB4OiBjZW50cmVYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICAgICAgeTogY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHg6IGNlbnRyZVggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkpLFxyXG4gICAgICAgICAgeTogY2VudHJlWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICAyMFxyXG4gICAgICApO1xyXG4gICAgICBhZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgYWdlbnRzOiBhZ2VudHMgfSBhcyBJQ29uZmlndXJhdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUFnZW50Q29sbGVjdGlvbiB9IGZyb20gXCIuL0lBZ2VudENvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSUFnZW50IH0gZnJvbSBcIi4vSUFnZW50XCI7XHJcblxyXG5pbnRlcmZhY2UgTm9kZSB7XHJcbiAgYWdlbnQ6IElBZ2VudDtcclxuICBsZWZ0OiBOb2RlO1xyXG4gIHJpZ2h0OiBOb2RlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWdlbnRUcmVlIGltcGxlbWVudHMgSUFnZW50Q29sbGVjdGlvbiB7XHJcbiAgcHJpdmF0ZSBfYWdlbnRzOiBJQWdlbnRbXTtcclxuICBwcml2YXRlIF9yb290OiBOb2RlO1xyXG5cclxuICBpbml0KGFnZW50czogSUFnZW50W10pOiB2b2lkIHtcclxuICAgIHRoaXMuX2FnZW50cyA9IGFnZW50cztcclxuICAgIHRoaXMuX3Jvb3QgPSB0aGlzLmNvbnN0cnVjdFRyZWUodGhpcy5fYWdlbnRzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldEFsbCgpOiBJQWdlbnRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYWdlbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VSZWN0aWxpbmVhcihhZ2VudDogSUFnZW50LCByYW5nZTogbnVtYmVyKTogSUFnZW50W10ge1xyXG4gICAgbGV0IG1pblggPSBhZ2VudC5nZXRQb3NpdGlvbigpLnggLSByYW5nZTtcclxuICAgIGxldCBtaW5ZID0gYWdlbnQuZ2V0UG9zaXRpb24oKS55IC0gcmFuZ2U7XHJcbiAgICBsZXQgbWF4WCA9IGFnZW50LmdldFBvc2l0aW9uKCkueCArIHJhbmdlO1xyXG4gICAgbGV0IG1heFkgPSBhZ2VudC5nZXRQb3NpdGlvbigpLnkgKyByYW5nZTtcclxuXHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMucmFuZ2VTZWFyY2godGhpcy5fcm9vdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoKG90aGVyKSA9PiBvdGhlci5JZCAhPT0gYWdlbnQuSWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmVpZ2hib3Vyc0luUmFuZ2VFdWNsaWRlYW4oYWdlbnQ6IElBZ2VudCwgcmFuZ2U6IG51bWJlcik6IElBZ2VudFtdIHtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5nZXROZWlnaGJvdXJzSW5SYW5nZVJlY3RpbGluZWFyKGFnZW50LCByYW5nZSk7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlcy5maWx0ZXIoXHJcbiAgICAgIChvdGhlcikgPT5cclxuICAgICAgICAoYWdlbnQuZ2V0UG9zaXRpb24oKS54IC0gb3RoZXIuZ2V0UG9zaXRpb24oKS54KSAqKiAyICtcclxuICAgICAgICAgIChhZ2VudC5nZXRQb3NpdGlvbigpLnkgLSBvdGhlci5nZXRQb3NpdGlvbigpLnkpICoqIDIgPD1cclxuICAgICAgICByYW5nZSAqKiAyXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZm9yRWFjaChmdW46IChhZ2VudDogSUFnZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLl9hZ2VudHMuZm9yRWFjaChmdW4pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RUcmVlKGFnZW50czogSUFnZW50W10sIHhBeGlzOiBib29sZWFuKTogTm9kZSB7XHJcbiAgICBpZiAoYWdlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbWlkID0gTWF0aC5mbG9vcihhZ2VudHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgbGV0IHNvcnRlZCA9IHhBeGlzXHJcbiAgICAgID8gYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS54IC0gYi5nZXRQb3NpdGlvbigpLngpXHJcbiAgICAgIDogYWdlbnRzLnNvcnQoKGEsIGIpID0+IGEuZ2V0UG9zaXRpb24oKS55IC0gYi5nZXRQb3NpdGlvbigpLnkpO1xyXG5cclxuICAgIGxldCBsZWZ0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKHNvcnRlZC5zbGljZSgwLCBtaWQpLCAheEF4aXMpO1xyXG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5jb25zdHJ1Y3RUcmVlKFxyXG4gICAgICBzb3J0ZWQuc2xpY2UobWlkICsgMSwgYWdlbnRzLmxlbmd0aCksXHJcbiAgICAgICF4QXhpc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4geyBhZ2VudDogYWdlbnRzW21pZF0sIGxlZnQ6IGxlZnQsIHJpZ2h0OiByaWdodCB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByYW5nZVNlYXJjaChcclxuICAgIHJvb3Q6IE5vZGUsXHJcbiAgICBtaW5YOiBudW1iZXIsXHJcbiAgICBtaW5ZOiBudW1iZXIsXHJcbiAgICBtYXhYOiBudW1iZXIsXHJcbiAgICBtYXhZOiBudW1iZXIsXHJcbiAgICB4QXhpczogYm9vbGVhblxyXG4gICk6IElBZ2VudFtdIHtcclxuICAgIGlmIChyb290ID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXM6IElBZ2VudFtdID0gW107XHJcbiAgICBpZiAoeEF4aXMpIHtcclxuICAgICAgLy8gSWYgeCA8PSBtYXhYIG5lZWQgdG8gY2hlY2sgcmlnaHQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPD0gbWF4WCkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QucmlnaHQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB4ID49IG1pblggbmVlZCB0byBjaGVjayBsZWZ0IHN1YnRyZWVcclxuICAgICAgaWYgKHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54ID49IG1pblgpIHtcclxuICAgICAgICByZXMgPSByZXMuY29uY2F0KFxyXG4gICAgICAgICAgdGhpcy5yYW5nZVNlYXJjaChyb290LmxlZnQsIG1pblgsIG1pblksIG1heFgsIG1heFksICF4QXhpcylcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJZiB5IDw9IG1heFkgbmVlZCB0byBjaGVjayByaWdodCBzdWJ0cmVlXHJcbiAgICAgIGlmIChyb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA8PSBtYXhZKSB7XHJcbiAgICAgICAgcmVzID0gcmVzLmNvbmNhdChcclxuICAgICAgICAgIHRoaXMucmFuZ2VTZWFyY2gocm9vdC5yaWdodCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHkgPj0gbWluWSBuZWVkIHRvIGNoZWNrIGxlZnQgc3VidHJlZVxyXG4gICAgICBpZiAocm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPj0gbWluWSkge1xyXG4gICAgICAgIHJlcyA9IHJlcy5jb25jYXQoXHJcbiAgICAgICAgICB0aGlzLnJhbmdlU2VhcmNoKHJvb3QubGVmdCwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgIXhBeGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgYWdlbnQgaXMgaW4gcmFuZ2UgcmFuZ2UgYWRkIHRvIHRoZSByZXN1bHRcclxuICAgIGlmIChcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnggPj0gbWluWCAmJlxyXG4gICAgICByb290LmFnZW50LmdldFBvc2l0aW9uKCkueSA+PSBtaW5ZICYmXHJcbiAgICAgIHJvb3QuYWdlbnQuZ2V0UG9zaXRpb24oKS54IDw9IG1heFggJiZcclxuICAgICAgcm9vdC5hZ2VudC5nZXRQb3NpdGlvbigpLnkgPD0gbWF4WVxyXG4gICAgKSB7XHJcbiAgICAgIHJlcy5wdXNoKHJvb3QuYWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNpbXVsYXRpb24gfSBmcm9tIFwiLi9TaW11bGF0aW9uXCI7XHJcbmltcG9ydCB7IFJlbmRlcmVyMkQgfSBmcm9tIFwiLi9SZW5kZXJlcjJEXCI7XHJcblxyXG5pbXBvcnQgeyBCYXNpY0FnZW50IH0gZnJvbSBcIi4vQmFzaWNBZ2VudFwiO1xyXG5pbXBvcnQgeyBTdG9wQWdlbnQgfSBmcm9tIFwiLi9TdG9wQWdlbnRcIjtcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbnMgfSBmcm9tIFwiLi9Db25maWd1cmF0aW9uc1wiO1xyXG5pbXBvcnQgeyBBZ2VudExpc3QgfSBmcm9tIFwiLi9BZ2VudExpc3RcIjtcclxuaW1wb3J0IHsgQWdlbnRUcmVlIH0gZnJvbSBcIi4vQWdlbnRUcmVlXCI7XHJcblxyXG5jb25zdCBjb25maWdTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpZ1wiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuY29uc3QgYWdlbnRUeXBlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJhZ2VudFR5cGVcIlxyXG4pIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5jb25zdCBudW1iZXJPZkFnZW50c0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJudW1iZXJPZkFnZW50c1wiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBmcmFtZXJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYW1lcmF0ZVwiKSBhcyBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheUJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuY29uc3Qgc3RlcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RlcEJ1dHRvblwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyMkQoY2FudmFzKTtcclxuY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHJlbmRlcmVyLCBuZXcgQWdlbnRUcmVlKCkpO1xyXG52YXIgcGxheSA9IGZhbHNlO1xyXG5cclxuLy8gaW5pdGlhbGlzZSBzaW11bGF0aW9uIGFuZCBiZWdpbiB1cGRhdGUvcmVuZGVyIGxvb3BcclxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgdGhpcy5yZWNvbmZpZ3VyZSgpO1xyXG5cclxuICBsZXQgbGFzdFJlbmRlciA9IDA7XHJcbiAgbGV0IGxhc3RGUFMgPSAwO1xyXG4gIGxldCBmcmFtZXMgPSAwO1xyXG5cclxuICBmdW5jdGlvbiBsb29wKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBsZXQgZGVsdGFUID0gdGltZXN0YW1wIC0gbGFzdFJlbmRlcjtcclxuICAgIGxhc3RSZW5kZXIgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgLy8gdXBkYXRlXHJcbiAgICBpZiAocGxheSkge1xyXG4gICAgICBzaW11bGF0aW9uLnVwZGF0ZShkZWx0YVQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbmRlclxyXG4gICAgc2ltdWxhdGlvbi5kcmF3KCk7XHJcbiAgICBmcmFtZXMrKztcclxuXHJcbiAgICAvLyByZWNhbGN1bGF0ZSBmcmFtZXJhdGUgZXZlcnkgMjUwbXNcclxuICAgIGlmICh0aW1lc3RhbXAgLSBsYXN0RlBTID49IDI1MCkge1xyXG4gICAgICBmcmFtZXJhdGUudGV4dENvbnRlbnQgPSBgRlBTOiAkeyhcclxuICAgICAgICAoMTAwMCAqIGZyYW1lcykgL1xyXG4gICAgICAgICh0aW1lc3RhbXAgLSBsYXN0RlBTKVxyXG4gICAgICApLnRvRml4ZWQoMSl9YDtcclxuXHJcbiAgICAgIGZyYW1lcyA9IDA7XHJcbiAgICAgIGxhc3RGUFMgPSB0aW1lc3RhbXA7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbn1cclxuXHJcbi8vIHRvZ2dsZSBwbGF5L3BhdXNlXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5UGF1c2UoKSB7XHJcbiAgcGxheSA9ICFwbGF5O1xyXG5cclxuICBpZiAocGxheSkge1xyXG4gICAgcGxheUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGF1c2VcIjtcclxuICAgIHN0ZXBCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwbGF5QnV0dG9uLnRleHRDb250ZW50ID0gXCJQbGF5XCI7XHJcbiAgICBzdGVwQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBzdGVwIHNpbXVsYXRpb24gYnkgMSBmcmFtZVxyXG5leHBvcnQgZnVuY3Rpb24gc3RlcCgpIHtcclxuICBzaW11bGF0aW9uLnVwZGF0ZSgxMDAwIC8gNjApOyAvLyBBc3N1bWVzIDYwRlBTXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvbmZpZ3VyZSgpIHtcclxuICBpZiAocGxheSkge1xyXG4gICAgdGhpcy5wbGF5UGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ1NlbGVjdC52YWx1ZTtcclxuICBjb25zdCBhZ2VudFR5cGUgPSBhZ2VudFR5cGVTZWxlY3QudmFsdWU7IC8vIFRPRE86IHdpcmUgdGhpcyBpblxyXG4gIGNvbnN0IG4gPSBwYXJzZUludChudW1iZXJPZkFnZW50c0lucHV0LnZhbHVlKSA/PyAwO1xyXG5cclxuICAvLyBTZWxlY3QgYWdlbnQgY29uc3RydWN0b3JcclxuICBsZXQgYWdlbnRDb25zdHJ1Y3RvcjtcclxuICBzd2l0Y2ggKGFnZW50VHlwZSkge1xyXG4gICAgY2FzZSBcIkJhc2ljQWdlbnRcIjpcclxuICAgICAgYWdlbnRDb25zdHJ1Y3RvciA9IChcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgICAgZ29hbFBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0sXHJcbiAgICAgICAgcmFkaXVzOiBudW1iZXJcclxuICAgICAgKSA9PiBuZXcgQmFzaWNBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiU3RvcEFnZW50XCI6XHJcbiAgICAgIGFnZW50Q29uc3RydWN0b3IgPSAoXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICAgIGdvYWxQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9LFxyXG4gICAgICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICAgICkgPT4gbmV3IFN0b3BBZ2VudChpZCwgcG9zaXRpb24sIGdvYWxQb3NpdGlvbiwgcmFkaXVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFnZW50IG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNlbGVjdCBjb25maWd1cmF0aW9uXHJcbiAgc3dpdGNoIChjb25maWcpIHtcclxuICAgIGNhc2UgXCJSYW5kb21Ub1JhbmRvbVwiOiB7XHJcbiAgICAgIHNpbXVsYXRpb24uaW5pdChcclxuICAgICAgICBDb25maWd1cmF0aW9ucy5SYW5kb21Ub1JhbmRvbShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiUmFuZG9tVG9MaW5lXCI6IHtcclxuICAgICAgc2ltdWxhdGlvbi5pbml0KFxyXG4gICAgICAgIENvbmZpZ3VyYXRpb25zLlJhbmRvbVRvTGluZShcclxuICAgICAgICAgIG4sXHJcbiAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgYWdlbnRDb25zdHJ1Y3RvclxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiQ2lyY2xlVG9DaXJjbGVcIjoge1xyXG4gICAgICBzaW11bGF0aW9uLmluaXQoXHJcbiAgICAgICAgQ29uZmlndXJhdGlvbnMuQ2lyY2xlVG9DaXJjbGUoXHJcbiAgICAgICAgICBuLFxyXG4gICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgY2FudmFzLmhlaWdodCxcclxuICAgICAgICAgIGFnZW50Q29uc3RydWN0b3JcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygzODkpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9